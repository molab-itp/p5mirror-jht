[
  {
    "_id": "r0N2R5y-q",
    "name": "dice99",
    "updatedAt": "2024-05-01T03:47:43.754Z",
    "files": [
      {
        "name": "root",
        "content": "",
        "children": [
          "6631b958faa2929586cd171c",
          "6631b958faa2929586cd171d",
          "6631b958faa2929586cd171e",
          "6631b958faa2929586cd171f",
          "6631b958faa2929586cd1720"
        ],
        "fileType": "folder",
        "_id": "6631b958faa2929586cd171b",
        "createdAt": "2024-05-01T03:47:43.754Z",
        "updatedAt": "2024-05-01T03:47:43.754Z",
        "isSelectedFile": false,
        "id": "6631b958faa2929586cd171b"
      },
      {
        "name": "create_ui.js",
        "content": "//\n\nfunction create_ui() {\n  my.permBtn = createButton('permission');\n  my.permBtn.mousePressed(permissionAction);\n  my.shakeBtn = createButton('shake');\n  my.shakeBtn.mousePressed(shakeAction);\n\n  my.fullScreenBtn = createButton('fullScreen');\n  my.fullScreenBtn.mousePressed(fullScreenAction);\n\n  // my.chkX = create_checkBox('rotX');\n  // my.chkY = create_checkBox('rotY');\n  // my.chkZ = create_checkBox('rotZ');\n  // // createElement('br');\n  // my.chkAccelX = create_checkBox('accelX');\n  // my.chkAccelY = create_checkBox('accelY');\n  // my.chkAccelZ = create_checkBox('accelZ');\n}\n\nfunction update_ui() {\n  // update_checkBox('chkX', 'rotationX', 'rotX');\n  // update_checkBox('chkY', 'rotationY', 'rotY');\n  // update_checkBox('chkZ', 'rotationZ', 'rotZ');\n  // update_checkBox('chkAccelX', 'accelerationX', 'accelX');\n  // update_checkBox('chkAccelY', 'accelerationY', 'accelY');\n  // update_checkBox('chkAccelZ', 'accelerationZ', 'accelZ');\n}\n\nfunction create_checkBox(prop) {\n  let chk = createCheckbox(prop, my[prop]);\n  chk.changed(function () {\n    my[prop] = this.checked();\n  });\n  return chk;\n}\n\nfunction update_checkBox(chkProp, valProp, label) {\n  //\n  let ref = my[chkProp];\n  let val = window[valProp];\n  let isChecked = ref.checked();\n  let str = label;\n  if (isChecked) str += ' ' + val.toFixed(3);\n  ref.elt.firstChild.lastChild.innerHTML = str;\n}\n\n// <div>\n//   <label>\n//     <input type=\"checkbox\">\n//     <span>rotY</span>\n//   </label>\n// </div>\n// cthis.elt.firstChild.childNodes[1].innerHTML\n\nfunction update_checkBox1(prop) {\n  let ref = my['chk' + prop];\n  let val = window['rotation' + prop];\n  let isChecked = ref.checked();\n  let str = 'rot' + prop;\n  if (isChecked) str += ' ' + val.toFixed(3);\n  ref.elt.firstChild.lastChild.innerHTML = str;\n}\n\n// Need for iOS mobile device to get motion events\nfunction permissionAction() {\n  if (typeof DeviceMotionEvent !== 'undefined' && typeof DeviceMotionEvent.requestPermission === 'function') {\n    // (optional) Do something before API request prompt.\n    DeviceMotionEvent.requestPermission()\n      .then((response) => {\n        console.log('requestPermission response', response);\n        // (optional) Do something after API prompt dismissed.\n        if (response == 'granted') {\n          window.addEventListener('devicemotion', (e) => {\n            // console.log('devicemotion e', e)\n            // console.log('devicemotion e.beta', e.beta)\n          });\n        }\n      })\n      .catch(console.error);\n  } else {\n    alert('DeviceMotionEvent is not defined');\n  }\n}\n",
        "children": [],
        "fileType": "file",
        "_id": "6631b958faa2929586cd171c",
        "isSelectedFile": false,
        "createdAt": "2024-05-01T03:47:43.754Z",
        "updatedAt": "2024-05-01T03:47:43.754Z",
        "id": "6631b958faa2929586cd171c"
      },
      {
        "name": "draw_number.js",
        "content": "//\nfunction draw_number(n, sz) {\n  // Convert number to string\n  let str = (n + '').padStart(2, '0');\n  let x = 10;\n  let y = my.height;\n  textSize(sz);\n  // Draw black rect background\n  let a = textAscent();\n  let d = textDescent();\n  let h = a + d;\n  let w = textWidth(str);\n  fill(0);\n  // rect(x, y - h, w, h);\n  rect(x, 0, w, my.height);\n\n  // Draw white text\n  fill(255);\n  // x  y bottom-left corner.\n  text(str, x, y - (my.height - h));\n}\n",
        "children": [],
        "fileType": "file",
        "_id": "6631b958faa2929586cd171d",
        "isSelectedFile": false,
        "createdAt": "2024-05-01T03:47:43.754Z",
        "updatedAt": "2024-05-01T03:47:43.754Z",
        "id": "6631b958faa2929586cd171d"
      },
      {
        "name": "index.html",
        "content": "<!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.6.0/p5.js\"></script>\n    <!--     <script src=\"https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.6.0/addons/p5.sound.min.js\"></script> -->\n\n    <!-- <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" /> -->\n    <meta name=\"viewport\" content=\"initial-scale=1.0, user-scalable=no, width=device-width, maximum-scale=1.0\" />\n\n    <!-- <link rel=\"stylesheet\" type=\"text/css\" href=\"style.css\" /> -->\n    <style>\n      @media only screen and (max-width: 600px) {\n        body,\n        button,\n        select,\n        input {\n          font-size: 8vw;\n        }\n      }\n      html,\n      body {\n        margin: 0;\n        padding: 0;\n        /* Disable long touch */\n        /* touch-action: none; */\n        -webkit-touch-callout: none; /* Safari */\n        -webkit-user-select: none; /* Chrome */\n        -moz-user-select: none; /* Firefox */\n        -ms-user-select: none; /* Internet Explorer/Edge */\n        user-select: none;\n      }\n      canvas {\n        display: block;\n      }\n    </style>\n  </head>\n  <body>\n    <main></main>\n    <script src=\"create_ui.js\"></script>\n    <script src=\"draw_number.js\"></script>\n    <script src=\"sketch.js\"></script>\n  </body>\n</html>\n",
        "children": [],
        "fileType": "file",
        "_id": "6631b958faa2929586cd171e",
        "isSelectedFile": false,
        "createdAt": "2024-05-01T03:47:43.754Z",
        "updatedAt": "2024-05-01T03:47:43.754Z",
        "id": "6631b958faa2929586cd171e"
      },
      {
        "name": "sketch.js",
        "content": "// https://editor.p5js.org/jht9629-gmail/sketches/r0N2R5y-q\n// dice99\n\n// xxx\n// dice99\n\nlet my = {\n  width: 400,\n  height: 400,\n  rotX: 1,\n  rotY: 0,\n  rotZ: 0,\n  accelX: 0,\n  accelY: 0,\n  accelZ: 0,\n};\n\nfunction setup() {\n  // createCanvas(my.width, my.height, WEBGL);\n  my.width = windowWidth;\n  my.height = windowHeight;\n  my.canvas = createCanvas(my.width, my.height);\n\n  my.canvas.mouseClicked(shakeAction);\n\n  // normalMaterial();\n  create_ui();\n\n  textFont('Courier New');\n  textStyle(BOLD);\n\n  my.num = 99;\n  my.shakeSecs = 1;\n}\n\nfunction draw() {\n  background(200);\n  // if (my.rotZ) rotateZ(radians(rotationZ));\n  // if (my.rotX) rotateX(radians(rotationX));\n  // if (my.rotY) rotateY(radians(rotationY));\n  // box(200, 200, 200);\n\n  draw_number(my.num, my.width * 0.8);\n\n  // if (frameCount % 20 == 0) {\n  let nowTime = millis() / 1000;\n  if (my.shakeRun) {\n    if (nowTime < my.shakeStart + my.shakeSecs) {\n      my.num = Math.floor(random(99));\n    } else {\n      my.shakeRun = 0;\n    }\n  }\n  update_ui();\n}\n\nfunction shakeAction() {\n  my.shakeRun = 1;\n  my.shakeStart = millis() / 1000;\n}\n\nfunction fullScreenAction() {\n  let fs = fullscreen();\n  fullscreen(!fs);\n}\n\nfunction deviceShaken() {\n  shakeAction();\n}\n\nfunction windowResized() {\n  resizeCanvas(windowWidth, windowHeight);\n  my.width = windowWidth;\n  my.height = windowHeight;\n}\n\n// https://editor.p5js.org/jht9629-nyu/sketches/TXvXSJY6L\n// rotationXYZ\n\n// https://p5js.org/reference/#/p5/rotationX\n\n// https://editor.p5js.org/jht9629-nyu/sketches/G6Zr5SBuq\n// rotationX\n\n// https://editor.p5js.org/jht9629-nyu/sketches/bpsB_xmSH\n// gravity-meter\n\n// https://editor.p5js.org/jht9629-nyu/sketches/RRtBxe8lI\n// accelerationXYZ\n",
        "children": [],
        "fileType": "file",
        "_id": "6631b958faa2929586cd171f",
        "isSelectedFile": true,
        "createdAt": "2024-05-01T03:47:43.754Z",
        "updatedAt": "2024-05-01T03:47:43.754Z",
        "id": "6631b958faa2929586cd171f"
      },
      {
        "name": "style.css",
        "content": "html, body {\n  margin: 0;\n  padding: 0;\n}\ncanvas {\n  display: block;\n}\n",
        "children": [],
        "fileType": "file",
        "_id": "6631b958faa2929586cd1720",
        "isSelectedFile": false,
        "createdAt": "2024-05-01T03:47:43.754Z",
        "updatedAt": "2024-05-01T03:47:43.754Z",
        "id": "6631b958faa2929586cd1720"
      }
    ],
    "createdAt": "2024-05-01T03:39:04.219Z",
    "id": "r0N2R5y-q"
  },
  {
    "_id": "NiIAMgIEw",
    "name": "Fibonacci sequence",
    "files": [
      {
        "name": "root",
        "content": "",
        "children": [
          "664e2b61cb58d0606f763fd9",
          "664e2b61cb58d0606f763fda",
          "664e2b61cb58d0606f763fdb"
        ],
        "fileType": "folder",
        "_id": "664e2b61cb58d0606f763fd8",
        "updatedAt": "2024-05-22T22:29:37.303Z",
        "createdAt": "2024-05-22T22:29:37.303Z",
        "isSelectedFile": false,
        "id": "664e2b61cb58d0606f763fd8"
      },
      {
        "name": "sketch.js",
        "content": "// https://editor.p5js.org/jht9629-gmail/sketches/NiIAMgIEw\n// Fibonacci sequence\n// class to object literal\n// adjust for window size\n// latest libs/p5.js/1.9.3/\n\nlet my = {};\n\nfunction setup() {\n  createCanvas(windowWidth, windowHeight);\n  init_fib();\n\n  background(220);\n\n  var mult = 10;\n\n  let centerX = int(windowWidth / 2);\n  let centerY = int(windowHeight / 2);\n  translate(centerX, centerY);\n  \n  let maxW = centerX\n  console.log(\"centerX, centerY\", centerX, centerY, \"maxW\", maxW);\n  \n  rect(0, 0, my.n2 * mult, my.n2 * mult);\n\n  for (var i = 0; ; i++) {\n    next_fib();\n    \n    translate(my.n1 * mult, my.n1 * mult + 1);\n    rotate(-HALF_PI);\n    // translate(my.n1 * mult +1, my.n1 * mult );\n    // rotate(HALF_PI);\n    \n    let w = my.n2 * mult;\n    console.log(\"next_fib\", my.n2, my.n2 / my.n1, \"w\", w);\n\n    if (w > maxW*2) {\n      break;\n    }\n    rect(0, 0, w, w);\n  }\n}\n\nfunction init_fib() {\n  my.n1 = 0;\n  my.n2 = 1;\n  console.log(\"init_fib\", my.n1, my.n2);\n}\n\nfunction next_fib() {\n  let oldN1 = my.n1;\n  let oldN2 = my.n2;\n  my.n1 = my.n2;\n  my.n2 = oldN1 + oldN2;\n}\n\n// https://editor.p5js.org/jht9629-nyu/sketches/Q-O6WsDdt\n// https://editor.p5js.org/ktorn/sketches/r1dFaL5f4\n// Fibonacci sequence (visualisation)\n// https://editor.p5js.org/ktorn/sketches\n",
        "children": [],
        "fileType": "file",
        "_id": "664e2b61cb58d0606f763fda",
        "updatedAt": "2024-05-22T22:29:37.303Z",
        "createdAt": "2024-05-22T22:29:37.303Z",
        "isSelectedFile": true,
        "id": "664e2b61cb58d0606f763fda"
      },
      {
        "name": "index.html",
        "content": "<!DOCTYPE html>\n<html>\n  <head>\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.3/p5.js\"></script>\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.3/addons/p5.sound.min.js\"></script>\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"style.css\">\n    <meta charset=\"utf-8\" />\n\n  </head>\n  <body>\n    <script src=\"sketch.js\"></script>\n  </body>\n</html>\n",
        "children": [],
        "fileType": "file",
        "_id": "664e2b61cb58d0606f763fd9",
        "updatedAt": "2024-05-22T22:29:37.303Z",
        "createdAt": "2024-05-22T22:29:37.303Z",
        "isSelectedFile": false,
        "id": "664e2b61cb58d0606f763fd9"
      },
      {
        "name": "style.css",
        "content": "html, body {\n  margin: 0;\n  padding: 0;\n}\ncanvas {\n  display: block;\n}\n",
        "children": [],
        "fileType": "file",
        "_id": "664e2b61cb58d0606f763fdb",
        "updatedAt": "2024-05-22T22:29:37.303Z",
        "createdAt": "2024-05-22T22:29:37.303Z",
        "isSelectedFile": false,
        "id": "664e2b61cb58d0606f763fdb"
      }
    ],
    "createdAt": "2024-05-22T17:29:05.608Z",
    "updatedAt": "2024-05-22T22:29:37.303Z",
    "id": "NiIAMgIEw"
  },
  {
    "_id": "ZAcCtjLr0",
    "name": "iframe_player",
    "updatedAt": "2024-05-01T03:47:43.570Z",
    "files": [
      {
        "name": "root",
        "content": "",
        "children": [
          "6631b958faa2929586cd1722",
          "6631b958faa2929586cd1723"
        ],
        "fileType": "folder",
        "_id": "6631b958faa2929586cd1721",
        "createdAt": "2024-05-01T03:47:43.570Z",
        "updatedAt": "2024-05-01T03:47:43.570Z",
        "isSelectedFile": false,
        "id": "6631b958faa2929586cd1721"
      },
      {
        "name": "index.html",
        "content": "<!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/p5.js\"></script>\n    <!-- <script src=\"https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/addons/p5.sound.min.js\"></script> -->\n\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"https://molab-itp.github.io/p5moRelease/lib/47/style.css\" />\n    <!-- <link rel=\"stylesheet\" type=\"text/css\" href=\"../../../p5moLibrary/src/lib/style.css\" /> -->\n\n    <style></style>\n  </head>\n  <body>\n    <main></main>\n\n    <script type=\"module\" src=\"https://molab-itp.github.io/p5moRelease/lib/47/a_lib.js\"></script>\n    <!-- <script type=\"module\" src=\"../../p5moLibrary/src/lib/a_lib.js\"></script> -->\n\n    <script src=\"sketch.js?v=81\"></script>\n    <!-- <script src=\"sketch.js\"></script> -->\n\n    <!-- <iframe src=\"https://www.merriam-webster.com/word-of-the-day/2023-01-01\" title=\"Words\"></iframe> -->\n  </body>\n</html>\n",
        "children": [],
        "fileType": "file",
        "_id": "6631b958faa2929586cd1722",
        "isSelectedFile": false,
        "createdAt": "2024-05-01T03:47:43.570Z",
        "updatedAt": "2024-05-01T03:47:43.570Z",
        "id": "6631b958faa2929586cd1722"
      },
      {
        "name": "sketch.js",
        "content": "// https://editor.p5js.org/jht9629-gmail/sketches/ZAcCtjLr0\n// iframe_player\n\n// https://editor.p5js.org/jht9629-nyu/sketches/88yxquMBl\n// p5moExamples iframe_player 47\n\n// my.items is play list of p5js sketches\n// which are played in sequence\n// switching every my.perSlideSecs seconds\n// moLibrary is used to save my.item_index in firebase realtime database\n\n// sketches harvested from\n// https://github.com/molab-itp/p5mirror/forks\n\nlet my = {};\n\nfunction my_setup() {\n  my.width = windowWidth;\n  my.height = windowHeight;\n  my.fireb_config = 'jht9629';\n  // my.fireb_config = 'jht1493';\n  // my.fireb_config = 'jhtitp';\n  my.dbase_rootPath = 'm0-@r-@w-';\n  my.roomName = 'room1';\n  my.mo_app = 'mo-iframe_player';\n  my.nameDevice = '';\n\n  my.perSlideSecs = 7;\n  my.perSlideTime = millis();\n\n  my.item_index = 0;\n  my.items = [];\n  my.items.push('https://leey611.github.io/p5mirror-leey611/p5projects/ims02-yu-T5zVm6jEl/');\n  my.items.push(\n    'https://newbenjaminb.github.io/p5mirror-bb/p5projects/%20W6.4-1v4%20colliding%20balls%20DONE-VbVQXinn1/'\n  );\n  my.items.push('https://molab-itp.github.io/p5moExamples/examples/lobby/?v=81&room=room0');\n  my.items.push('https://karakkzzk.github.io/p5mirror-karakkzzk/p5projects/Innovative%20crafter-OcjJ4foZE/');\n  my.items.push('https://paulineium.github.io/p5mirror-pk2196/p5projects/ims01-paulineium-CHGZXqDjz/');\n  my.items.push('https://jiaying0412.github.io/p5mirror---jiaying0822/p5projects/ims01-Jiaz-jYTEhmWCm/');\n  // my.items.push(\n  //   'https://leey611.github.io/p5mirror-leey611/p5projects/Bezier%20Curve%20Interactive%20Tangents%20copy-ZfRGzFyhK/'\n  // );\n\n  my.iframe_src = my.items[my.item_index];\n}\n\nfunction setup() {\n  my_setup();\n\n  create_my_iframe();\n\n  // my.canvas = createCanvas(my.width, my.height);\n  noCanvas();\n\n  dbase_app_init({ completed: startup_completed });\n\n  createButton('Next').mousePressed(next_action);\n  createButton('Previous').mousePressed(previous_action);\n  createButton('First').mousePressed(first_action);\n  createSpan(' Index ');\n  my.item_index_span = createSpan(my.item_index);\n  createSpan(' ');\n  my.timer_span = createSpan('');\n\n  // Move the iframe below all the ui elements\n  let body_elt = document.querySelector('body');\n  let other_elt = my.iframe_element.elt;\n  body_elt.insertBefore(other_elt, null);\n}\n\nfunction create_my_iframe() {\n  my.iframe_element = createElement('iframe');\n  item_index_changed();\n}\n\nfunction draw() {\n  //\n  my.item_index_span.html(my.item_index);\n\n  let now = millis();\n  let lapse = (now - my.perSlideTime) / 1000;\n  if (lapse > my.perSlideSecs) {\n    my.perSlideTime = now;\n    next_action();\n  }\n  my.timer_span.html(lapse.toFixed(1));\n}\n\nfunction startup_completed() {\n  console.log('startup_completed');\n\n  dbase_devices_observe({ observed_item, all: 1 });\n\n  function observed_item(device) {\n    console.log('observed_item device', device);\n    if (device.item_index != undefined) {\n      my.item_index = device.item_index;\n      item_index_changed();\n    }\n  }\n}\n\nfunction item_index_changed() {\n  my.iframe_src = my.items[my.item_index];\n  my.iframe_element.elt.src = my.iframe_src;\n  my.iframe_element.elt.width = windowWidth;\n  my.iframe_element.elt.height = windowHeight;\n}\n\nfunction first_action() {\n  dbase_update_props({ item_index: 0 });\n  my.perSlideTime = millis();\n}\n\nfunction next_action() {\n  let last = my.items.length - 1;\n  if (my.item_index >= last) {\n    dbase_update_props({ item_index: 0 });\n  } else {\n    dbase_update_props({ item_index: dbase_increment(1) });\n  }\n}\n\nfunction previous_action() {\n  let last = my.items.length - 1;\n  if (my.item_index <= 0) {\n    dbase_update_props({ item_index: last });\n  } else {\n    dbase_update_props({ item_index: dbase_increment(-1) });\n  }\n}\n\nfunction windowResized() {\n  item_index_changed();\n}\n\n// https://editor.p5js.org/jht9629-nyu/sketches/23h3z1G82\n// p5moExamples words 47\n",
        "children": [],
        "fileType": "file",
        "_id": "6631b958faa2929586cd1723",
        "isSelectedFile": true,
        "createdAt": "2024-05-01T03:47:43.570Z",
        "updatedAt": "2024-05-01T03:47:43.570Z",
        "id": "6631b958faa2929586cd1723"
      }
    ],
    "createdAt": "2024-05-01T03:39:04.436Z",
    "id": "ZAcCtjLr0"
  },
  {
    "_id": "FGfHvm6DBp",
    "name": "ims_noise_inst",
    "files": [
      {
        "name": "root",
        "content": "",
        "children": [
          "67d5f30c7f5cb6072fce3052",
          "67d5f30c7f5cb6072fce3053",
          "67d5f30c7f5cb6072fce3054"
        ],
        "fileType": "folder",
        "_id": "67d5f30c7f5cb6072fce3051",
        "createdAt": "2025-03-15T21:37:16.088Z",
        "updatedAt": "2025-03-15T21:37:16.088Z",
        "id": "67d5f30c7f5cb6072fce3051"
      },
      {
        "name": "index.html",
        "content": "<!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    <title>?=v6 ims_noise_inst</title>\n    <meta charset=\"utf-8\" />\n    <meta http-equiv=\"Cache-Control\" content=\"no-cache, no-store, must-revalidate\" />\n    <meta http-equiv=\"Pragma\" content=\"no-cache\" />\n    <meta http-equiv=\"Expires\" content=\"0\" />\n\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.11.1/p5.js\"></script>\n    <!-- <script src=\"https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.11.1/addons/p5.sound.min.js\"></script> -->\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"style.css\" />\n  </head>\n  <body>\n    <main></main>\n    <script src=\"sketch.js\"></script>\n  </body>\n</html>\n",
        "children": [],
        "fileType": "file",
        "isSelectedFile": false,
        "_id": "67d5f30c7f5cb6072fce3052",
        "createdAt": "2025-03-15T21:37:16.088Z",
        "updatedAt": "2025-03-15T21:37:16.088Z",
        "id": "67d5f30c7f5cb6072fce3052"
      },
      {
        "name": "sketch.js",
        "content": "// https://editor.p5js.org/p5name/sketches/TU9CrJ1di\n// ims noise class\n\nlet my = {};\n\nlet alphaRed = [255, 0, 0, 80];\nlet alphaGreen = [0, 255, 0, 80];\nlet alphaGold = [255, 214, 0, 80];\nlet colors = [alphaRed, alphaGreen, alphaGold];\nlet colorIndex = 0;\nlet colorCount = 0;\nlet colorCountMax = 360;\n\nfunction setup() {\n  my.backAlpha = 10;\n  my.clearSecs = 60;\n  my.canv = createCanvas(windowWidth, windowHeight - 55);\n  my.ln1 = new LineNoise();\n  // my.ln2 = new LineNoise({ start: 10000, rot: 45, color: alphaRed });\n  // my.ln3 = new LineNoise({ start: 30000, rot: 90, color: alphaGreen });\n  // my.ln4 = new LineNoise({ start: 40000, rot: 180, color: alphaGold });\n\n  setup_fullScreenBtn();\n}\n\nfunction draw() {\n  let backAlpha = my.backAlpha;\n  let nframes = floor(frameRate() * my.clearSecs);\n  if (frameCount % nframes == 0) {\n    backAlpha = 255;\n  }\n  background(0, backAlpha);\n  noFill();\n\n  set_color();\n\n  my.ln1.draw();\n  // my.ln2.draw();\n  // my.ln3.draw();\n  // my.ln4.draw();\n}\n\nfunction set_color() {\n  let col = colors[colorIndex];\n  stroke(col);\n  colorCount = (colorCount + 1) % colorCountMax;\n  if (colorCount == 0) {\n    colorIndex = (colorIndex + 1) % colors.length;\n  }\n}\n\n// { inc, start, rot, rotDelta, incAccel }\nclass LineNoise {\n  constructor(props) {\n    // default properties\n    this.inc = 0.001;\n    // this. inc = 0.02;\n    this.start = 0;\n    this.rot = 0;\n    // this. rotDelta = 0.0;\n    this.rotDelta = 0.2;\n    this.incAccel = 6;\n    // this. incAccel = 2;\n    // this.color = 255;\n    Object.assign(this, props);\n    console.log('LineNoise start', this.start, this.color);\n  }\n\n  draw() {\n    push();\n\n    translate(width / 2, height / 2);\n    rotate(radians(this.rot));\n    this.rot = this.rot + this.rotDelta;\n    if (this.color) {\n      stroke(this.color);\n    }\n    beginShape();\n    let xoff = this.start;\n    for (let x = -width; x < width; x++) {\n      // let y = random(height);\n      let y = (noise(xoff) - 0.5) * height;\n      vertex(x, y);\n\n      xoff += this.inc;\n    }\n    endShape();\n\n    this.start += this.inc * this.incAccel;\n\n    pop();\n  }\n}\n\nfunction windowResized() {\n  resizeCanvas(windowWidth, windowHeight);\n}\n\nfunction setup_fullScreenBtn() {\n  my.fullScreenBtn = createButton('?=v6 Full Screen');\n  my.fullScreenBtn.mousePressed(full_screen_action);\n  my.fullScreenBtn.style('font-size:42px');\n}\n\nfunction full_screen_action() {\n  my.fullScreenBtn.remove();\n  fullscreen(1);\n  let delay = 3000;\n  setTimeout(ui_present_window, delay);\n}\n\nfunction ui_present_window() {\n  resizeCanvas(windowWidth, windowHeight);\n  // init_dim();\n}\n\n// Graphing 1D Perlin Noise (1D Noise Graph)\n// The Coding Train / Daniel Shiffman\n// https://thecodingtrain.com/learning/noise/0.4-graphing-1d.html\n// https://youtu.be/y7sgcFhk6ZM\n\n// Adding Y-Axis: https://editor.p5js.org/codingtrain/sketches/nCYG2SCNq\n// Noise Graph: https://editor.p5js.org/codingtrain/sketches/EZeHXBhei\n// Noisy Sin: https://editor.p5js.org/codingtrain/sketches/M_kuAXwV2\n\n// This example has been updated to use es6 syntax. To learn more about es6 visit: https://thecodingtrain.com/Tutorials/16-javascript-es6\n\n// p5.js/1.11.1\n\n// https://editor.p5js.org/p5name/sketches/ZO-2p0H5_\n// ims noise rotate\n",
        "children": [],
        "fileType": "file",
        "isSelectedFile": true,
        "_id": "67d5f30c7f5cb6072fce3053",
        "createdAt": "2025-03-15T21:37:16.088Z",
        "updatedAt": "2025-03-15T21:37:16.088Z",
        "id": "67d5f30c7f5cb6072fce3053"
      },
      {
        "name": "style.css",
        "content": "html, body {\n  margin: 0;\n  padding: 0;\n}\ncanvas {\n  display: block;\n}\n",
        "children": [],
        "fileType": "file",
        "isSelectedFile": false,
        "_id": "67d5f30c7f5cb6072fce3054",
        "createdAt": "2025-03-15T21:37:16.088Z",
        "updatedAt": "2025-03-15T21:37:16.088Z",
        "id": "67d5f30c7f5cb6072fce3054"
      }
    ],
    "createdAt": "2025-03-15T19:33:41.843Z",
    "updatedAt": "2025-03-15T21:37:16.088Z",
    "id": "FGfHvm6DBp"
  },
  {
    "_id": "LGOjqYDkLD",
    "name": "lobby",
    "updatedAt": "2024-05-01T03:47:43.395Z",
    "files": [
      {
        "name": "root",
        "content": "",
        "children": [
          "6631b958faa2929586cd1725",
          "6631b958faa2929586cd1726"
        ],
        "fileType": "folder",
        "_id": "6631b958faa2929586cd1724",
        "createdAt": "2024-05-01T03:47:43.395Z",
        "updatedAt": "2024-05-01T03:47:43.395Z",
        "isSelectedFile": false,
        "id": "6631b958faa2929586cd1724"
      },
      {
        "name": "a_sketch.js",
        "content": "// https://editor.p5js.org/jht9629-gmail/sketches/LGOjqYDkLD\n// lobby\n\n// https://editor.p5js.org/jht9629-nyu/sketches/vP6sWN4Cu\n// p5moExamples lobby\n\n// expand circle size to fit as many circles in canvas as possible\n\nlet my = {};\n\n// my.site_devices.length\n// my.site_devices[0].uid\n// my.site_devices[0].dbase.date_s\n// my.site_devices[0].dbase.visit_count\n// my.site_devices[0].dbase.userAgent\n\nfunction my_setup() {\n  my.width = windowWidth;\n  my.height = windowHeight;\n  my.fireb_config = 'jht9629';\n  // my.fireb_config = 'jht1493';\n  // my.fireb_config = 'jhtitp';\n  // my.fireb_config = my_firebaseConfig;\n  my.dbase_rootPath = 'm0-@r-@w-';\n  my.mo_app = 'mo-blackfacts';\n  my.nameDevice = '';\n  my.ndiv = 1;\n\n  my.query = get_url_params();\n\n  my.roomName = 'room1';\n  if (my.query) {\n    my.roomName = my.query.room || my.roomName;\n  }\n}\n\n// Your web app's Firebase configuration\nconst my_firebaseConfig = {\n  apiKey: 'AIzaSyBg2bnuULvLvkd6SOAEetErgNtyGsNIb8c',\n  authDomain: 'jhtitp-2417a.firebaseapp.com',\n  projectId: 'jhtitp-2417a',\n  storageBucket: 'jhtitp-2417a.appspot.com',\n  messagingSenderId: '523385422249',\n  appId: '1:523385422249:web:52df2a4c0803b79c2a04b8',\n};\n\nfunction setup() {\n  my_setup();\n\n  my.canvas = createCanvas(my.width, my.height);\n\n  dbase_app_init({});\n}\n\nfunction draw() {\n  background(200);\n  my.site_devices = dbase_site_devices();\n  if (!my.site_devices) return;\n  let ndevices = my.site_devices.length;\n  if (ndevices != my.last_ndevices) {\n    console.log('ndevices', ndevices);\n    my.ndiv = 1;\n  }\n  my.last_ndevices = ndevices;\n  my.len = width / my.ndiv;\n  my.half = my.len / 2;\n  my.dotLen = my.len / 3;\n  let x0 = my.half;\n  let y = my.half;\n  let x = x0;\n  for (let index = 0; index < ndevices; index++) {\n    let last = index == ndevices - 1;\n    draw_device(index, x, y);\n    if (!last) {\n      x += my.len;\n    }\n    if (x > width) {\n      x = x0;\n      y += my.len;\n      if (y + my.half > height) {\n        my.ndiv += 1;\n        break;\n      }\n    }\n  }\n}\n\nfunction draw_device(index, x, y) {\n  let device = my.site_devices[index];\n  let last = device.index == my.site_devices.length - 1;\n  // Black big circle\n  fill(0);\n  circle(x, y, my.len);\n  // inner green dot marks active device\n  if (dbase_site_isActive(device)) {\n    fill('green');\n    circle(x, y, my.dotLen);\n  }\n  // inner yellow dot marks my device\n  if (device.uid == my.uid) {\n    fill([187, 165, 61]);\n    circle(x, y, my.dotLen);\n  }\n  if (last) {\n    fill('red');\n    circle(x, y, my.dotLen * 0.5);\n  }\n  fill(255);\n  let n = device.index + 1;\n  text(n + '', x, y);\n}\n\nfunction downloadAction() {\n  if (!my.site_devices) return;\n  let str = JSON.stringify(my.site_devices, undefined, 2);\n  downloadToFile('lobby-' + my.mo_app + '-live' + '.json', str);\n  downloadActionShort();\n}\n\nfunction downloadActionShort() {\n  //\n  // remove arrays to short display of summary\n  //\n  for (let device of my.site_devices) {\n    delete device.dbase.update;\n    delete device.dbase.visit;\n  }\n  let str = JSON.stringify(my.site_devices, undefined, 2);\n  downloadToFile('lobby-' + my.mo_app + '-live-short' + '.json', str);\n}\n\n// https://stackoverflow.com/questions/3665115/how-to-create-a-file-in-memory-for-user-to-download-but-not-through-server\nfunction downloadToFile(filename, text) {\n  var element = document.createElement('a');\n  element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));\n  element.setAttribute('download', filename);\n  element.style.display = 'none';\n  document.body.appendChild(element);\n  element.click();\n  document.body.removeChild(element);\n}\n\n// F5 to select chrome\n// VS Code menu: Run > Start Debugging\n\n// .vscode/launch.json\n//       \"url\": \"http://localhost:5500/p5moExamples/examples/lobby\",\n\n// https://stackoverflow.com/questions/46945784/how-to-debug-javascript-in-visual-studio-code-with-live-server-running\n",
        "children": [],
        "fileType": "file",
        "_id": "6631b958faa2929586cd1725",
        "isSelectedFile": true,
        "createdAt": "2024-05-01T03:47:43.395Z",
        "updatedAt": "2024-05-01T03:47:43.395Z",
        "id": "6631b958faa2929586cd1725"
      },
      {
        "name": "index.html",
        "content": "<!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/p5.js\"></script>\n    <!-- <script src=\"https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/addons/p5.sound.min.js\"></script> -->\n\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"https://molab-itp.github.io/p5moRelease/lib/47/style.css\"></script>\n    <!-- <link rel=\"stylesheet\" type=\"text/css\" href=\"../../../p5moLibrary/src/lib/style.css?v=81\" /> -->\n\n    <style></style>\n  </head>\n  <body>\n    <main></main>\n\n    <script type=\"module\" src=\"https://molab-itp.github.io/p5moRelease/lib/47/a_lib.js\"></script>\n    <!-- <script type=\"module\" src=\"../../p5moLibrary/src/lib/a_lib.js\"></script> -->\n\n    <script src=\"a_sketch.js?v=81\"></script>\n    <!-- <script src=\"a_sketch-1.js\"></script> -->\n  </body>\n</html>\n",
        "children": [],
        "fileType": "file",
        "_id": "6631b958faa2929586cd1726",
        "isSelectedFile": false,
        "createdAt": "2024-05-01T03:47:43.395Z",
        "updatedAt": "2024-05-01T03:47:43.395Z",
        "id": "6631b958faa2929586cd1726"
      }
    ],
    "createdAt": "2024-05-01T03:39:04.623Z",
    "id": "LGOjqYDkLD"
  },
  {
    "_id": "ScCMFzWqR",
    "name": "OpenSimplex-Noise",
    "files": [
      {
        "name": "root",
        "content": "",
        "children": [
          "67d5f30b7f5cb6072fce3049",
          "67d5f30b7f5cb6072fce304a",
          "67d5f30b7f5cb6072fce304b",
          "67d5f30b7f5cb6072fce304c"
        ],
        "fileType": "folder",
        "_id": "67d5f30b7f5cb6072fce3048",
        "createdAt": "2025-03-15T21:37:15.764Z",
        "updatedAt": "2025-03-15T21:37:15.764Z",
        "id": "67d5f30b7f5cb6072fce3048"
      },
      {
        "name": "OpenSimplexNoise.js",
        "content": "// Plain JS version of Josh Forisha's implementation of opensimplex noise\n// https://github.com/joshforisha/open-simplex-noise-js\n// This version is currently posted here https://gist.github.com/PARC6502/85c99c04c9b3c6ae52c3c27605b4df0a\n// Will probably be cleaned up and have its own repo, at some point...\n\n\"use strict\";\nvar OpenSimplexNoise;\n\n(function() {\n  var constants_1 = {\n    NORM_2D: 1.0 / 47.0,\n    NORM_3D: 1.0 / 103.0,\n    NORM_4D: 1.0 / 30.0,\n    SQUISH_2D: (Math.sqrt(2 + 1) - 1) / 2,\n    SQUISH_3D: (Math.sqrt(3 + 1) - 1) / 3,\n    SQUISH_4D: (Math.sqrt(4 + 1) - 1) / 4,\n    STRETCH_2D: (1 / Math.sqrt(2 + 1) - 1) / 2,\n    STRETCH_3D: (1 / Math.sqrt(3 + 1) - 1) / 3,\n    STRETCH_4D: (1 / Math.sqrt(4 + 1) - 1) / 4,\n    base2D: [[1, 1, 0, 1, 0, 1, 0, 0, 0], [1, 1, 0, 1, 0, 1, 2, 1, 1]],\n    base3D: [\n      [0, 0, 0, 0, 1, 1, 0, 0, 1, 0, 1, 0, 1, 0, 0, 1],\n      [2, 1, 1, 0, 2, 1, 0, 1, 2, 0, 1, 1, 3, 1, 1, 1],\n      [1, 1, 0, 0, 1, 0, 1, 0, 1, 0, 0, 1, 2, 1, 1, 0, 2, 1, 0, 1, 2, 0, 1, 1]\n    ],\n    base4D: [\n      [\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        1,\n        0,\n        0,\n        0,\n        1,\n        0,\n        1,\n        0,\n        0,\n        1,\n        0,\n        0,\n        1,\n        0,\n        1,\n        0,\n        0,\n        0,\n        1\n      ],\n      [\n        3,\n        1,\n        1,\n        1,\n        0,\n        3,\n        1,\n        1,\n        0,\n        1,\n        3,\n        1,\n        0,\n        1,\n        1,\n        3,\n        0,\n        1,\n        1,\n        1,\n        4,\n        1,\n        1,\n        1,\n        1\n      ],\n      [\n        1,\n        1,\n        0,\n        0,\n        0,\n        1,\n        0,\n        1,\n        0,\n        0,\n        1,\n        0,\n        0,\n        1,\n        0,\n        1,\n        0,\n        0,\n        0,\n        1,\n        2,\n        1,\n        1,\n        0,\n        0,\n        2,\n        1,\n        0,\n        1,\n        0,\n        2,\n        1,\n        0,\n        0,\n        1,\n        2,\n        0,\n        1,\n        1,\n        0,\n        2,\n        0,\n        1,\n        0,\n        1,\n        2,\n        0,\n        0,\n        1,\n        1\n      ],\n      [\n        3,\n        1,\n        1,\n        1,\n        0,\n        3,\n        1,\n        1,\n        0,\n        1,\n        3,\n        1,\n        0,\n        1,\n        1,\n        3,\n        0,\n        1,\n        1,\n        1,\n        2,\n        1,\n        1,\n        0,\n        0,\n        2,\n        1,\n        0,\n        1,\n        0,\n        2,\n        1,\n        0,\n        0,\n        1,\n        2,\n        0,\n        1,\n        1,\n        0,\n        2,\n        0,\n        1,\n        0,\n        1,\n        2,\n        0,\n        0,\n        1,\n        1\n      ]\n    ],\n    gradients2D: [5, 2, 2, 5, -5, 2, -2, 5, 5, -2, 2, -5, -5, -2, -2, -5],\n    gradients3D: [\n      -11,\n      4,\n      4,\n      -4,\n      11,\n      4,\n      -4,\n      4,\n      11,\n      11,\n      4,\n      4,\n      4,\n      11,\n      4,\n      4,\n      4,\n      11,\n      -11,\n      -4,\n      4,\n      -4,\n      -11,\n      4,\n      -4,\n      -4,\n      11,\n      11,\n      -4,\n      4,\n      4,\n      -11,\n      4,\n      4,\n      -4,\n      11,\n      -11,\n      4,\n      -4,\n      -4,\n      11,\n      -4,\n      -4,\n      4,\n      -11,\n      11,\n      4,\n      -4,\n      4,\n      11,\n      -4,\n      4,\n      4,\n      -11,\n      -11,\n      -4,\n      -4,\n      -4,\n      -11,\n      -4,\n      -4,\n      -4,\n      -11,\n      11,\n      -4,\n      -4,\n      4,\n      -11,\n      -4,\n      4,\n      -4,\n      -11\n    ],\n    gradients4D: [\n      3,\n      1,\n      1,\n      1,\n      1,\n      3,\n      1,\n      1,\n      1,\n      1,\n      3,\n      1,\n      1,\n      1,\n      1,\n      3,\n      -3,\n      1,\n      1,\n      1,\n      -1,\n      3,\n      1,\n      1,\n      -1,\n      1,\n      3,\n      1,\n      -1,\n      1,\n      1,\n      3,\n      3,\n      -1,\n      1,\n      1,\n      1,\n      -3,\n      1,\n      1,\n      1,\n      -1,\n      3,\n      1,\n      1,\n      -1,\n      1,\n      3,\n      -3,\n      -1,\n      1,\n      1,\n      -1,\n      -3,\n      1,\n      1,\n      -1,\n      -1,\n      3,\n      1,\n      -1,\n      -1,\n      1,\n      3,\n      3,\n      1,\n      -1,\n      1,\n      1,\n      3,\n      -1,\n      1,\n      1,\n      1,\n      -3,\n      1,\n      1,\n      1,\n      -1,\n      3,\n      -3,\n      1,\n      -1,\n      1,\n      -1,\n      3,\n      -1,\n      1,\n      -1,\n      1,\n      -3,\n      1,\n      -1,\n      1,\n      -1,\n      3,\n      3,\n      -1,\n      -1,\n      1,\n      1,\n      -3,\n      -1,\n      1,\n      1,\n      -1,\n      -3,\n      1,\n      1,\n      -1,\n      -1,\n      3,\n      -3,\n      -1,\n      -1,\n      1,\n      -1,\n      -3,\n      -1,\n      1,\n      -1,\n      -1,\n      -3,\n      1,\n      -1,\n      -1,\n      -1,\n      3,\n      3,\n      1,\n      1,\n      -1,\n      1,\n      3,\n      1,\n      -1,\n      1,\n      1,\n      3,\n      -1,\n      1,\n      1,\n      1,\n      -3,\n      -3,\n      1,\n      1,\n      -1,\n      -1,\n      3,\n      1,\n      -1,\n      -1,\n      1,\n      3,\n      -1,\n      -1,\n      1,\n      1,\n      -3,\n      3,\n      -1,\n      1,\n      -1,\n      1,\n      -3,\n      1,\n      -1,\n      1,\n      -1,\n      3,\n      -1,\n      1,\n      -1,\n      1,\n      -3,\n      -3,\n      -1,\n      1,\n      -1,\n      -1,\n      -3,\n      1,\n      -1,\n      -1,\n      -1,\n      3,\n      -1,\n      -1,\n      -1,\n      1,\n      -3,\n      3,\n      1,\n      -1,\n      -1,\n      1,\n      3,\n      -1,\n      -1,\n      1,\n      1,\n      -3,\n      -1,\n      1,\n      1,\n      -1,\n      -3,\n      -3,\n      1,\n      -1,\n      -1,\n      -1,\n      3,\n      -1,\n      -1,\n      -1,\n      1,\n      -3,\n      -1,\n      -1,\n      1,\n      -1,\n      -3,\n      3,\n      -1,\n      -1,\n      -1,\n      1,\n      -3,\n      -1,\n      -1,\n      1,\n      -1,\n      -3,\n      -1,\n      1,\n      -1,\n      -1,\n      -3,\n      -3,\n      -1,\n      -1,\n      -1,\n      -1,\n      -3,\n      -1,\n      -1,\n      -1,\n      -1,\n      -3,\n      -1,\n      -1,\n      -1,\n      -1,\n      -3\n    ],\n    lookupPairs2D: [\n      0,\n      1,\n      1,\n      0,\n      4,\n      1,\n      17,\n      0,\n      20,\n      2,\n      21,\n      2,\n      22,\n      5,\n      23,\n      5,\n      26,\n      4,\n      39,\n      3,\n      42,\n      4,\n      43,\n      3\n    ],\n    lookupPairs3D: [\n      0,\n      2,\n      1,\n      1,\n      2,\n      2,\n      5,\n      1,\n      6,\n      0,\n      7,\n      0,\n      32,\n      2,\n      34,\n      2,\n      129,\n      1,\n      133,\n      1,\n      160,\n      5,\n      161,\n      5,\n      518,\n      0,\n      519,\n      0,\n      546,\n      4,\n      550,\n      4,\n      645,\n      3,\n      647,\n      3,\n      672,\n      5,\n      673,\n      5,\n      674,\n      4,\n      677,\n      3,\n      678,\n      4,\n      679,\n      3,\n      680,\n      13,\n      681,\n      13,\n      682,\n      12,\n      685,\n      14,\n      686,\n      12,\n      687,\n      14,\n      712,\n      20,\n      714,\n      18,\n      809,\n      21,\n      813,\n      23,\n      840,\n      20,\n      841,\n      21,\n      1198,\n      19,\n      1199,\n      22,\n      1226,\n      18,\n      1230,\n      19,\n      1325,\n      23,\n      1327,\n      22,\n      1352,\n      15,\n      1353,\n      17,\n      1354,\n      15,\n      1357,\n      17,\n      1358,\n      16,\n      1359,\n      16,\n      1360,\n      11,\n      1361,\n      10,\n      1362,\n      11,\n      1365,\n      10,\n      1366,\n      9,\n      1367,\n      9,\n      1392,\n      11,\n      1394,\n      11,\n      1489,\n      10,\n      1493,\n      10,\n      1520,\n      8,\n      1521,\n      8,\n      1878,\n      9,\n      1879,\n      9,\n      1906,\n      7,\n      1910,\n      7,\n      2005,\n      6,\n      2007,\n      6,\n      2032,\n      8,\n      2033,\n      8,\n      2034,\n      7,\n      2037,\n      6,\n      2038,\n      7,\n      2039,\n      6\n    ],\n    lookupPairs4D: [\n      0,\n      3,\n      1,\n      2,\n      2,\n      3,\n      5,\n      2,\n      6,\n      1,\n      7,\n      1,\n      8,\n      3,\n      9,\n      2,\n      10,\n      3,\n      13,\n      2,\n      16,\n      3,\n      18,\n      3,\n      22,\n      1,\n      23,\n      1,\n      24,\n      3,\n      26,\n      3,\n      33,\n      2,\n      37,\n      2,\n      38,\n      1,\n      39,\n      1,\n      41,\n      2,\n      45,\n      2,\n      54,\n      1,\n      55,\n      1,\n      56,\n      0,\n      57,\n      0,\n      58,\n      0,\n      59,\n      0,\n      60,\n      0,\n      61,\n      0,\n      62,\n      0,\n      63,\n      0,\n      256,\n      3,\n      258,\n      3,\n      264,\n      3,\n      266,\n      3,\n      272,\n      3,\n      274,\n      3,\n      280,\n      3,\n      282,\n      3,\n      2049,\n      2,\n      2053,\n      2,\n      2057,\n      2,\n      2061,\n      2,\n      2081,\n      2,\n      2085,\n      2,\n      2089,\n      2,\n      2093,\n      2,\n      2304,\n      9,\n      2305,\n      9,\n      2312,\n      9,\n      2313,\n      9,\n      16390,\n      1,\n      16391,\n      1,\n      16406,\n      1,\n      16407,\n      1,\n      16422,\n      1,\n      16423,\n      1,\n      16438,\n      1,\n      16439,\n      1,\n      16642,\n      8,\n      16646,\n      8,\n      16658,\n      8,\n      16662,\n      8,\n      18437,\n      6,\n      18439,\n      6,\n      18469,\n      6,\n      18471,\n      6,\n      18688,\n      9,\n      18689,\n      9,\n      18690,\n      8,\n      18693,\n      6,\n      18694,\n      8,\n      18695,\n      6,\n      18696,\n      9,\n      18697,\n      9,\n      18706,\n      8,\n      18710,\n      8,\n      18725,\n      6,\n      18727,\n      6,\n      131128,\n      0,\n      131129,\n      0,\n      131130,\n      0,\n      131131,\n      0,\n      131132,\n      0,\n      131133,\n      0,\n      131134,\n      0,\n      131135,\n      0,\n      131352,\n      7,\n      131354,\n      7,\n      131384,\n      7,\n      131386,\n      7,\n      133161,\n      5,\n      133165,\n      5,\n      133177,\n      5,\n      133181,\n      5,\n      133376,\n      9,\n      133377,\n      9,\n      133384,\n      9,\n      133385,\n      9,\n      133400,\n      7,\n      133402,\n      7,\n      133417,\n      5,\n      133421,\n      5,\n      133432,\n      7,\n      133433,\n      5,\n      133434,\n      7,\n      133437,\n      5,\n      147510,\n      4,\n      147511,\n      4,\n      147518,\n      4,\n      147519,\n      4,\n      147714,\n      8,\n      147718,\n      8,\n      147730,\n      8,\n      147734,\n      8,\n      147736,\n      7,\n      147738,\n      7,\n      147766,\n      4,\n      147767,\n      4,\n      147768,\n      7,\n      147770,\n      7,\n      147774,\n      4,\n      147775,\n      4,\n      149509,\n      6,\n      149511,\n      6,\n      149541,\n      6,\n      149543,\n      6,\n      149545,\n      5,\n      149549,\n      5,\n      149558,\n      4,\n      149559,\n      4,\n      149561,\n      5,\n      149565,\n      5,\n      149566,\n      4,\n      149567,\n      4,\n      149760,\n      9,\n      149761,\n      9,\n      149762,\n      8,\n      149765,\n      6,\n      149766,\n      8,\n      149767,\n      6,\n      149768,\n      9,\n      149769,\n      9,\n      149778,\n      8,\n      149782,\n      8,\n      149784,\n      7,\n      149786,\n      7,\n      149797,\n      6,\n      149799,\n      6,\n      149801,\n      5,\n      149805,\n      5,\n      149814,\n      4,\n      149815,\n      4,\n      149816,\n      7,\n      149817,\n      5,\n      149818,\n      7,\n      149821,\n      5,\n      149822,\n      4,\n      149823,\n      4,\n      149824,\n      37,\n      149825,\n      37,\n      149826,\n      36,\n      149829,\n      34,\n      149830,\n      36,\n      149831,\n      34,\n      149832,\n      37,\n      149833,\n      37,\n      149842,\n      36,\n      149846,\n      36,\n      149848,\n      35,\n      149850,\n      35,\n      149861,\n      34,\n      149863,\n      34,\n      149865,\n      33,\n      149869,\n      33,\n      149878,\n      32,\n      149879,\n      32,\n      149880,\n      35,\n      149881,\n      33,\n      149882,\n      35,\n      149885,\n      33,\n      149886,\n      32,\n      149887,\n      32,\n      150080,\n      49,\n      150082,\n      48,\n      150088,\n      49,\n      150098,\n      48,\n      150104,\n      47,\n      150106,\n      47,\n      151873,\n      46,\n      151877,\n      45,\n      151881,\n      46,\n      151909,\n      45,\n      151913,\n      44,\n      151917,\n      44,\n      152128,\n      49,\n      152129,\n      46,\n      152136,\n      49,\n      152137,\n      46,\n      166214,\n      43,\n      166215,\n      42,\n      166230,\n      43,\n      166247,\n      42,\n      166262,\n      41,\n      166263,\n      41,\n      166466,\n      48,\n      166470,\n      43,\n      166482,\n      48,\n      166486,\n      43,\n      168261,\n      45,\n      168263,\n      42,\n      168293,\n      45,\n      168295,\n      42,\n      168512,\n      31,\n      168513,\n      28,\n      168514,\n      31,\n      168517,\n      28,\n      168518,\n      25,\n      168519,\n      25,\n      280952,\n      40,\n      280953,\n      39,\n      280954,\n      40,\n      280957,\n      39,\n      280958,\n      38,\n      280959,\n      38,\n      281176,\n      47,\n      281178,\n      47,\n      281208,\n      40,\n      281210,\n      40,\n      282985,\n      44,\n      282989,\n      44,\n      283001,\n      39,\n      283005,\n      39,\n      283208,\n      30,\n      283209,\n      27,\n      283224,\n      30,\n      283241,\n      27,\n      283256,\n      22,\n      283257,\n      22,\n      297334,\n      41,\n      297335,\n      41,\n      297342,\n      38,\n      297343,\n      38,\n      297554,\n      29,\n      297558,\n      24,\n      297562,\n      29,\n      297590,\n      24,\n      297594,\n      21,\n      297598,\n      21,\n      299365,\n      26,\n      299367,\n      23,\n      299373,\n      26,\n      299383,\n      23,\n      299389,\n      20,\n      299391,\n      20,\n      299584,\n      31,\n      299585,\n      28,\n      299586,\n      31,\n      299589,\n      28,\n      299590,\n      25,\n      299591,\n      25,\n      299592,\n      30,\n      299593,\n      27,\n      299602,\n      29,\n      299606,\n      24,\n      299608,\n      30,\n      299610,\n      29,\n      299621,\n      26,\n      299623,\n      23,\n      299625,\n      27,\n      299629,\n      26,\n      299638,\n      24,\n      299639,\n      23,\n      299640,\n      22,\n      299641,\n      22,\n      299642,\n      21,\n      299645,\n      20,\n      299646,\n      21,\n      299647,\n      20,\n      299648,\n      61,\n      299649,\n      60,\n      299650,\n      61,\n      299653,\n      60,\n      299654,\n      59,\n      299655,\n      59,\n      299656,\n      58,\n      299657,\n      57,\n      299666,\n      55,\n      299670,\n      54,\n      299672,\n      58,\n      299674,\n      55,\n      299685,\n      52,\n      299687,\n      51,\n      299689,\n      57,\n      299693,\n      52,\n      299702,\n      54,\n      299703,\n      51,\n      299704,\n      56,\n      299705,\n      56,\n      299706,\n      53,\n      299709,\n      50,\n      299710,\n      53,\n      299711,\n      50,\n      299904,\n      61,\n      299906,\n      61,\n      299912,\n      58,\n      299922,\n      55,\n      299928,\n      58,\n      299930,\n      55,\n      301697,\n      60,\n      301701,\n      60,\n      301705,\n      57,\n      301733,\n      52,\n      301737,\n      57,\n      301741,\n      52,\n      301952,\n      79,\n      301953,\n      79,\n      301960,\n      76,\n      301961,\n      76,\n      316038,\n      59,\n      316039,\n      59,\n      316054,\n      54,\n      316071,\n      51,\n      316086,\n      54,\n      316087,\n      51,\n      316290,\n      78,\n      316294,\n      78,\n      316306,\n      73,\n      316310,\n      73,\n      318085,\n      77,\n      318087,\n      77,\n      318117,\n      70,\n      318119,\n      70,\n      318336,\n      79,\n      318337,\n      79,\n      318338,\n      78,\n      318341,\n      77,\n      318342,\n      78,\n      318343,\n      77,\n      430776,\n      56,\n      430777,\n      56,\n      430778,\n      53,\n      430781,\n      50,\n      430782,\n      53,\n      430783,\n      50,\n      431000,\n      75,\n      431002,\n      72,\n      431032,\n      75,\n      431034,\n      72,\n      432809,\n      74,\n      432813,\n      69,\n      432825,\n      74,\n      432829,\n      69,\n      433032,\n      76,\n      433033,\n      76,\n      433048,\n      75,\n      433065,\n      74,\n      433080,\n      75,\n      433081,\n      74,\n      447158,\n      71,\n      447159,\n      68,\n      447166,\n      71,\n      447167,\n      68,\n      447378,\n      73,\n      447382,\n      73,\n      447386,\n      72,\n      447414,\n      71,\n      447418,\n      72,\n      447422,\n      71,\n      449189,\n      70,\n      449191,\n      70,\n      449197,\n      69,\n      449207,\n      68,\n      449213,\n      69,\n      449215,\n      68,\n      449408,\n      67,\n      449409,\n      67,\n      449410,\n      66,\n      449413,\n      64,\n      449414,\n      66,\n      449415,\n      64,\n      449416,\n      67,\n      449417,\n      67,\n      449426,\n      66,\n      449430,\n      66,\n      449432,\n      65,\n      449434,\n      65,\n      449445,\n      64,\n      449447,\n      64,\n      449449,\n      63,\n      449453,\n      63,\n      449462,\n      62,\n      449463,\n      62,\n      449464,\n      65,\n      449465,\n      63,\n      449466,\n      65,\n      449469,\n      63,\n      449470,\n      62,\n      449471,\n      62,\n      449472,\n      19,\n      449473,\n      19,\n      449474,\n      18,\n      449477,\n      16,\n      449478,\n      18,\n      449479,\n      16,\n      449480,\n      19,\n      449481,\n      19,\n      449490,\n      18,\n      449494,\n      18,\n      449496,\n      17,\n      449498,\n      17,\n      449509,\n      16,\n      449511,\n      16,\n      449513,\n      15,\n      449517,\n      15,\n      449526,\n      14,\n      449527,\n      14,\n      449528,\n      17,\n      449529,\n      15,\n      449530,\n      17,\n      449533,\n      15,\n      449534,\n      14,\n      449535,\n      14,\n      449728,\n      19,\n      449729,\n      19,\n      449730,\n      18,\n      449734,\n      18,\n      449736,\n      19,\n      449737,\n      19,\n      449746,\n      18,\n      449750,\n      18,\n      449752,\n      17,\n      449754,\n      17,\n      449784,\n      17,\n      449786,\n      17,\n      451520,\n      19,\n      451521,\n      19,\n      451525,\n      16,\n      451527,\n      16,\n      451528,\n      19,\n      451529,\n      19,\n      451557,\n      16,\n      451559,\n      16,\n      451561,\n      15,\n      451565,\n      15,\n      451577,\n      15,\n      451581,\n      15,\n      451776,\n      19,\n      451777,\n      19,\n      451784,\n      19,\n      451785,\n      19,\n      465858,\n      18,\n      465861,\n      16,\n      465862,\n      18,\n      465863,\n      16,\n      465874,\n      18,\n      465878,\n      18,\n      465893,\n      16,\n      465895,\n      16,\n      465910,\n      14,\n      465911,\n      14,\n      465918,\n      14,\n      465919,\n      14,\n      466114,\n      18,\n      466118,\n      18,\n      466130,\n      18,\n      466134,\n      18,\n      467909,\n      16,\n      467911,\n      16,\n      467941,\n      16,\n      467943,\n      16,\n      468160,\n      13,\n      468161,\n      13,\n      468162,\n      13,\n      468163,\n      13,\n      468164,\n      13,\n      468165,\n      13,\n      468166,\n      13,\n      468167,\n      13,\n      580568,\n      17,\n      580570,\n      17,\n      580585,\n      15,\n      580589,\n      15,\n      580598,\n      14,\n      580599,\n      14,\n      580600,\n      17,\n      580601,\n      15,\n      580602,\n      17,\n      580605,\n      15,\n      580606,\n      14,\n      580607,\n      14,\n      580824,\n      17,\n      580826,\n      17,\n      580856,\n      17,\n      580858,\n      17,\n      582633,\n      15,\n      582637,\n      15,\n      582649,\n      15,\n      582653,\n      15,\n      582856,\n      12,\n      582857,\n      12,\n      582872,\n      12,\n      582873,\n      12,\n      582888,\n      12,\n      582889,\n      12,\n      582904,\n      12,\n      582905,\n      12,\n      596982,\n      14,\n      596983,\n      14,\n      596990,\n      14,\n      596991,\n      14,\n      597202,\n      11,\n      597206,\n      11,\n      597210,\n      11,\n      597214,\n      11,\n      597234,\n      11,\n      597238,\n      11,\n      597242,\n      11,\n      597246,\n      11,\n      599013,\n      10,\n      599015,\n      10,\n      599021,\n      10,\n      599023,\n      10,\n      599029,\n      10,\n      599031,\n      10,\n      599037,\n      10,\n      599039,\n      10,\n      599232,\n      13,\n      599233,\n      13,\n      599234,\n      13,\n      599235,\n      13,\n      599236,\n      13,\n      599237,\n      13,\n      599238,\n      13,\n      599239,\n      13,\n      599240,\n      12,\n      599241,\n      12,\n      599250,\n      11,\n      599254,\n      11,\n      599256,\n      12,\n      599257,\n      12,\n      599258,\n      11,\n      599262,\n      11,\n      599269,\n      10,\n      599271,\n      10,\n      599272,\n      12,\n      599273,\n      12,\n      599277,\n      10,\n      599279,\n      10,\n      599282,\n      11,\n      599285,\n      10,\n      599286,\n      11,\n      599287,\n      10,\n      599288,\n      12,\n      599289,\n      12,\n      599290,\n      11,\n      599293,\n      10,\n      599294,\n      11,\n      599295,\n      10\n    ],\n    p2D: [\n      0,\n      0,\n      1,\n      -1,\n      0,\n      0,\n      -1,\n      1,\n      0,\n      2,\n      1,\n      1,\n      1,\n      2,\n      2,\n      0,\n      1,\n      2,\n      0,\n      2,\n      1,\n      0,\n      0,\n      0\n    ],\n    p3D: [\n      0,\n      0,\n      1,\n      -1,\n      0,\n      0,\n      1,\n      0,\n      -1,\n      0,\n      0,\n      -1,\n      1,\n      0,\n      0,\n      0,\n      1,\n      -1,\n      0,\n      0,\n      -1,\n      0,\n      1,\n      0,\n      0,\n      -1,\n      1,\n      0,\n      2,\n      1,\n      1,\n      0,\n      1,\n      1,\n      1,\n      -1,\n      0,\n      2,\n      1,\n      0,\n      1,\n      1,\n      1,\n      -1,\n      1,\n      0,\n      2,\n      0,\n      1,\n      1,\n      1,\n      -1,\n      1,\n      1,\n      1,\n      3,\n      2,\n      1,\n      0,\n      3,\n      1,\n      2,\n      0,\n      1,\n      3,\n      2,\n      0,\n      1,\n      3,\n      1,\n      0,\n      2,\n      1,\n      3,\n      0,\n      2,\n      1,\n      3,\n      0,\n      1,\n      2,\n      1,\n      1,\n      1,\n      0,\n      0,\n      2,\n      2,\n      0,\n      0,\n      1,\n      1,\n      0,\n      1,\n      0,\n      2,\n      0,\n      2,\n      0,\n      1,\n      1,\n      0,\n      0,\n      1,\n      2,\n      0,\n      0,\n      2,\n      2,\n      0,\n      0,\n      0,\n      0,\n      1,\n      1,\n      -1,\n      1,\n      2,\n      0,\n      0,\n      0,\n      0,\n      1,\n      -1,\n      1,\n      1,\n      2,\n      0,\n      0,\n      0,\n      0,\n      1,\n      1,\n      1,\n      -1,\n      2,\n      3,\n      1,\n      1,\n      1,\n      2,\n      0,\n      0,\n      2,\n      2,\n      3,\n      1,\n      1,\n      1,\n      2,\n      2,\n      0,\n      0,\n      2,\n      3,\n      1,\n      1,\n      1,\n      2,\n      0,\n      2,\n      0,\n      2,\n      1,\n      1,\n      -1,\n      1,\n      2,\n      0,\n      0,\n      2,\n      2,\n      1,\n      1,\n      -1,\n      1,\n      2,\n      2,\n      0,\n      0,\n      2,\n      1,\n      -1,\n      1,\n      1,\n      2,\n      0,\n      0,\n      2,\n      2,\n      1,\n      -1,\n      1,\n      1,\n      2,\n      0,\n      2,\n      0,\n      2,\n      1,\n      1,\n      1,\n      -1,\n      2,\n      2,\n      0,\n      0,\n      2,\n      1,\n      1,\n      1,\n      -1,\n      2,\n      0,\n      2,\n      0\n    ],\n    p4D: [\n      0,\n      0,\n      1,\n      -1,\n      0,\n      0,\n      0,\n      1,\n      0,\n      -1,\n      0,\n      0,\n      1,\n      0,\n      0,\n      -1,\n      0,\n      0,\n      -1,\n      1,\n      0,\n      0,\n      0,\n      0,\n      1,\n      -1,\n      0,\n      0,\n      0,\n      1,\n      0,\n      -1,\n      0,\n      0,\n      -1,\n      0,\n      1,\n      0,\n      0,\n      0,\n      -1,\n      1,\n      0,\n      0,\n      0,\n      0,\n      1,\n      -1,\n      0,\n      0,\n      -1,\n      0,\n      0,\n      1,\n      0,\n      0,\n      -1,\n      0,\n      1,\n      0,\n      0,\n      0,\n      -1,\n      1,\n      0,\n      2,\n      1,\n      1,\n      0,\n      0,\n      1,\n      1,\n      1,\n      -1,\n      0,\n      1,\n      1,\n      1,\n      0,\n      -1,\n      0,\n      2,\n      1,\n      0,\n      1,\n      0,\n      1,\n      1,\n      -1,\n      1,\n      0,\n      1,\n      1,\n      0,\n      1,\n      -1,\n      0,\n      2,\n      0,\n      1,\n      1,\n      0,\n      1,\n      -1,\n      1,\n      1,\n      0,\n      1,\n      0,\n      1,\n      1,\n      -1,\n      0,\n      2,\n      1,\n      0,\n      0,\n      1,\n      1,\n      1,\n      -1,\n      0,\n      1,\n      1,\n      1,\n      0,\n      -1,\n      1,\n      0,\n      2,\n      0,\n      1,\n      0,\n      1,\n      1,\n      -1,\n      1,\n      0,\n      1,\n      1,\n      0,\n      1,\n      -1,\n      1,\n      0,\n      2,\n      0,\n      0,\n      1,\n      1,\n      1,\n      -1,\n      0,\n      1,\n      1,\n      1,\n      0,\n      -1,\n      1,\n      1,\n      1,\n      4,\n      2,\n      1,\n      1,\n      0,\n      4,\n      1,\n      2,\n      1,\n      0,\n      4,\n      1,\n      1,\n      2,\n      0,\n      1,\n      4,\n      2,\n      1,\n      0,\n      1,\n      4,\n      1,\n      2,\n      0,\n      1,\n      4,\n      1,\n      1,\n      0,\n      2,\n      1,\n      4,\n      2,\n      0,\n      1,\n      1,\n      4,\n      1,\n      0,\n      2,\n      1,\n      4,\n      1,\n      0,\n      1,\n      2,\n      1,\n      4,\n      0,\n      2,\n      1,\n      1,\n      4,\n      0,\n      1,\n      2,\n      1,\n      4,\n      0,\n      1,\n      1,\n      2,\n      1,\n      2,\n      1,\n      1,\n      0,\n      0,\n      3,\n      2,\n      1,\n      0,\n      0,\n      3,\n      1,\n      2,\n      0,\n      0,\n      1,\n      2,\n      1,\n      0,\n      1,\n      0,\n      3,\n      2,\n      0,\n      1,\n      0,\n      3,\n      1,\n      0,\n      2,\n      0,\n      1,\n      2,\n      0,\n      1,\n      1,\n      0,\n      3,\n      0,\n      2,\n      1,\n      0,\n      3,\n      0,\n      1,\n      2,\n      0,\n      1,\n      2,\n      1,\n      0,\n      0,\n      1,\n      3,\n      2,\n      0,\n      0,\n      1,\n      3,\n      1,\n      0,\n      0,\n      2,\n      1,\n      2,\n      0,\n      1,\n      0,\n      1,\n      3,\n      0,\n      2,\n      0,\n      1,\n      3,\n      0,\n      1,\n      0,\n      2,\n      1,\n      2,\n      0,\n      0,\n      1,\n      1,\n      3,\n      0,\n      0,\n      2,\n      1,\n      3,\n      0,\n      0,\n      1,\n      2,\n      2,\n      3,\n      1,\n      1,\n      1,\n      0,\n      2,\n      1,\n      1,\n      1,\n      -1,\n      2,\n      2,\n      0,\n      0,\n      0,\n      2,\n      3,\n      1,\n      1,\n      0,\n      1,\n      2,\n      1,\n      1,\n      -1,\n      1,\n      2,\n      2,\n      0,\n      0,\n      0,\n      2,\n      3,\n      1,\n      0,\n      1,\n      1,\n      2,\n      1,\n      -1,\n      1,\n      1,\n      2,\n      2,\n      0,\n      0,\n      0,\n      2,\n      3,\n      1,\n      1,\n      1,\n      0,\n      2,\n      1,\n      1,\n      1,\n      -1,\n      2,\n      0,\n      2,\n      0,\n      0,\n      2,\n      3,\n      1,\n      1,\n      0,\n      1,\n      2,\n      1,\n      1,\n      -1,\n      1,\n      2,\n      0,\n      2,\n      0,\n      0,\n      2,\n      3,\n      0,\n      1,\n      1,\n      1,\n      2,\n      -1,\n      1,\n      1,\n      1,\n      2,\n      0,\n      2,\n      0,\n      0,\n      2,\n      3,\n      1,\n      1,\n      1,\n      0,\n      2,\n      1,\n      1,\n      1,\n      -1,\n      2,\n      0,\n      0,\n      2,\n      0,\n      2,\n      3,\n      1,\n      0,\n      1,\n      1,\n      2,\n      1,\n      -1,\n      1,\n      1,\n      2,\n      0,\n      0,\n      2,\n      0,\n      2,\n      3,\n      0,\n      1,\n      1,\n      1,\n      2,\n      -1,\n      1,\n      1,\n      1,\n      2,\n      0,\n      0,\n      2,\n      0,\n      2,\n      3,\n      1,\n      1,\n      0,\n      1,\n      2,\n      1,\n      1,\n      -1,\n      1,\n      2,\n      0,\n      0,\n      0,\n      2,\n      2,\n      3,\n      1,\n      0,\n      1,\n      1,\n      2,\n      1,\n      -1,\n      1,\n      1,\n      2,\n      0,\n      0,\n      0,\n      2,\n      2,\n      3,\n      0,\n      1,\n      1,\n      1,\n      2,\n      -1,\n      1,\n      1,\n      1,\n      2,\n      0,\n      0,\n      0,\n      2,\n      2,\n      1,\n      1,\n      1,\n      -1,\n      0,\n      1,\n      1,\n      1,\n      0,\n      -1,\n      0,\n      0,\n      0,\n      0,\n      0,\n      2,\n      1,\n      1,\n      -1,\n      1,\n      0,\n      1,\n      1,\n      0,\n      1,\n      -1,\n      0,\n      0,\n      0,\n      0,\n      0,\n      2,\n      1,\n      -1,\n      1,\n      1,\n      0,\n      1,\n      0,\n      1,\n      1,\n      -1,\n      0,\n      0,\n      0,\n      0,\n      0,\n      2,\n      1,\n      1,\n      -1,\n      0,\n      1,\n      1,\n      1,\n      0,\n      -1,\n      1,\n      0,\n      0,\n      0,\n      0,\n      0,\n      2,\n      1,\n      -1,\n      1,\n      0,\n      1,\n      1,\n      0,\n      1,\n      -1,\n      1,\n      0,\n      0,\n      0,\n      0,\n      0,\n      2,\n      1,\n      -1,\n      0,\n      1,\n      1,\n      1,\n      0,\n      -1,\n      1,\n      1,\n      0,\n      0,\n      0,\n      0,\n      0,\n      2,\n      1,\n      1,\n      1,\n      -1,\n      0,\n      1,\n      1,\n      1,\n      0,\n      -1,\n      2,\n      2,\n      0,\n      0,\n      0,\n      2,\n      1,\n      1,\n      -1,\n      1,\n      0,\n      1,\n      1,\n      0,\n      1,\n      -1,\n      2,\n      2,\n      0,\n      0,\n      0,\n      2,\n      1,\n      1,\n      -1,\n      0,\n      1,\n      1,\n      1,\n      0,\n      -1,\n      1,\n      2,\n      2,\n      0,\n      0,\n      0,\n      2,\n      1,\n      1,\n      1,\n      -1,\n      0,\n      1,\n      1,\n      1,\n      0,\n      -1,\n      2,\n      0,\n      2,\n      0,\n      0,\n      2,\n      1,\n      -1,\n      1,\n      1,\n      0,\n      1,\n      0,\n      1,\n      1,\n      -1,\n      2,\n      0,\n      2,\n      0,\n      0,\n      2,\n      1,\n      -1,\n      1,\n      0,\n      1,\n      1,\n      0,\n      1,\n      -1,\n      1,\n      2,\n      0,\n      2,\n      0,\n      0,\n      2,\n      1,\n      1,\n      -1,\n      1,\n      0,\n      1,\n      1,\n      0,\n      1,\n      -1,\n      2,\n      0,\n      0,\n      2,\n      0,\n      2,\n      1,\n      -1,\n      1,\n      1,\n      0,\n      1,\n      0,\n      1,\n      1,\n      -1,\n      2,\n      0,\n      0,\n      2,\n      0,\n      2,\n      1,\n      -1,\n      0,\n      1,\n      1,\n      1,\n      0,\n      -1,\n      1,\n      1,\n      2,\n      0,\n      0,\n      2,\n      0,\n      2,\n      1,\n      1,\n      -1,\n      0,\n      1,\n      1,\n      1,\n      0,\n      -1,\n      1,\n      2,\n      0,\n      0,\n      0,\n      2,\n      2,\n      1,\n      -1,\n      1,\n      0,\n      1,\n      1,\n      0,\n      1,\n      -1,\n      1,\n      2,\n      0,\n      0,\n      0,\n      2,\n      2,\n      1,\n      -1,\n      0,\n      1,\n      1,\n      1,\n      0,\n      -1,\n      1,\n      1,\n      2,\n      0,\n      0,\n      0,\n      2,\n      3,\n      1,\n      1,\n      0,\n      0,\n      0,\n      2,\n      2,\n      0,\n      0,\n      0,\n      2,\n      1,\n      1,\n      1,\n      -1,\n      3,\n      1,\n      0,\n      1,\n      0,\n      0,\n      2,\n      0,\n      2,\n      0,\n      0,\n      2,\n      1,\n      1,\n      1,\n      -1,\n      3,\n      1,\n      0,\n      0,\n      1,\n      0,\n      2,\n      0,\n      0,\n      2,\n      0,\n      2,\n      1,\n      1,\n      1,\n      -1,\n      3,\n      1,\n      1,\n      0,\n      0,\n      0,\n      2,\n      2,\n      0,\n      0,\n      0,\n      2,\n      1,\n      1,\n      -1,\n      1,\n      3,\n      1,\n      0,\n      1,\n      0,\n      0,\n      2,\n      0,\n      2,\n      0,\n      0,\n      2,\n      1,\n      1,\n      -1,\n      1,\n      3,\n      1,\n      0,\n      0,\n      0,\n      1,\n      2,\n      0,\n      0,\n      0,\n      2,\n      2,\n      1,\n      1,\n      -1,\n      1,\n      3,\n      1,\n      1,\n      0,\n      0,\n      0,\n      2,\n      2,\n      0,\n      0,\n      0,\n      2,\n      1,\n      -1,\n      1,\n      1,\n      3,\n      1,\n      0,\n      0,\n      1,\n      0,\n      2,\n      0,\n      0,\n      2,\n      0,\n      2,\n      1,\n      -1,\n      1,\n      1,\n      3,\n      1,\n      0,\n      0,\n      0,\n      1,\n      2,\n      0,\n      0,\n      0,\n      2,\n      2,\n      1,\n      -1,\n      1,\n      1,\n      3,\n      1,\n      0,\n      1,\n      0,\n      0,\n      2,\n      0,\n      2,\n      0,\n      0,\n      2,\n      -1,\n      1,\n      1,\n      1,\n      3,\n      1,\n      0,\n      0,\n      1,\n      0,\n      2,\n      0,\n      0,\n      2,\n      0,\n      2,\n      -1,\n      1,\n      1,\n      1,\n      3,\n      1,\n      0,\n      0,\n      0,\n      1,\n      2,\n      0,\n      0,\n      0,\n      2,\n      2,\n      -1,\n      1,\n      1,\n      1,\n      3,\n      3,\n      2,\n      1,\n      0,\n      0,\n      3,\n      1,\n      2,\n      0,\n      0,\n      4,\n      1,\n      1,\n      1,\n      1,\n      3,\n      3,\n      2,\n      0,\n      1,\n      0,\n      3,\n      1,\n      0,\n      2,\n      0,\n      4,\n      1,\n      1,\n      1,\n      1,\n      3,\n      3,\n      0,\n      2,\n      1,\n      0,\n      3,\n      0,\n      1,\n      2,\n      0,\n      4,\n      1,\n      1,\n      1,\n      1,\n      3,\n      3,\n      2,\n      0,\n      0,\n      1,\n      3,\n      1,\n      0,\n      0,\n      2,\n      4,\n      1,\n      1,\n      1,\n      1,\n      3,\n      3,\n      0,\n      2,\n      0,\n      1,\n      3,\n      0,\n      1,\n      0,\n      2,\n      4,\n      1,\n      1,\n      1,\n      1,\n      3,\n      3,\n      0,\n      0,\n      2,\n      1,\n      3,\n      0,\n      0,\n      1,\n      2,\n      4,\n      1,\n      1,\n      1,\n      1,\n      3,\n      3,\n      2,\n      1,\n      0,\n      0,\n      3,\n      1,\n      2,\n      0,\n      0,\n      2,\n      1,\n      1,\n      1,\n      -1,\n      3,\n      3,\n      2,\n      0,\n      1,\n      0,\n      3,\n      1,\n      0,\n      2,\n      0,\n      2,\n      1,\n      1,\n      1,\n      -1,\n      3,\n      3,\n      0,\n      2,\n      1,\n      0,\n      3,\n      0,\n      1,\n      2,\n      0,\n      2,\n      1,\n      1,\n      1,\n      -1,\n      3,\n      3,\n      2,\n      1,\n      0,\n      0,\n      3,\n      1,\n      2,\n      0,\n      0,\n      2,\n      1,\n      1,\n      -1,\n      1,\n      3,\n      3,\n      2,\n      0,\n      0,\n      1,\n      3,\n      1,\n      0,\n      0,\n      2,\n      2,\n      1,\n      1,\n      -1,\n      1,\n      3,\n      3,\n      0,\n      2,\n      0,\n      1,\n      3,\n      0,\n      1,\n      0,\n      2,\n      2,\n      1,\n      1,\n      -1,\n      1,\n      3,\n      3,\n      2,\n      0,\n      1,\n      0,\n      3,\n      1,\n      0,\n      2,\n      0,\n      2,\n      1,\n      -1,\n      1,\n      1,\n      3,\n      3,\n      2,\n      0,\n      0,\n      1,\n      3,\n      1,\n      0,\n      0,\n      2,\n      2,\n      1,\n      -1,\n      1,\n      1,\n      3,\n      3,\n      0,\n      0,\n      2,\n      1,\n      3,\n      0,\n      0,\n      1,\n      2,\n      2,\n      1,\n      -1,\n      1,\n      1,\n      3,\n      3,\n      0,\n      2,\n      1,\n      0,\n      3,\n      0,\n      1,\n      2,\n      0,\n      2,\n      -1,\n      1,\n      1,\n      1,\n      3,\n      3,\n      0,\n      2,\n      0,\n      1,\n      3,\n      0,\n      1,\n      0,\n      2,\n      2,\n      -1,\n      1,\n      1,\n      1,\n      3,\n      3,\n      0,\n      0,\n      2,\n      1,\n      3,\n      0,\n      0,\n      1,\n      2,\n      2,\n      -1,\n      1,\n      1,\n      1\n    ]\n  };\n\n  var Contribution2 = /** @class */ (function() {\n    function Contribution2(multiplier, xsb, ysb) {\n      this.dx = -xsb - multiplier * constants_1.SQUISH_2D;\n      this.dy = -ysb - multiplier * constants_1.SQUISH_2D;\n      this.xsb = xsb;\n      this.ysb = ysb;\n    }\n    return Contribution2;\n  })();\n  var Contribution3 = /** @class */ (function() {\n    function Contribution3(multiplier, xsb, ysb, zsb) {\n      this.dx = -xsb - multiplier * constants_1.SQUISH_3D;\n      this.dy = -ysb - multiplier * constants_1.SQUISH_3D;\n      this.dz = -zsb - multiplier * constants_1.SQUISH_3D;\n      this.xsb = xsb;\n      this.ysb = ysb;\n      this.zsb = zsb;\n    }\n    return Contribution3;\n  })();\n  var Contribution4 = /** @class */ (function() {\n    function Contribution4(multiplier, xsb, ysb, zsb, wsb) {\n      this.dx = -xsb - multiplier * constants_1.SQUISH_4D;\n      this.dy = -ysb - multiplier * constants_1.SQUISH_4D;\n      this.dz = -zsb - multiplier * constants_1.SQUISH_4D;\n      this.dw = -wsb - multiplier * constants_1.SQUISH_4D;\n      this.xsb = xsb;\n      this.ysb = ysb;\n      this.zsb = zsb;\n      this.wsb = wsb;\n    }\n    return Contribution4;\n  })();\n  function shuffleSeed(seed) {\n    var newSeed = new Uint32Array(1);\n    newSeed[0] = seed[0] * 1664525 + 1013904223;\n    return newSeed;\n  }\n  OpenSimplexNoise = /** @class */ (function() {\n    function OpenSimplexNoise(clientSeed) {\n      this.initialize();\n      this.perm = new Uint8Array(256);\n      this.perm2D = new Uint8Array(256);\n      this.perm3D = new Uint8Array(256);\n      this.perm4D = new Uint8Array(256);\n      var source = new Uint8Array(256);\n      for (var i = 0; i < 256; i++) source[i] = i;\n      var seed = new Uint32Array(1);\n      seed[0] = clientSeed;\n      seed = shuffleSeed(shuffleSeed(shuffleSeed(seed)));\n      for (var i = 255; i >= 0; i--) {\n        seed = shuffleSeed(seed);\n        var r = new Uint32Array(1);\n        r[0] = (seed[0] + 31) % (i + 1);\n        if (r[0] < 0) r[0] += i + 1;\n        this.perm[i] = source[r[0]];\n        this.perm2D[i] = this.perm[i] & 0x0e;\n        this.perm3D[i] = (this.perm[i] % 24) * 3;\n        this.perm4D[i] = this.perm[i] & 0xfc;\n        source[r[0]] = source[i];\n      }\n    }\n    OpenSimplexNoise.prototype.array2D = function(width, height) {\n      var output = new Array(width);\n      for (var x = 0; x < width; x++) {\n        output[x] = new Array(height);\n        for (var y = 0; y < height; y++) {\n          output[x][y] = this.noise2D(x, y);\n        }\n      }\n      return output;\n    };\n    OpenSimplexNoise.prototype.array3D = function(width, height, depth) {\n      var output = new Array(width);\n      for (var x = 0; x < width; x++) {\n        output[x] = new Array(height);\n        for (var y = 0; y < height; y++) {\n          output[x][y] = new Array(depth);\n          for (var z = 0; z < depth; z++) {\n            output[x][y][z] = this.noise3D(x, y, z);\n          }\n        }\n      }\n      return output;\n    };\n    OpenSimplexNoise.prototype.array4D = function(\n      width,\n      height,\n      depth,\n      wLength\n    ) {\n      var output = new Array(width);\n      for (var x = 0; x < width; x++) {\n        output[x] = new Array(height);\n        for (var y = 0; y < height; y++) {\n          output[x][y] = new Array(depth);\n          for (var z = 0; z < depth; z++) {\n            output[x][y][z] = new Array(wLength);\n            for (var w = 0; w < wLength; w++) {\n              output[x][y][z][w] = this.noise4D(x, y, z, w);\n            }\n          }\n        }\n      }\n      return output;\n    };\n    OpenSimplexNoise.prototype.noise2D = function(x, y) {\n      var stretchOffset = (x + y) * constants_1.STRETCH_2D;\n      var xs = x + stretchOffset;\n      var ys = y + stretchOffset;\n      var xsb = Math.floor(xs);\n      var ysb = Math.floor(ys);\n      var squishOffset = (xsb + ysb) * constants_1.SQUISH_2D;\n      var dx0 = x - (xsb + squishOffset);\n      var dy0 = y - (ysb + squishOffset);\n      var xins = xs - xsb;\n      var yins = ys - ysb;\n      var inSum = xins + yins;\n      var hash =\n        (xins - yins + 1) |\n        (inSum << 1) |\n        ((inSum + yins) << 2) |\n        ((inSum + xins) << 4);\n      var value = 0;\n      for (var c = this.lookup2D[hash]; c !== undefined; c = c.next) {\n        var dx = dx0 + c.dx;\n        var dy = dy0 + c.dy;\n        var attn = 2 - dx * dx - dy * dy;\n        if (attn > 0) {\n          var px = xsb + c.xsb;\n          var py = ysb + c.ysb;\n          var indexPartA = this.perm[px & 0xff];\n          var index = this.perm2D[(indexPartA + py) & 0xff];\n          var valuePart =\n            constants_1.gradients2D[index] * dx +\n            constants_1.gradients2D[index + 1] * dy;\n          value += attn * attn * attn * attn * valuePart;\n        }\n      }\n      return value * constants_1.NORM_2D;\n    };\n    OpenSimplexNoise.prototype.noise3D = function(x, y, z) {\n      var stretchOffset = (x + y + z) * constants_1.STRETCH_3D;\n      var xs = x + stretchOffset;\n      var ys = y + stretchOffset;\n      var zs = z + stretchOffset;\n      var xsb = Math.floor(xs);\n      var ysb = Math.floor(ys);\n      var zsb = Math.floor(zs);\n      var squishOffset = (xsb + ysb + zsb) * constants_1.SQUISH_3D;\n      var dx0 = x - (xsb + squishOffset);\n      var dy0 = y - (ysb + squishOffset);\n      var dz0 = z - (zsb + squishOffset);\n      var xins = xs - xsb;\n      var yins = ys - ysb;\n      var zins = zs - zsb;\n      var inSum = xins + yins + zins;\n      var hash =\n        (yins - zins + 1) |\n        ((xins - yins + 1) << 1) |\n        ((xins - zins + 1) << 2) |\n        (inSum << 3) |\n        ((inSum + zins) << 5) |\n        ((inSum + yins) << 7) |\n        ((inSum + xins) << 9);\n      var value = 0;\n      for (var c = this.lookup3D[hash]; c !== undefined; c = c.next) {\n        var dx = dx0 + c.dx;\n        var dy = dy0 + c.dy;\n        var dz = dz0 + c.dz;\n        var attn = 2 - dx * dx - dy * dy - dz * dz;\n        if (attn > 0) {\n          var px = xsb + c.xsb;\n          var py = ysb + c.ysb;\n          var pz = zsb + c.zsb;\n          var indexPartA = this.perm[px & 0xff];\n          var indexPartB = this.perm[(indexPartA + py) & 0xff];\n          var index = this.perm3D[(indexPartB + pz) & 0xff];\n          var valuePart =\n            constants_1.gradients3D[index] * dx +\n            constants_1.gradients3D[index + 1] * dy +\n            constants_1.gradients3D[index + 2] * dz;\n          value += attn * attn * attn * attn * valuePart;\n        }\n      }\n      return value * constants_1.NORM_3D;\n    };\n    OpenSimplexNoise.prototype.noise4D = function(x, y, z, w) {\n      var stretchOffset = (x + y + z + w) * constants_1.STRETCH_4D;\n      var xs = x + stretchOffset;\n      var ys = y + stretchOffset;\n      var zs = z + stretchOffset;\n      var ws = w + stretchOffset;\n      var xsb = Math.floor(xs);\n      var ysb = Math.floor(ys);\n      var zsb = Math.floor(zs);\n      var wsb = Math.floor(ws);\n      var squishOffset = (xsb + ysb + zsb + wsb) * constants_1.SQUISH_4D;\n      var dx0 = x - (xsb + squishOffset);\n      var dy0 = y - (ysb + squishOffset);\n      var dz0 = z - (zsb + squishOffset);\n      var dw0 = w - (wsb + squishOffset);\n      var xins = xs - xsb;\n      var yins = ys - ysb;\n      var zins = zs - zsb;\n      var wins = ws - wsb;\n      var inSum = xins + yins + zins + wins;\n      var hash =\n        (zins - wins + 1) |\n        ((yins - zins + 1) << 1) |\n        ((yins - wins + 1) << 2) |\n        ((xins - yins + 1) << 3) |\n        ((xins - zins + 1) << 4) |\n        ((xins - wins + 1) << 5) |\n        (inSum << 6) |\n        ((inSum + wins) << 8) |\n        ((inSum + zins) << 11) |\n        ((inSum + yins) << 14) |\n        ((inSum + xins) << 17);\n      var value = 0;\n      for (var c = this.lookup4D[hash]; c !== undefined; c = c.next) {\n        var dx = dx0 + c.dx;\n        var dy = dy0 + c.dy;\n        var dz = dz0 + c.dz;\n        var dw = dw0 + c.dw;\n        var attn = 2 - dx * dx - dy * dy - dz * dz - dw * dw;\n        if (attn > 0) {\n          var px = xsb + c.xsb;\n          var py = ysb + c.ysb;\n          var pz = zsb + c.zsb;\n          var pw = wsb + c.wsb;\n          var indexPartA = this.perm[px & 0xff];\n          var indexPartB = this.perm[(indexPartA + py) & 0xff];\n          var indexPartC = this.perm[(indexPartB + pz) & 0xff];\n          var index = this.perm4D[(indexPartC + pw) & 0xff];\n          var valuePart =\n            constants_1.gradients4D[index] * dx +\n            constants_1.gradients4D[index + 1] * dy +\n            constants_1.gradients4D[index + 2] * dz +\n            constants_1.gradients4D[index + 3] * dw;\n          value += attn * attn * attn * attn * valuePart;\n        }\n      }\n      return value * constants_1.NORM_4D;\n    };\n    OpenSimplexNoise.prototype.initialize = function() {\n      var contributions2D = [];\n      for (var i = 0; i < constants_1.p2D.length; i += 4) {\n        var baseSet = constants_1.base2D[constants_1.p2D[i]];\n        var previous = null;\n        var current = null;\n        for (var k = 0; k < baseSet.length; k += 3) {\n          current = new Contribution2(\n            baseSet[k],\n            baseSet[k + 1],\n            baseSet[k + 2]\n          );\n          if (previous === null) contributions2D[i / 4] = current;\n          else previous.next = current;\n          previous = current;\n        }\n        current.next = new Contribution2(\n          constants_1.p2D[i + 1],\n          constants_1.p2D[i + 2],\n          constants_1.p2D[i + 3]\n        );\n      }\n      this.lookup2D = [];\n      for (var i = 0; i < constants_1.lookupPairs2D.length; i += 2) {\n        this.lookup2D[constants_1.lookupPairs2D[i]] =\n          contributions2D[constants_1.lookupPairs2D[i + 1]];\n      }\n      var contributions3D = [];\n      for (var i = 0; i < constants_1.p3D.length; i += 9) {\n        var baseSet = constants_1.base3D[constants_1.p3D[i]];\n        var previous = null;\n        var current = null;\n        for (var k = 0; k < baseSet.length; k += 4) {\n          current = new Contribution3(\n            baseSet[k],\n            baseSet[k + 1],\n            baseSet[k + 2],\n            baseSet[k + 3]\n          );\n          if (previous === null) contributions3D[i / 9] = current;\n          else previous.next = current;\n          previous = current;\n        }\n        current.next = new Contribution3(\n          constants_1.p3D[i + 1],\n          constants_1.p3D[i + 2],\n          constants_1.p3D[i + 3],\n          constants_1.p3D[i + 4]\n        );\n        current.next.next = new Contribution3(\n          constants_1.p3D[i + 5],\n          constants_1.p3D[i + 6],\n          constants_1.p3D[i + 7],\n          constants_1.p3D[i + 8]\n        );\n      }\n      this.lookup3D = [];\n      for (var i = 0; i < constants_1.lookupPairs3D.length; i += 2) {\n        this.lookup3D[constants_1.lookupPairs3D[i]] =\n          contributions3D[constants_1.lookupPairs3D[i + 1]];\n      }\n      var contributions4D = [];\n      for (var i = 0; i < constants_1.p4D.length; i += 16) {\n        var baseSet = constants_1.base4D[constants_1.p4D[i]];\n        var previous = null;\n        var current = null;\n        for (var k = 0; k < baseSet.length; k += 5) {\n          current = new Contribution4(\n            baseSet[k],\n            baseSet[k + 1],\n            baseSet[k + 2],\n            baseSet[k + 3],\n            baseSet[k + 4]\n          );\n          if (previous === null) contributions4D[i / 16] = current;\n          else previous.next = current;\n          previous = current;\n        }\n        current.next = new Contribution4(\n          constants_1.p4D[i + 1],\n          constants_1.p4D[i + 2],\n          constants_1.p4D[i + 3],\n          constants_1.p4D[i + 4],\n          constants_1.p4D[i + 5]\n        );\n        current.next.next = new Contribution4(\n          constants_1.p4D[i + 6],\n          constants_1.p4D[i + 7],\n          constants_1.p4D[i + 8],\n          constants_1.p4D[i + 9],\n          constants_1.p4D[i + 10]\n        );\n        current.next.next.next = new Contribution4(\n          constants_1.p4D[i + 11],\n          constants_1.p4D[i + 12],\n          constants_1.p4D[i + 13],\n          constants_1.p4D[i + 14],\n          constants_1.p4D[i + 15]\n        );\n      }\n      this.lookup4D = [];\n      for (var i = 0; i < constants_1.lookupPairs4D.length; i += 2) {\n        this.lookup4D[constants_1.lookupPairs4D[i]] =\n          contributions4D[constants_1.lookupPairs4D[i + 1]];\n      }\n    };\n    return OpenSimplexNoise;\n  })();\n})();",
        "children": [],
        "fileType": "file",
        "isSelectedFile": false,
        "_id": "67d5f30b7f5cb6072fce3049",
        "createdAt": "2025-03-15T21:37:15.764Z",
        "updatedAt": "2025-03-15T21:37:15.764Z",
        "id": "67d5f30b7f5cb6072fce3049"
      },
      {
        "name": "index.html",
        "content": "<!DOCTYPE html>\n<html>\n  <head>\n    <title>?=v6 OpenSimplex-Noise</title>\n    <meta charset=\"utf-8\" />\n    <meta http-equiv=\"Cache-Control\" content=\"no-cache, no-store, must-revalidate\" />\n    <meta http-equiv=\"Pragma\" content=\"no-cache\" />\n    <meta http-equiv=\"Expires\" content=\"0\" />\n\n    <!-- p5 1.11.1 slower frameRate() -- 10 -->\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.11.1/p5.js\"></script>\n    <!-- <script src=\"https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.11.1/addons/p5.sound.min.js\"></script> -->\n\n    <!-- p5 0.9.0 is much faster frameRate() -- 30.76 -->\n    <!-- <script src=\"https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.9.0/p5.min.js\"></script>\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.9.0/addons/p5.dom.min.js\"></script> -->\n\n    <script src=\"OpenSimplexNoise.js\"></script>\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"style.css\" />\n  </head>\n\n  <body>\n    <script src=\"sketch.js\"></script>\n  </body>\n</html>\n",
        "children": [],
        "fileType": "file",
        "isSelectedFile": false,
        "_id": "67d5f30b7f5cb6072fce304a",
        "createdAt": "2025-03-15T21:37:15.764Z",
        "updatedAt": "2025-03-15T21:37:15.764Z",
        "id": "67d5f30b7f5cb6072fce304a"
      },
      {
        "name": "sketch.js",
        "content": "// https://editor.p5js.org/jht9629-gmail/sketches/ScCMFzWqR\n// OpenSimplex Noise -- fullScreen\n\n// What would this look like applied to video?\n\n// Why extra bar on the right?\n\nconst increment = 0.03;\nconst incrementZ = increment * 0.1;\n// Just for non-looping demo\nlet zoff = 0;\nlet noise;\n\n// adapted to use createGraphics\nlet layer;\n\nlet my = {};\n\nfunction setup() {\n  createCanvas(windowWidth, windowHeight - 55);\n  // I made the canvas really small because it's slow for me otherwise\n  // createCanvas(200, 200);\n  pixelDensity(1);\n  initGraphics();\n  noise = new OpenSimplexNoise(Date.now());\n  setup_fullScreenBtn();\n}\n\nfunction draw() {\n  updateLayer();\n  let w = layer.width;\n  let h = layer.height;\n  image(layer, 0, 0, width, height, 0, 0, w, h);\n}\n\nfunction initGraphics() {\n  layer = createGraphics(100, 100);\n}\n\nfunction updateLayer() {\n  let xoff = 0;\n  let w = layer.width;\n  let h = layer.height;\n  for (let x = 0; x < w; x++) {\n    let yoff = 0;\n    for (let y = 0; y < h; y++) {\n      let n;\n      n = noise.noise3D(xoff, yoff, zoff);\n      // console.log('n',n)\n      // let bright = n > 0 ? 255 : 0;\n      let bright = map(n, -1, 1, 0, 255);\n      layer.stroke(bright);\n      layer.point(x, y);\n      yoff += increment;\n    }\n    xoff += increment;\n  }\n  zoff += incrementZ;\n}\n\nfunction windowResized() {\n  resizeCanvas(windowWidth, windowHeight);\n}\n\nfunction setup_fullScreenBtn() {\n  my.fullScreenBtn = createButton('?=v6 Full Screen');\n  my.fullScreenBtn.mousePressed(full_screen_action);\n  my.fullScreenBtn.style('font-size:42px');\n}\n\nfunction full_screen_action() {\n  my.fullScreenBtn.remove();\n  fullscreen(1);\n  let delay = 3000;\n  setTimeout(ui_present_window, delay);\n}\n\nfunction ui_present_window() {\n  resizeCanvas(windowWidth, windowHeight);\n}\n\n// map(value, start1, stop1, start2, stop2, [withinBounds])\n\n// 4D Open Simplex Noise Loop\n// Daniel Shiffman\n// https://thecodingtrain.com/CodingChallenges/137-4d-opensimplex-noise-loop\n// https://youtu.be/3_0Ax95jIrk\n\n// https://editor.p5js.org/codingtrain/sketches/MPqnctIGg\n// CC 137: 4D OpenSimplex Noise Loop\n\n// https://editor.p5js.org/codingtrain/sketches/4n5f1O6HR\n// OpenSimplex Noise -- gray\n\n// https://editor.p5js.org/jht9629-nyu/sketches/O91vtOED4\n// Worley Noise frameIndex bounce\n\n// https://editor.p5js.org/p5name/sketches/TU9CrJ1di\n// ims noise class\n\n// https://editor.p5js.org/jht9629-nyu/sketches/BSRsNJ1nj\n// OpenSimplex Noise -- createGraphics\n\n// https://editor.p5js.org/jht9629-nyu/sketches/VDYJuuQ4B\n// OpenSimplex Noise -- fullScreen\n",
        "children": [],
        "fileType": "file",
        "isSelectedFile": true,
        "_id": "67d5f30b7f5cb6072fce304b",
        "createdAt": "2025-03-15T21:37:15.764Z",
        "updatedAt": "2025-03-15T21:37:15.764Z",
        "id": "67d5f30b7f5cb6072fce304b"
      },
      {
        "name": "style.css",
        "content": "html, body {\n  margin: 0;\n  padding: 0;\n}\ncanvas {\n  display: block;\n}\n",
        "children": [],
        "fileType": "file",
        "isSelectedFile": false,
        "_id": "67d5f30b7f5cb6072fce304c",
        "createdAt": "2025-03-15T21:37:15.764Z",
        "updatedAt": "2025-03-15T21:37:15.764Z",
        "id": "67d5f30b7f5cb6072fce304c"
      }
    ],
    "createdAt": "2025-03-15T19:33:41.453Z",
    "updatedAt": "2025-03-15T21:37:15.764Z",
    "id": "ScCMFzWqR"
  },
  {
    "_id": "iXntJoZO1C",
    "name": "paint",
    "updatedAt": "2024-05-01T03:47:43.026Z",
    "files": [
      {
        "name": "root",
        "content": "",
        "children": [
          "6631b958faa2929586cd1728",
          "6631b958faa2929586cd1729",
          "6631b958faa2929586cd172a",
          "6631b958faa2929586cd172b",
          "6631b958faa2929586cd172c",
          "6631b958faa2929586cd172d"
        ],
        "fileType": "folder",
        "_id": "6631b958faa2929586cd1727",
        "createdAt": "2024-05-01T03:47:43.026Z",
        "updatedAt": "2024-05-01T03:47:43.026Z",
        "isSelectedFile": false,
        "id": "6631b958faa2929586cd1727"
      },
      {
        "name": "Pane.js",
        "content": "//\nclass Pane {\n  //\n  // { width, height, db_update, cross_limit, isRemote }\n  // { width, height, uid, layout }\n  //\n  constructor(props) {\n    //\n    let my = this;\n\n    Object.assign(my, props);\n\n    my.layer = createGraphics(my.width, my.height);\n\n    my.brush_color_index = 0;\n    my.cross_color_index = 0;\n    my.hitEdge = 0;\n    my.brush_size = 4;\n    my.cross_size = 4;\n    my.await_sync = my.db_update;\n    my.init_xy(0);\n\n    if (my.db_update) {\n      let { width, height } = my;\n      dbase_queue_update({ width, height });\n    }\n  }\n\n  deinit() {\n    let my = this;\n    if (my.layer) {\n      my.layer.remove();\n    }\n  }\n\n  prepare_layer(status) {\n    let my = this;\n    my.trackBrush();\n    my.render(status);\n  }\n\n  sync(device) {\n    let my = this;\n    my.await_sync = 0;\n    Object.assign(my, device);\n  }\n\n  init_xy(db_update) {\n    let my = this;\n    let x = my.width * 0.5;\n    let y = my.height * 0.5;\n    my.init_brush(x, y, db_update);\n    my.init_cross(x, y, db_update);\n  }\n\n  init_brush(x, y, db_update) {\n    let my = this;\n    my.brush_x0 = x;\n    my.brush_y0 = y;\n    if (db_update) {\n      let { brush_x0, brush_y0 } = my;\n      dbase_queue_update({ brush_x0, brush_y0 });\n    }\n  }\n\n  init_cross(x, y, db_update) {\n    let my = this;\n    my.cross_x0 = x;\n    my.cross_y0 = y;\n    my.xLeft = my.cross_x0;\n    my.yTop = my.cross_y0;\n    my.xRight = my.cross_x0;\n    my.yBottom = my.cross_y0;\n    if (db_update) {\n      let { cross_x0, cross_y0, xLeft, yTop, xRight, yBottom } = my;\n      dbase_queue_update({ cross_x0, cross_y0, xLeft, yTop, xRight, yBottom });\n    }\n  }\n\n  render(status) {\n    let my = this;\n    if (my.await_sync) return;\n    if (!status) status = {};\n    if (dbase_actions_issued(my.uid, { clear_action: 1 })) {\n      // console.log('Pane render_cross uid', my.uid, 'clear_action', my.clear_action);\n      status.cleared = 1;\n      if (my.isRemote) {\n        background(0);\n      }\n      my.layer.clear();\n    }\n    my.render_cross();\n  }\n\n  mouseDragged() {\n    let my = this;\n    let colr = Pane.colors[my.brush_color_index];\n    my.layer.strokeWeight(my.brush_size);\n    my.layer.stroke(colr);\n    my.layer.line(pmouseX, pmouseY, mouseX, mouseY);\n    if (my.db_update) {\n      my.brush_x0 = pmouseX;\n      my.brush_y0 = pmouseY;\n      my.brush_x1 = mouseX;\n      my.brush_y1 = mouseY;\n      let { brush_x0, brush_y0, brush_x1, brush_y1 } = my;\n      dbase_queue_update({ brush_x0, brush_y0, brush_x1, brush_y1 });\n    }\n  }\n\n  trackBrush() {\n    let my = this;\n    let colr = Pane.colors[my.brush_color_index];\n    my.layer.strokeWeight(my.brush_size);\n    my.layer.stroke(colr);\n    if (my.brush_px1 != undefined) {\n      if (my.brush_px1 > -1 && my.brush_x1 > -1) {\n        my.layer.line(my.brush_px1, my.brush_py1, my.brush_x1, my.brush_y1);\n      }\n    }\n    my.brush_px1 = my.brush_x1;\n    my.brush_py1 = my.brush_y1;\n  }\n\n  mousePressed() {\n    let my = this;\n    my.lastMouseX = mouseX;\n    my.lastMouseY = mouseY;\n  }\n\n  mouseReleased() {\n    let my = this;\n    if (mouseX == my.lastMouseX && mouseY == my.lastMouseY) {\n      my.init_cross(mouseX, mouseY, my.db_update);\n      my.next_crossColor();\n    } else {\n      my.next_brushColor();\n    }\n    if (my.db_update) {\n      let brush_x1 = -1;\n      dbase_queue_update({ brush_x1 });\n    }\n  }\n\n  next_crossColor() {\n    let my = this;\n    my.cross_color_index = (my.cross_color_index + 1) % Pane.colors.length;\n    if (my.db_update) {\n      let cross_color_index = my.cross_color_index;\n      dbase_queue_update({ cross_color_index });\n    }\n  }\n\n  next_brushColor() {\n    let my = this;\n    my.brush_color_index = (my.brush_color_index + 1) % Pane.colors.length;\n    if (my.db_update) {\n      let brush_color_index = my.brush_color_index;\n      dbase_queue_update({ brush_color_index });\n    }\n  }\n\n  crossColor() {\n    let my = this;\n    return Pane.colors[my.cross_color_index];\n  }\n\n  adjust_brush_size(delta) {\n    let my = this;\n    if (delta > 0 || my.brush_size > 1) {\n      my.brush_size += delta;\n    }\n    if (my.db_update) {\n      let { brush_size } = my;\n      dbase_queue_update({ brush_size });\n    }\n  }\n\n  adjust_cross_size(delta) {\n    let my = this;\n    if (delta > 0 || my.cross_size > 1) {\n      my.cross_size += delta;\n    }\n    if (my.db_update) {\n      let { cross_size } = my;\n      dbase_queue_update({ cross_size });\n    }\n  }\n\n  render_cross() {\n    let my = this;\n\n    my.xRight += 1;\n    if (my.xRight > my.width * my.cross_limit + my.cross_x0) {\n      my.hitEdge += 1;\n      my.xRight = my.cross_x0;\n    }\n    my.layer.strokeWeight(my.cross_size);\n    my.layer.stroke(my.crossColor(0));\n    my.layer.line(my.cross_x0, my.cross_y0, my.xRight, my.cross_y0);\n\n    my.yBottom += 1;\n    if (my.yBottom > my.height * my.cross_limit + my.cross_y0) {\n      my.hitEdge += 1;\n      my.yBottom = my.cross_y0;\n    }\n    my.layer.stroke(my.crossColor(1));\n    my.layer.line(my.cross_x0, my.cross_y0, my.cross_x0, my.yBottom);\n\n    my.xLeft -= 1;\n    if (my.xLeft < my.cross_x0 - my.width * my.cross_limit) {\n      my.hitEdge += 1;\n      my.xLeft = my.cross_x0;\n    }\n    my.layer.stroke(my.crossColor(2));\n    my.layer.line(my.cross_x0, my.cross_y0, my.xLeft, my.cross_y0);\n\n    my.yTop -= 1;\n    if (my.yTop < my.cross_y0 - my.height * my.cross_limit) {\n      my.hitEdge += 1;\n      my.yTop = my.cross_y0;\n    }\n    my.layer.stroke(my.crossColor(3));\n    my.layer.line(my.cross_x0, my.cross_y0, my.cross_x0, my.yTop);\n\n    if (my.hitEdge >= 4) {\n      my.hitEdge = 0;\n      my.next_crossColor();\n    }\n\n    if (my.db_update) {\n      let { xLeft, yTop, xRight, yBottom } = my;\n      dbase_queue_update({ xLeft, yTop, xRight, yBottom });\n    }\n  } // render_cross\n\n  //\n  static colorGold = [187, 165, 61];\n  // static colors = ['red', 'green', Pane.colorGold, 0];\n  // static colors = [[255, 0, 0], [0, 255, 0], Pane.colorGold, 0];\n  static colors = [[255, 0, 0], [0, 255, 0], Pane.colorGold];\n}\n",
        "children": [],
        "fileType": "file",
        "_id": "6631b958faa2929586cd1728",
        "isSelectedFile": false,
        "createdAt": "2024-05-01T03:47:43.026Z",
        "updatedAt": "2024-05-01T03:47:43.026Z",
        "id": "6631b958faa2929586cd1728"
      },
      {
        "name": "a_my_init.js",
        "content": "//\nfunction my_init() {\n  my.full_screen = 1;\n  if (my.full_screen) {\n    my.width = windowWidth;\n    // Leave room at bottom for buttons\n    my.height = windowHeight - 60;\n  } else {\n    my.width = 200;\n    my.height = 200;\n  }\n  //\n  my.fireb_config = 'jht9629';\n  // my.fireb_config = 'jht1493';\n  // my.fireb_config = 'jhtitp';\n\n  my.dbase_rootPath = 'm0-@r-@w-';\n  my.roomName = 'room1';\n  my.mo_app = 'mo-paint';\n  my.nameDevice = '';\n  my.spawn_count = 0;\n  my.cross_limit = 0.2;\n\n  my.query = get_url_params();\n\n  // my.isRemote = my.height > my.width;\n\n  // ?remote=1 -- devices paints, default\n  // ?remote=0 -- show other paint devices\n  //\n  my.isRemote = 1;\n  if (my.query) {\n    my.isRemote = parseFloat(my.query.remote || my.isRemote);\n  }\n}\n",
        "children": [],
        "fileType": "file",
        "_id": "6631b958faa2929586cd1729",
        "isSelectedFile": false,
        "createdAt": "2024-05-01T03:47:43.026Z",
        "updatedAt": "2024-05-01T03:47:43.026Z",
        "id": "6631b958faa2929586cd1729"
      },
      {
        "name": "a_sketch.js",
        "content": "// https://editor.p5js.org/jht9629-gmail/sketches/iXntJoZO1C\n// paint\n\n// https://editor.p5js.org/jht9629-nyu/sketches/nBefVKAbH\n// p5moExamples paint\n\n// participants can cast a numeric vote up or down\n// must be in portrait orientation to see crosses\n\nlet my = {};\n\n// mo-paint/a_device/{uid}\n//  { cross_x0, cross_y0, cross_size,\n//    brush_x0, brush_y0, brush_size,\n//    color_index, width, height\n//  };\n\n// p5.disableFriendlyErrors = true; // disables FES to improve performance\n\nfunction setup() {\n  my_init();\n\n  my.canvas = createCanvas(my.width, my.height);\n  my.canvas.mousePressed(canvas_mousePressed);\n  my.canvas.mouseReleased(canvas_mouseReleased);\n  my.canvas.touchEnded(canvas_mouseReleased);\n\n  dbase_app_init({ completed: startup_completed });\n\n  background(0);\n\n  createButton('Clear').mousePressed(clearAction);\n  createSpan('•');\n  createButton('Cross: Larger').mousePressed(largerCrossSizeAction);\n  createButton('Smaller').mousePressed(smallerCrossSizeAction);\n  createSpan('•');\n  createButton('Brush: Larger').mousePressed(largerBrushSizeAction);\n  createButton('Smaller').mousePressed(smallerBrushSizeAction);\n  createElement('br');\n  createButton('Remove App').mousePressed(removeAppAction);\n\n  // createSpan('•');\n  // createButton('Spawn').mousePressed(spawnAction);\n  // my.spawn_count_span = createSpan('');\n}\n\nfunction init_pane() {\n  let width = my.width;\n  let height = my.height;\n  let db_update = 1;\n  let cross_limit = my.cross_limit;\n  let isRemote = my.isRemote;\n  my.pane = new Pane({ width, height, db_update, cross_limit, isRemote });\n}\n\nfunction draw() {\n  if (!my.pane) return;\n  dbase_poll();\n  if (my.isRemote) {\n    if (mouseIsPressed && mouse_in_canvas()) {\n      my.pane.mouseDragged();\n    }\n    my.pane.render();\n    image(my.pane.layer, 0, 0);\n  } else {\n    draw_devices();\n  }\n}\n\n//\n// mouse events\n//\n\nfunction mouseDragged() {\n  // console.log('mouseDragged');\n  // return false; // required to prevent touch drag moving canvas on mobile\n  return !mouse_in_canvas();\n}\n\nfunction mouse_in_canvas() {\n  return mouseX >= 0 && mouseX <= width && mouseY >= 0 && mouseY < height;\n}\n\nfunction canvas_mousePressed() {\n  // console.log('mousePressed mouseX', mouseX, 'mouseY', mouseY);\n  my.pane.mousePressed();\n}\n\nfunction canvas_mouseReleased() {\n  my.pane.mouseReleased();\n}\n\n//\n// actions\n//\n\nfunction clearAction() {\n  if (my.isRemote) {\n    // my.pane.clear();\n    dbase_issue_actions({ clear_action: 1 });\n  } else {\n    clear_all();\n  }\n}\n\nfunction smallerCrossSizeAction() {\n  my.pane.adjust_cross_size(-1);\n  my.pane.next_crossColor();\n}\n\nfunction largerCrossSizeAction() {\n  my.pane.adjust_cross_size(1);\n  my.pane.next_crossColor();\n}\n\nfunction smallerBrushSizeAction() {\n  my.pane.adjust_brush_size(-1);\n  my.pane.next_brushColor();\n}\n\nfunction largerBrushSizeAction() {\n  my.pane.adjust_brush_size(1);\n  my.pane.next_brushColor();\n}\n\nfunction removeAppAction() {\n  clear_all();\n  dbase_remove_mo_app();\n}\n\nfunction clear_all() {\n  background(0);\n  dbase_issue_actions({ clear_action: 1 }, { all: 1 });\n  deinit_panes();\n}\n",
        "children": [],
        "fileType": "file",
        "_id": "6631b958faa2929586cd172a",
        "isSelectedFile": true,
        "createdAt": "2024-05-01T03:47:43.026Z",
        "updatedAt": "2024-05-01T03:47:43.026Z",
        "id": "6631b958faa2929586cd172a"
      },
      {
        "name": "devices.js",
        "content": "//\nfunction startup_completed() {\n  console.log('startup_completed');\n\n  dbase_devices_observe({ observed_key, removed_key });\n\n  pingAction();\n\n  init_pane();\n\n  function observed_key(key, device) {\n    // console.log('build_devices key', key, 'uid', my.uid, 'pane', my.pane);\n    // console.log('build_devices observed key', key, 'uid', my.uid, 'device', device);\n    if (my.isRemote && my.pane && key == my.uid) {\n      my.pane.sync(device);\n    } else if (my.panes) {\n      let pane = my.panes[key];\n      if (!pane) {\n        console.log('build_devices NO pane key', key, 'uid', my.uid, 'pane', pane);\n        return;\n      }\n      // console.log('build_devices sync key', key, 'pane', pane);\n      pane.sync(device);\n    }\n  }\n\n  function removed_key(key) {\n    console.log('build_devices removed key', key, 'uid', my.uid, 'pane', my.pane);\n    my.panes = {};\n    my.last_ndevices = 0;\n    // if (my.panes) {\n    //   delete my.panes[key];\n    // }\n  }\n}\n\n//\n// dbase device remote is set to 1 on startup to indicate\n// device is remote control mode\n//\nfunction pingAction() {\n  //\n  let remote = my.isRemote ? 1 : 0;\n  dbase_site_updates({ remote });\n}\n",
        "children": [],
        "fileType": "file",
        "_id": "6631b958faa2929586cd172b",
        "isSelectedFile": false,
        "createdAt": "2024-05-01T03:47:43.026Z",
        "updatedAt": "2024-05-01T03:47:43.026Z",
        "id": "6631b958faa2929586cd172b"
      },
      {
        "name": "draw_devices.js",
        "content": "//\n\nfunction draw_devices() {\n  if (layout_needed_check()) {\n    console.log('draw_devices layout_needed_check n', dbase_a_devices().length);\n    build_panes();\n  }\n  draw_panes();\n}\n\n//\n// Draw panes in my.panes\n//\nfunction draw_panes() {\n  let status = {};\n  for (let uid in my.panes) {\n    let pane = my.panes[uid];\n    // console.log('draw_panes pane', pane);\n    pane.prepare_layer(status);\n    {\n      // image(pane.layer, pane.layout.x0, pane.layout.y0);\n      let img = pane.layer;\n      let dx = pane.layout.x0;\n      let dy = pane.layout.y0;\n      let dWidth = my.xlen;\n      let dHeight = my.ylen;\n      let sx = 0;\n      let sy = 0;\n      if (img) {\n        image(img, dx, dy, dWidth, dHeight, sx, sy, img.width, img.height);\n      } else {\n        console.log('draw_panes img', img, 'pane', pane);\n      }\n    }\n  }\n  if (status.cleared) {\n    background(0);\n  }\n}\n\nfunction deinit_panes() {\n  for (let uid in my.panes) {\n    let pane = my.panes[uid];\n    pane.deinit();\n  }\n  my.panes = {};\n  my.last_ndevices = 0;\n}\n\nfunction build_panes() {\n  let layouts = layout_devices();\n  my.panes = {};\n  for (let layout of layouts) {\n    // console.log('build_panes layout', layout);\n\n    // layout = { x0: x, y0: y, uid, width, height, device }\n    let { width, height, uid } = layout;\n    let pane = new Pane({ width, height, uid, layout });\n    pane.sync(layout.device);\n\n    my.panes[layout.uid] = pane;\n  }\n}\n\nfunction layout_needed_check() {\n  let a_devices = dbase_a_devices();\n  let ndevices = a_devices.length;\n  if (ndevices != my.last_ndevices) {\n    console.log('layout_needed_check new ndevices', ndevices);\n    my.last_ndevices = ndevices;\n    return 1;\n  }\n  return 0;\n}\n\n// returns: [ { device, x0: x, y0: y }, ... ]\n//\nfunction layout_devices() {\n  my.ndiv = 1;\n  let a_devices = dbase_a_devices();\n  let ndevices = a_devices.length;\n  let more;\n  let layouts;\n  do {\n    more = 0;\n    // my.xlen = width / my.ndiv;\n    // my.ylen = my.xlen * (16 / 9);\n    my.ylen = height / my.ndiv;\n    my.xlen = my.ylen * (9 / 16);\n    let xhalf = my.xlen * 0.5;\n    let yhalf = my.ylen * 0.5;\n    let x0 = 0;\n    let x = x0;\n    let y = 0;\n    layouts = [];\n    for (let index = 0; index < ndevices; index++) {\n      let device = a_devices[index];\n      if (!device) {\n        console.log('layout_devices no device', index, device);\n        return;\n      }\n      {\n        let { uid, width, height } = device;\n        if (width != undefined) {\n          layouts.push({ x0: x, y0: y, uid, width, height, device });\n        }\n      }\n      // console.log('layout_devices x', x, 'y', y, 'uid', device.uid);\n      if (index != ndevices - 1) {\n        x += my.xlen;\n      }\n      if (x + xhalf > width) {\n        x = x0;\n        y += my.ylen;\n        if (y + yhalf > height) {\n          my.ndiv += 1;\n          more = 1;\n          // console.log('layout_devices more', more, 'index', index);\n          break;\n        }\n      }\n    }\n    // console.log('layout_devices more', more);\n  } while (more);\n  return layouts;\n}\n",
        "children": [],
        "fileType": "file",
        "_id": "6631b958faa2929586cd172c",
        "isSelectedFile": false,
        "createdAt": "2024-05-01T03:47:43.026Z",
        "updatedAt": "2024-05-01T03:47:43.026Z",
        "id": "6631b958faa2929586cd172c"
      },
      {
        "name": "index.html",
        "content": "<!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/p5.js\"></script>\n    <!-- <script src=\"https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/addons/p5.sound.min.js\"></script> -->\n\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"https://molab-itp.github.io/p5moRelease/lib/47/style.css\" />\n    <!-- <link rel=\"stylesheet\" type=\"text/css\" href=\"../../../p5moLibrary/src/lib/style.css\" /> -->\n\n    <style></style>\n  </head>\n  <body>\n    <main></main>\n\n    <script type=\"module\" src=\"https://molab-itp.github.io/p5moRelease/lib/47/a_lib.js\"></script>\n    <!-- <script type=\"module\" src=\"../../p5moLibrary/src/lib/a_lib.js\"></script> -->\n\n    <script src=\"a_my_init.js?v=81\"></script>\n    <script src=\"Pane.js?v=81\"></script>\n    <script src=\"devices.js?v=81\"></script>\n    <script src=\"draw_devices.js?v=81\"></script>\n    <script src=\"a_sketch.js?v=81\"></script>\n    <!-- <script src=\"sketch.js\"></script> -->\n  </body>\n</html>\n",
        "children": [],
        "fileType": "file",
        "_id": "6631b958faa2929586cd172d",
        "isSelectedFile": false,
        "createdAt": "2024-05-01T03:47:43.026Z",
        "updatedAt": "2024-05-01T03:47:43.026Z",
        "id": "6631b958faa2929586cd172d"
      }
    ],
    "createdAt": "2024-05-01T03:39:04.804Z",
    "id": "iXntJoZO1C"
  },
  {
    "_id": "tmkCQJy7iV",
    "name": "photo-booth",
    "updatedAt": "2024-05-01T03:47:42.720Z",
    "files": [
      {
        "name": "root",
        "content": "",
        "children": [
          "6631b958faa2929586cd172f",
          "6631b958faa2929586cd1730",
          "6631b958faa2929586cd1731",
          "6631b958faa2929586cd1732",
          "6631b958faa2929586cd1733"
        ],
        "fileType": "folder",
        "_id": "6631b958faa2929586cd172e",
        "createdAt": "2024-05-01T03:47:42.720Z",
        "updatedAt": "2024-05-01T03:47:42.720Z",
        "isSelectedFile": false,
        "id": "6631b958faa2929586cd172e"
      },
      {
        "name": "a_my_init.js",
        "content": "//\nfunction my_init() {\n  // updated to verify change on mobile\n  my.version = '?v=81';\n  my.isRemote = 1;\n  my.videoFlag = 1;\n  // show detailed log\n  my.logLoud = 0;\n\n  // Aspect ratio of video capture on mobile device\n  // my.vwidth = 480 / 2;\n  // my.vheight = 640 / 2;\n  my.vwidth = 480 * 1;\n  my.vheight = 640 * 1;\n  my.fireb_config = 'jht9629';\n  // my.fireb_config = 'jht1493';\n  // my.fireb_config = 'jhtitp';\n\n  my.dbase_rootPath = 'm0-@r-@w-';\n  my.mo_app = 'mo-photo';\n  my.roomName = 'room1';\n\n  // my.nameDevice = '';\n\n  if (my.isRemote) {\n    my.width = my.vwidth;\n    my.height = my.vheight;\n  } else {\n    my.width = windowWidth;\n    my.height = windowHeight;\n  }\n\n  my.colorGold = [187, 165, 61];\n  my.colors = [[255, 0, 0], [0, 255, 0], my.colorGold];\n}\n",
        "children": [],
        "fileType": "file",
        "_id": "6631b958faa2929586cd172f",
        "isSelectedFile": false,
        "createdAt": "2024-05-01T03:47:42.720Z",
        "updatedAt": "2024-05-01T03:47:42.720Z",
        "id": "6631b958faa2929586cd172f"
      },
      {
        "name": "a_sketch.js",
        "content": "// https://editor.p5js.org/jht9629-gmail/sketches/tmkCQJy7iV\n// photo-booth\n\n// https://editor.p5js.org/jht9629-nyu/sketches/5VKqK34Ps\n// p5moExamples photo booth 70\n\n// Capture canvas pixels to cloud as image jpg or png\n\nlet my = {};\n\nfunction setup() {\n  my_init();\n\n  // set group to share cloud data\n  my.group = 'group1';\n\n  my.photo_index = 0;\n  my.photo_max = 4;\n  my.photo_list = [];\n  my.slit_scan = 0;\n\n  // my.imageQuality = 1;\n  my.imageQuality = 0.1;\n  my.imageExt = '.jpg';\n  // my.imageExt = '.png';\n  // my.thumbWidth = my.vwidth / 2;\n  my.thumbWidth = my.vwidth;\n\n  // Lowest pixel density for small uploads\n  pixelDensity(1);\n\n  my.canvas = createCanvas(my.width, my.height);\n  my.canvas.mouseReleased(canvas_mouseReleased);\n  my.canvas.touchEnded(canvas_mouseReleased);\n\n  ui_init();\n\n  video_create();\n\n  dbase_app_init({ completed: startup_completed });\n\n  // for moving circle or video scan line\n  my.x = 0;\n  my.y = my.height / 2;\n  my.xstep = 1;\n  my.radius = int(my.width / 10);\n}\n\nfunction startup_completed() {\n  //\n  // dbase_devices_observe({ observed_key, observed_item, all: 1 });\n  // dbase_app_observe({ observed_item });\n  dbase_group_observe({ observed_key, observed_item });\n\n  function observed_key(key, device) {\n    // console.log('observed_a_device key', key, 'uid', my.uid, 'device', device);\n    // console.log('observed_key key', key, 'device.photo_index', device && device.photo_index);\n  }\n\n  function observed_item(device) {\n    // console.log('observed_item device.photo_index', device.photo_index);\n    // console.log('observed_item device.photo_list', device.photo_list);\n    if (device.photo_list != undefined) {\n      my.photo_list = device.photo_list;\n    }\n    if (device.photo_index != undefined) {\n      my.photo_index = device.photo_index;\n    }\n    show_action();\n  }\n}\n\nfunction draw() {\n  draw_frame();\n  draw_number(my.photo_index + 1);\n}\n\nfunction draw_frame() {\n  if (my.videoFlag && !video_ready()) return;\n\n  if (my.videoFlag) {\n    // faster to get entire video frame as an image\n    my.videoImg = my.video.get();\n  }\n  if (!my.videoImg) {\n    return;\n  }\n  if (my.slit_scan) {\n    draw_scan();\n  } else {\n    draw_video();\n  }\n  my.x = (my.x + my.xstep) % my.width;\n\n  let str = my.photo_list.length + ' ' + my.photo_index;\n  my.photo_count_span.html(str);\n}\n\nfunction draw_scan() {\n  // my.videoImg.loadPixels();\n  let w = my.videoImg.width;\n  let h = my.videoImg.height;\n  copy(my.videoImg, w / 2, 0, 1, h, my.x, 0, 1, h);\n}\n\nfunction draw_video() {\n  // background(0);\n  image(my.videoImg, 0, 0);\n  // Draw circle on video\n  noStroke();\n  let index = my.photo_index + 1;\n  fill(my.colors[index % my.colors.length]);\n  circle(my.x, my.y, my.radius);\n}\n\nfunction draw_number(n) {\n  // Convert number to string\n  let str = n + '';\n  let x = 10;\n  let y = my.height;\n  textSize(50);\n  // Draw black rect background\n  let a = textAscent();\n  let d = textDescent();\n  let h = a + d;\n  let w = textWidth(str);\n  fill(0);\n  rect(x, y - h, w, h);\n  // Draw white text\n  fill(255);\n  // x  y bottom-left corner.\n  text(str, x, y - d);\n}\n\nfunction canvas_mouseReleased() {\n  // console.log('canvas_mouseReleased');\n  track_xy();\n}\n\nfunction track_xy() {\n  let x = mouseX;\n  let y = mouseY;\n}\n\nfunction mouseDragged() {\n  // console.log('mouseDragged');\n  // required to prevent touch drag moving canvas on mobile\n  let onCanvas = mouseX >= 0 && mouseX < width && mouseY >= 0 && mouseY < height;\n  if (onCanvas) {\n    track_xy();\n  }\n  // return my.scrollFlag ? true : !onCanvas;\n  return !onCanvas;\n}\n\nfunction windowResized() {\n  // console.log('windowResized windowHeight', windowHeight, 'windowWidth', windowWidth);\n  // my.isPortrait = windowHeight > windowWidth;\n  if (my.isRemote) {\n    return;\n  }\n  resizeCanvas(windowWidth, windowHeight);\n  // console.log('windowResized width', width, 'height', height);\n}\n\n// https://editor.p5js.org/jht9629-nyu/sketches/twgS6eWRZ\n// pixel-grid\n\n// https://editor.p5js.org/jht9629-nyu/sketches/7Wjlo3pPU\n// mo-pix-chip-grid jht9629 fireb_firebase.js\n\n// https://editor.p5js.org/jht9629-nyu/sketches/CntV1JQNp\n// p5moExamples pixel-grid 47\n\n// [x] Correct display of images - must hit show button\n// [x] Add --> Take, keep array of n images and upate\n// [x] photo_index\n\n// [x] my.photo_list - show only last n\n//    [ { name: \"\", index: n }, ... ]\n\n// [x] preserve image show order\n\n// [x] Show other photobooths\n// enabled by group settings\n//   my.group = 'group1';\n",
        "children": [],
        "fileType": "file",
        "_id": "6631b958faa2929586cd1730",
        "isSelectedFile": true,
        "createdAt": "2024-05-01T03:47:42.720Z",
        "updatedAt": "2024-05-01T03:47:42.720Z",
        "id": "6631b958faa2929586cd1730"
      },
      {
        "name": "index.html",
        "content": "<!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/p5.js\"></script>\n    <!-- <script src=\"https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/addons/p5.sound.min.js\"></script> -->\n\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"https://molab-itp.github.io/p5moRelease/lib/66/style.css\"></script>\n    <!-- <link rel=\"stylesheet\" type=\"text/css\" href=\"../../../p5moLibrary/src/lib/style.css?v=81\" /> -->\n\n    <style></style>\n  </head>\n  <body>\n    <main></main>\n\n    <script type=\"module\" src=\"https://molab-itp.github.io/p5moRelease/lib/70/a_lib.js\"></script>\n    <!-- <script type=\"module\" src=\"../../p5moLibrary/src/lib/a_lib.js\"></script> -->\n\n    <script src=\"a_my_init.js?v=81\"></script>\n    <script src=\"ui_init.js?v=81\"></script>\n    <script src=\"photo.js?v=81\"></script>\n    <script src=\"a_sketch.js?v=81\"></script>\n    <!-- ?v=81 included to force into the cache -->\n  </body>\n</html>\n",
        "children": [],
        "fileType": "file",
        "_id": "6631b958faa2929586cd1731",
        "isSelectedFile": false,
        "createdAt": "2024-05-01T03:47:42.720Z",
        "updatedAt": "2024-05-01T03:47:42.720Z",
        "id": "6631b958faa2929586cd1731"
      },
      {
        "name": "photo.js",
        "content": "//\n\nfunction photo_name(index) {\n  return index.toString().padStart(3, '0') + my.imageExt;\n}\n\nfunction photo_list_entry(index) {\n  let name = photo_name(index);\n  let uid = my.uid;\n  return { name, index, uid };\n}\n\nfunction photo_path_entry(entry) {\n  return entry.uid + '/' + entry.name;\n}\n\nasync function photo_list_add(entry) {\n  my.photo_list.push(entry);\n  if (my.photo_list.length > my.photo_max) {\n    await photo_list_trim();\n  }\n\n  // Change to photo_list send to cloud\n  dbase_group_update({ photo_list: my.photo_list });\n}\n\nasync function photo_list_trim() {\n  //\n  // remove the first entry in photo_list\n  //\n  let first = my.photo_list.shift();\n  await photo_list_remove_entry(first);\n}\n\nasync function photo_list_remove_entry(entry) {\n  // console.log('photo_list_remove_entry entry', entry);\n\n  let path = photo_path_entry(entry);\n  try {\n    await fstorage_remove({ path });\n    remove_img_index(entry.index);\n  } catch (err) {\n    console.log('show_action err', err);\n  }\n}\n\nfunction remove_img_index(index) {\n  // console.log('remove_img_index index', index);\n  let id = 'id_img_' + index;\n  let img = select('#' + id);\n  // console.log('remove_img_index img', img);\n  if (img) {\n    img.remove();\n  }\n}\n\nasync function show_action() {\n  //\n  // console.log('show_action my.photo_list', my.photo_list);\n  for (let entry of my.photo_list) {\n    let path = photo_path_entry(entry);\n    try {\n      let url = await fstorage_download_url({ path });\n      url_result(url, entry.index);\n    } catch (err) {\n      console.log('show_action err', err);\n    }\n  }\n  function url_result(url, index) {\n    // console.log('url_result index', index, 'url', url);\n    let img = find_img(index);\n    img.elt.src = url;\n  }\n}\n\n// Create image element for an index\n//  or return if already present\n//\nfunction find_img(index) {\n  let id = 'id_img_' + index;\n  let img = select('#' + id);\n  if (!img) {\n    // console.log('show_action id', id);\n    img = createImg('', 'image');\n    img.id(id);\n    // console.log('show_action createImg', img);\n    // my.gallery_div.child(img);\n\n    // Add image as first child to see most recent first\n    my.gallery_div.elt.prepend(img.elt);\n\n    let iwidth = my.thumbWidth;\n    img.style('width: ' + iwidth + 'px;');\n  }\n  return img;\n}\n",
        "children": [],
        "fileType": "file",
        "_id": "6631b958faa2929586cd1732",
        "isSelectedFile": false,
        "createdAt": "2024-05-01T03:47:42.720Z",
        "updatedAt": "2024-05-01T03:47:42.720Z",
        "id": "6631b958faa2929586cd1732"
      },
      {
        "name": "ui_init.js",
        "content": "//\nfunction ui_init() {\n  //\n  my.effectBtn = ui_createButton('Effect');\n  my.effectBtn.mousePressed(effect_action);\n\n  my.takeBtn = ui_createButton('Take');\n  my.takeBtn.mousePressed(take_action);\n\n  my.removeBtn = ui_createButton('Remove');\n  my.removeBtn.mousePressed(remove_action);\n\n  my.showBtn = ui_createButton('Show');\n  my.showBtn.mousePressed(show_action);\n\n  my.photo_count_span = createSpan('' + my.photo_list.length);\n\n  my.gallery_div = ui_div_empty('igallery');\n}\n\nfunction effect_action() {\n  my.slit_scan = !my.slit_scan;\n}\n\nasync function take_action() {\n  // console.log('take_action');\n\n  let entry = photo_list_entry(my.photo_index + 1);\n  let path = photo_path_entry(entry);\n\n  let layer = my.canvas;\n  let imageQuality = my.imageQuality;\n  try {\n    await fstorage_upload({ path, layer, imageQuality });\n\n    await photo_list_add(entry);\n\n    dbase_group_update({ photo_index: dbase_increment(1) });\n    //\n  } catch (err) {\n    console.log('take_action err', err);\n  }\n}\n\nasync function remove_action() {\n  // console.log('remove_action photo_count', my.photo_list.length);\n  if (my.photo_list.length < 1) {\n    // No more images in the cloud\n    //  zero out photo_index\n    dbase_group_update({ photo_index: 0 });\n    return;\n  }\n  //\n  // remove the last entry in photo_list\n  //\n  let last = my.photo_list.pop();\n  await photo_list_remove_entry(last);\n\n  // Update photo_list in the cloud\n  dbase_group_update({ photo_list: my.photo_list });\n}\n",
        "children": [],
        "fileType": "file",
        "_id": "6631b958faa2929586cd1733",
        "isSelectedFile": false,
        "createdAt": "2024-05-01T03:47:42.720Z",
        "updatedAt": "2024-05-01T03:47:42.720Z",
        "id": "6631b958faa2929586cd1733"
      }
    ],
    "createdAt": "2024-05-01T03:39:04.993Z",
    "id": "tmkCQJy7iV"
  },
  {
    "_id": "xXukebjmI",
    "name": "pixel-grid",
    "updatedAt": "2024-05-01T03:47:42.546Z",
    "files": [
      {
        "name": "root",
        "content": "",
        "children": [
          "6631b959faa2929586cd1735",
          "6631b959faa2929586cd1736",
          "6631b959faa2929586cd1737",
          "6631b959faa2929586cd1738",
          "6631b959faa2929586cd1739",
          "6631b959faa2929586cd173a",
          "6631b959faa2929586cd173b",
          "6631b959faa2929586cd173c",
          "6631b959faa2929586cd173d"
        ],
        "fileType": "folder",
        "_id": "6631b959faa2929586cd1734",
        "createdAt": "2024-05-01T03:47:42.546Z",
        "updatedAt": "2024-05-01T03:47:42.546Z",
        "isSelectedFile": false,
        "id": "6631b959faa2929586cd1734"
      },
      {
        "name": "a_my_init1.js",
        "content": "//\nfunction my_init1() {\n  // updated to verify change on mobile\n  my.version = '?v=81';\n  my.isRemote = 1;\n  my.settingsFlag = 0;\n  // Aspect ratio of video capture\n  my.vwidth = 480;\n  my.vheight = 640;\n  my.fireb_config = 'jht9629';\n  // my.fireb_config = 'jht1493';\n  // my.fireb_config = 'jhtitp';\n  my.dbase_rootPath = 'm0-@r-@w-';\n  my.mo_app = 'mo-pix-chip-grid';\n  my.roomName = 'room-pixel-grid';\n  my.nameDevice = '';\n  // my.logLoud = 1; // 1 to show ui_log in console\n  // my.nstepCycle = [8, 16, 32];\n  // my.updateTimes = [0.2, 0.1, 0.02];\n  // my.nstepCycle = [8, 16, 32, 64, 128];\n  // my.updateTimes = [0.2, 0.1, 0.02, 0.01, 0.01];\n  my.nstepCycle = [8, 16, 32, 64];\n  my.updateTimes = [0.2, 0.1, 0.05, 0.02];\n  my.nstepIndex = 0;\n  my.nstepDir = 1;\n  my.margin = 0.1;\n  my.logSummaryFlag = 0;\n  my.logDetailFlag = 0;\n  my.scanFlag = 1;\n  my.faceFlag = 1;\n  my.videoFlag = 1;\n  my.storeFlag = 0;\n  my.scrollFlag = 1;\n  my.scrollOnStartFlag = 0;\n  my.scrollStopSecs = 4;\n  my.byPixel = 0;\n  my.perFrame = 30;\n  my.shapeIndex = 0;\n  my.storeProps = {\n    roomName: 1,\n    nameDevice: 1,\n    name: 1,\n    nstep: 1,\n    margin: 1,\n    settingsFlag: 1,\n    logSummaryFlag: 1,\n    logDetailFlag: 1,\n    storeFlag: 1,\n    scanFlag: 1,\n  };\n}\n",
        "children": [],
        "fileType": "file",
        "_id": "6631b959faa2929586cd1735",
        "isSelectedFile": false,
        "createdAt": "2024-05-01T03:47:42.546Z",
        "updatedAt": "2024-05-01T03:47:42.546Z",
        "id": "6631b959faa2929586cd1735"
      },
      {
        "name": "a_my_init2.js",
        "content": "function my_init2() {\n  //\n  my.nstep = my.nstepCycle[my.nstepIndex];\n  my.updateTime = my.updateTimes[my.nstepIndex];\n\n  localStore_get();\n\n  init_query();\n\n  my.layer = createGraphics(my.vwidth, my.vheight);\n  my.crossHairLayer = createGraphics(my.vwidth, my.vheight);\n  // my.publishLayer = createGraphics(my.vwidth, my.vheight);\n\n  my.uid = 0;\n  my.ndevice = -1;\n\n  if (my.scrollOnStartFlag) {\n    ui_toggle_scroll();\n  }\n\n  my.track_xi = 0;\n  my.track_yi = 0;\n  my.send_xi = 0;\n  my.send_yi = 0;\n\n  nstep_init();\n}\n\nfunction localStore_get() {\n  let str = localStorage.getItem('mo-pix-chip-grid');\n  if (!str) {\n    return;\n  }\n  // console.log('localStore_get str', str);\n  console.log('localStore_get n str', str.length);\n  let values = JSON.parse(str);\n  for (let prop in values) {\n    my[prop] = values[prop];\n  }\n}\n\nfunction localStore_set() {\n  let values = {};\n  for (let prop in my.storeProps) {\n    values[prop] = my[prop];\n  }\n  let str = JSON.stringify(values);\n  localStorage.setItem('mo-pix-chip-grid', str);\n  console.log('localStore_set n str', str.length);\n}\n\nfunction init_query() {\n  my.query = get_url_params();\n  if (my.query) {\n    my.nameDevice = my.query.name || my.nameDevice;\n    my.roomName = my.query.room || my.roomName;\n    my.storeFlag = parseFloat(my.query.store || my.storeFlag);\n    my.nstep = parseFloat(my.query.nstep || my.nstep);\n    my.isRemote = parseFloat(my.query.remote || my.isRemote);\n  }\n  console.log('init_query windowHeight', windowHeight, 'windowWidth', windowWidth);\n  // my.isPortrait = windowHeight > windowWidth;\n\n  if (my.isRemote) {\n    my.width = my.vwidth;\n    my.height = my.vheight * 4;\n  } else {\n    my.width = windowWidth;\n    my.height = windowHeight;\n  }\n}\n\nfunction nstep_init() {\n  if (my.nstep < 4) {\n    my.margin = 0;\n  } else {\n    my.margin = 0.1;\n  }\n  // my.stepPx = floor(my.vwidth / my.nstep);\n  my.stepPx = floor(my.vheight / my.nstep);\n  my.innerPx = floor(my.stepPx * (1 - my.margin));\n  my.crossWt = my.stepPx - my.innerPx;\n  my.byPixel = my.nstep < 16;\n  my.byLine = my.nstep >= 16;\n}\n\nfunction nstep_update(n) {\n  // console.log('nstep_update n', n);\n  my.nstep = n;\n  nstep_init();\n  my.nstep_selection.selected(my.nstep);\n}\n",
        "children": [],
        "fileType": "file",
        "_id": "6631b959faa2929586cd1736",
        "isSelectedFile": false,
        "createdAt": "2024-05-01T03:47:42.546Z",
        "updatedAt": "2024-05-01T03:47:42.546Z",
        "id": "6631b959faa2929586cd1736"
      },
      {
        "name": "a_sketch.js",
        "content": "// https://editor.p5js.org/jht9629-gmail/sketches/xXukebjmI\n// pixel-grid\n\n// https://editor.p5js.org/jht9629-nyu/sketches/CntV1JQNp\n// p5moExamples pixel-grid 71\n\nlet my = {};\n\nfunction setup() {\n  my_init1();\n  my_init2();\n\n  my.canvas = createCanvas(my.width, my.height);\n  my.canvas.mouseReleased(canvas_mouseReleased);\n  my.canvas.touchEnded(canvas_mouseReleased);\n\n  ui_init();\n\n  video_create();\n\n  // let config = fireb_.init('jht9629');\n  // // let config = fireb_.init('jht1493');\n  // ui_log('config.projectId', config.projectId, 'configLabel', config.configLabel);\n\n  dbase_app_init({ completed: dbase_host_init });\n\n  anim_init();\n\n  ui_log('p5moExamples pixel-grid 47');\n}\n\nfunction dbase_host_init() {\n  pix_grid_observe();\n  pix_chip_observe();\n}\n\nfunction anim_init() {\n  my.animLoop = new Anim({ target: my, time: my.updateTime, loop: 1 });\n  my.animLoop.start();\n}\n\nfunction draw() {\n  draw_frame();\n\n  ui_init_update();\n\n  my.animLoop.step({ action: updateAction });\n\n  if (mouseIsPressed === true) {\n    let colr;\n    if (my.videoImg) {\n      colr = my.videoImg.get(mouseX, mouseY);\n    }\n    ui_log('mouse...', mouseX, mouseY, pmouseX, pmouseY, 'colr', colr);\n  }\n}\n\nfunction draw_frame() {\n  if (my.videoFlag && !video_ready()) return;\n\n  ui_check_scroll();\n\n  background(0);\n\n  if (my.videoFlag) {\n    // faster to get entire video frame as an image\n    my.videoImg = my.video.get();\n    image(my.videoImg, 0, 0);\n  }\n\n  // if (!my.storeFlag) {\n  render_pix_devices();\n  // }\n}\n\nfunction updateAction() {\n  if (my.storeFlag) {\n    pix_grid_update(my.videoImg);\n  }\n  if (my.scanFlag) {\n    draw_cross_hair_update();\n    pix_chip_update();\n  }\n}\n\nfunction nstepIndex_update() {\n  my.nstepIndex += my.nstepDir;\n  if (my.nstepIndex < 0 || my.nstepIndex >= my.nstepCycle.length) {\n    // my.nstepDir *= -1;\n    // my.nstepIndex += my.nstepDir * 2;\n    my.nstepIndex = 0;\n  }\n  my.nstep = my.nstepCycle[my.nstepIndex];\n\n  my.updateTime = my.updateTimes[my.nstepIndex];\n\n  my.animLoop.updateTime(my.updateTime);\n\n  // console.log('nstepIndex', my.nstepIndex, 'nstep', my.nstep);\n\n  nstep_update(my.nstep);\n}\n\nfunction draw_cross_hair() {\n  let layer = my.crossHairLayer;\n  image(layer, 0, 0);\n}\n\nfunction draw_cross_hair_update() {\n  if (!my.videoImg) return;\n  let vx = my.track_xi * my.stepPx;\n  let vy = my.track_yi * my.stepPx;\n  if (my.track_xy_updated) {\n    my.track_xy_updated = 0;\n  } else {\n    my.track_xi += 1;\n    vx = my.track_xi * my.stepPx;\n    if (vx + my.stepPx > my.vwidth) {\n      my.track_xi = 0;\n      my.track_yi += 1;\n      vy = my.track_yi * my.stepPx;\n    }\n    // Need to check out side prior if for when nstep changes\n    // in middle of top to bottom scan\n    if (vy + my.stepPx > my.vheight) {\n      my.track_yi = 0;\n      nstepIndex_update();\n    }\n  }\n  vx = my.track_xi * my.stepPx;\n  vy = my.track_yi * my.stepPx;\n  let x = floor(vx + my.innerPx * 0.5);\n  let y = floor(vy + my.innerPx * 0.5);\n  let colr = my.videoImg.get(x, y);\n  my.videoColor = colr;\n}\n\nfunction canvas_mouseReleased() {\n  // console.log('canvas_mouseReleased');\n  track_xy();\n}\n\nfunction track_xy() {\n  let x = mouseX;\n  let y = mouseY;\n  let vx = x - (x % my.stepPx);\n  let vy = y - (y % my.stepPx);\n  my.track_xi = floor(vx / my.stepPx);\n  my.track_yi = floor(vy / my.stepPx);\n  my.track_xy_updated = 1;\n  draw_cross_hair_update();\n}\n\nfunction mouseDragged() {\n  // console.log('mouseDragged');\n  // required to prevent touch drag moving canvas on mobile\n  // return false;\n  let onCanvas = mouseX >= 0 && mouseX < width && mouseY >= 0 && mouseY < height;\n  if (onCanvas) {\n    track_xy();\n  }\n  return my.scrollFlag ? true : !onCanvas;\n}\n\nfunction windowResized() {\n  // console.log('windowResized windowHeight', windowHeight, 'windowWidth', windowWidth);\n  // my.isPortrait = windowHeight > windowWidth;\n  if (my.isRemote) {\n    return;\n  }\n  resizeCanvas(windowWidth, windowHeight);\n  // console.log('windowResized width', width, 'height', height);\n}\n\n// https://editor.p5js.org/jht9629-nyu/sketches/7Wjlo3pPU\n// mo-pix-chip-grid jht9629 fireb_firebase.js\n\n// https://editor.p5js.org/jht9629-nyu/sketches/twgS6eWRZ\n// pixel-grid\n",
        "children": [],
        "fileType": "file",
        "_id": "6631b959faa2929586cd1737",
        "isSelectedFile": true,
        "createdAt": "2024-05-01T03:47:42.546Z",
        "updatedAt": "2024-05-01T03:47:42.546Z",
        "id": "6631b959faa2929586cd1737"
      },
      {
        "name": "index.html",
        "content": "<!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/p5.js\"></script>\n    <!-- <script src=\"https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/addons/p5.sound.min.js\"></script> -->\n\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"https://molab-itp.github.io/p5moRelease/lib/71/style.css\"></script>\n    <!-- <link rel=\"stylesheet\" type=\"text/css\" href=\"../../../p5moLibrary/src/lib/style.css?v=81\" /> -->\n\n    <style></style>\n  </head>\n  <body>\n    <main></main>\n\n    <script type=\"module\" src=\"https://molab-itp.github.io/p5moRelease/lib/71/a_lib.js\"></script>\n    <!-- <script type=\"module\" src=\"../../p5moLibrary/src/lib/a_lib.js\"\"></script> -->\n\n    <script src=\"a_my_init1.js?v=81\"></script>\n    <script src=\"a_my_init2.js?v=81\"></script>\n    <script src=\"a_sketch.js?v=81\"></script>\n    <script src=\"pix_chip_observe.js?v=81\"></script>\n    <script src=\"pix_grid_observe.js?v=81\"></script>\n    <script src=\"render_pix_devices.js?v=81\"></script>\n    <script src=\"pix_grid_update.js?v=81\"></script>\n    <script src=\"ui_init.js?v=81\"></script>\n    <!-- ?v=81 included to force into the cache -->\n  </body>\n</html>\n",
        "children": [],
        "fileType": "file",
        "_id": "6631b959faa2929586cd1738",
        "isSelectedFile": false,
        "createdAt": "2024-05-01T03:47:42.546Z",
        "updatedAt": "2024-05-01T03:47:42.546Z",
        "id": "6631b959faa2929586cd1738"
      },
      {
        "name": "pix_chip_observe.js",
        "content": "//\n// for chip\n//   let x = my.track_xi;\n//   let y = my.track_yi;\n//   let s = my.stepPx;\n//   let c = my.videoColor;\n\nfunction pix_chip_observe() {\n  //\n  dbase_app_observe(\n    { observed_key, removed_key }, //\n    { app: 'mo-pix-chip', tag: 'pix_chip_observe' }\n  );\n  // let path = `${my.dbase_rootPath}/${my.roomName}/mo-pix-chip`;\n\n  function observed_key(key, value) {\n    let device = device_with_layers(key);\n    device.pixchips = value;\n  }\n  function removed_key(key, value) {\n    let device = device_with_layers(key);\n    delete device.pixchips;\n  }\n}\n\nfunction device_with_layers(key) {\n  let device = dbase_fireb_device(key);\n  if (!device.layer) {\n    device.layer = createGraphics(my.vwidth, my.vheight);\n    device.crossLayer = createGraphics(my.vwidth, my.vheight);\n  }\n  return device;\n}\n\nfunction pix_chip_update() {\n  if (!my.videoColor) {\n    console.log('pix_chip_update no my.videoColor', my.videoColor);\n    return;\n  }\n  let c = my.videoColor;\n  let x = my.track_xi;\n  let y = my.track_yi;\n  let s = my.stepPx;\n  let value = { x, y, s, c };\n\n  dbase_update_value(value, { app: 'mo-pix-chip', tag: 'pix_chip_update' });\n\n  // let path = `${my.dbase_rootPath}/${my.roomName}/mo-pix-chip/${my.uid}`;\n}\n\n// --\n\nfunction pix_chip_removeAll() {\n  let path = `${my.dbase_rootPath}/${my.roomName}/mo-pix-chip`;\n  let { getRefPath, set } = fireb_.fbase;\n  let refPath = getRefPath(path);\n  set(refPath, {})\n    .then(() => {\n      // Data saved successfully!\n      // ui_log('pix_chip_removeAll OK');\n    })\n    .catch((error) => {\n      // The write failed...\n      ui_log('pix_chip_removeAll error', error);\n    });\n}\n\nfunction pix_chip_remove() {\n  let path = `${my.dbase_rootPath}/${my.roomName}/mo-pix-chip/${my.uid}`;\n  let { getRefPath, set } = fireb_.fbase;\n  let refPath = getRefPath(path);\n  set(refPath, {})\n    .then(() => {\n      // Data saved successfully!\n      // ui_log('pix_chip_remove OK');\n    })\n    .catch((error) => {\n      // The write failed...\n      ui_log('pix_chip_remove error', error);\n    });\n}\n",
        "children": [],
        "fileType": "file",
        "_id": "6631b959faa2929586cd1739",
        "isSelectedFile": false,
        "createdAt": "2024-05-01T03:47:42.546Z",
        "updatedAt": "2024-05-01T03:47:42.546Z",
        "id": "6631b959faa2929586cd1739"
      },
      {
        "name": "pix_grid_observe.js",
        "content": "//\nfunction pix_grid_observe() {\n  //\n  dbase_app_observe(\n    { observed_key, removed_key }, //\n    { app: 'mo-pix-grid', tag: 'pix_grid_observe' }\n  );\n  // let path = `${my.dbase_rootPath}/${my.roomName}/mo-pix-grid`;\n\n  function observed_key(key, value) {\n    let device = device_with_layers(key);\n    device.pixgrids = value;\n  }\n  function removed_key(key, value) {\n    let device = device_with_layers(key);\n    delete device.pixgrids;\n  }\n}\n\nfunction pix_grid_update_irow(irow, stepPx, row) {\n  //\n  let i = irow;\n  let s = stepPx;\n  let value = { i, s, row };\n\n  dbase_update_value(value, { app: 'mo-pix-grid', tag: 'pix_grid_update_irow', suffix: irow });\n\n  // let path = `${my.dbase_rootPath}/${my.roomName}/mo-pix-grid/${my.uid}/${irow}`;\n}\n\n// db goes to read-only mode when nstep=128\nfunction pix_grid_removeAll() {\n  let path = `${my.dbase_rootPath}/${my.roomName}/mo-pix-grid`;\n  let { getRefPath, set } = fireb_.fbase;\n  let refPath = getRefPath(path);\n  set(refPath, {})\n    .then(() => {\n      // Data saved successfully!\n      // ui_log('pix_grid_removeAll OK');\n    })\n    .catch((error) => {\n      // The write failed...\n      ui_log('pix_grid_removeAll error', error);\n    });\n}\n\nfunction pix_grid_remove() {\n  let path = `${my.dbase_rootPath}/${my.roomName}/mo-pix-grid/${my.uid}`;\n  let { getRefPath, set } = fireb_.fbase;\n  let refPath = getRefPath(path);\n  set(refPath, {})\n    .then(() => {\n      // Data saved successfully!\n      // ui_log('pix_grid_remove OK');\n    })\n    .catch((error) => {\n      // The write failed...\n      ui_log('pix_grid_remove error', error);\n    });\n}\n\nfunction app_pix_grid_remove() {\n  dbase_site_remove();\n  pix_grid_remove();\n  delete my.fireb_devices;\n}\n\n// https://console.firebase.google.com/u/0/project/molab-485f5/database/molab-485f5-default-rtdb/data\n\n// https://firebase.google.com/docs/database/web/read-and-write?hl=en&authuser=0\n\n// https://firebase.google.com/docs/database/web/read-and-write?hl=en&authuser=0#read_data_once_with_an_observer\n\n// https://firebase.google.com/docs/reference/js/database.datasnapshot?authuser=0\n\n// https://firebase.google.com/docs/reference/js/database?authuser=0\n\n// https://firebase.google.com/docs/reference/js/database.md?authuser=0#onchildadded\n",
        "children": [],
        "fileType": "file",
        "_id": "6631b959faa2929586cd173a",
        "isSelectedFile": false,
        "createdAt": "2024-05-01T03:47:42.546Z",
        "updatedAt": "2024-05-01T03:47:42.546Z",
        "id": "6631b959faa2929586cd173a"
      },
      {
        "name": "pix_grid_update.js",
        "content": "// incrementally draw grid of pixel rects from given image img\nfunction pix_grid_update(img) {\n  // console.log('pix_grid_update img', img);\n  if (!img) return;\n  // console.log('pix_grid_update_image img', img);\n  more = 1;\n  let colr;\n  let cx = floor(my.stepPx * 0.5);\n  let cy = floor(my.stepPx * 0.5);\n  while (more) {\n    let vx = my.send_xi * my.stepPx;\n    let vy = my.send_yi * my.stepPx;\n    if (my.videoFlag) {\n      colr = img.get(vx + cx, vy + cy);\n    } else {\n      colr = [0, 0, 0];\n    }\n    draw_record_rect(my.send_xi, my.send_yi, colr);\n    my.send_xi += 1;\n    vx = my.send_xi * my.stepPx;\n    if (vx >= my.vwidth) {\n      draw_record_flush(my.send_yi);\n      my.send_xi = 0;\n      my.send_yi += 1;\n      vy = my.send_yi * my.stepPx;\n      if (vy >= my.vheight) {\n        more = 0;\n        my.send_yi = 0;\n      }\n      if (my.byLine) {\n        more = 0;\n      }\n    }\n    if (my.byPixel) {\n      more = 0;\n    }\n  }\n}\n\nfunction draw_record_rect(ix, iy, c) {\n  // console.log('draw_record_rect ix', ix, 'iy', iy, 'c', c);\n  if (my.storeFlag) {\n    // let op = { r: 1, c, x, y, w, h };\n    if (!my.pixRows) {\n      my.pixRows = [];\n    }\n    let row = my.pixRows[iy];\n    if (!row) {\n      row = [];\n      my.pixRows[iy] = row;\n    }\n    let item = { c };\n    row[ix] = item;\n  }\n}\n\nfunction draw_record_flush(irow) {\n  if (my.storeFlag && irow >= 0) {\n    pix_grid_update_irow(irow, my.stepPx, my.pixRows[irow]);\n  }\n}\n",
        "children": [],
        "fileType": "file",
        "_id": "6631b959faa2929586cd173b",
        "isSelectedFile": false,
        "createdAt": "2024-05-01T03:47:42.546Z",
        "updatedAt": "2024-05-01T03:47:42.546Z",
        "id": "6631b959faa2929586cd173b"
      },
      {
        "name": "render_pix_devices.js",
        "content": "//\n// incrementally draw grid of pixel rects from storage\nfunction render_pix_devices() {\n  // console.log('render_pix_devices my.fireb_devices', my.fireb_devices);\n  // let layer = my.layer;\n  if (!my.fireb_devices) {\n    return;\n  }\n  my.x0 = 0;\n  my.y0 = 0;\n  // Render my pix first\n  if (my.uid) {\n    render_pix_devices_uid(my.uid);\n  }\n  for (let uid in my.fireb_devices) {\n    // console.log('render_pix_devices ub_uid', uid);\n    if (uid != my.uid) {\n      render_pix_devices_uid(uid);\n    }\n    // console.log('render_pix_devices my.y0', my.y0);\n    if (my.y0 >= height) {\n      break;\n    }\n  }\n}\n\nfunction render_pix_devices_uid(uid) {\n  // console.log('render_pix_devices_uid uid', uid, my.x0, my.y0);\n  render_pix_devices_image(uid);\n  my.x0 += my.vwidth;\n  if (my.x0 >= width) {\n    my.x0 = 0;\n    my.y0 += my.vheight;\n  }\n}\n\nfunction render_pix_devices_image(uid) {\n  // let device = my.fireb_devices[uid];\n  let device = device_with_layers(uid);\n  // console.log('render_pix_devices device', device);\n  if (!device) return;\n\n  let pixs = device.pixgrids;\n  render_pix_devices_device(device, pixs);\n\n  image(device.layer, my.x0, my.y0);\n\n  render_pix_devices_cross(device, uid);\n\n  image(device.crossLayer, my.x0, my.y0);\n}\n\nfunction render_pix_devices_device(device, pixs) {\n  if (!pixs) return;\n  // console.log('render_pix_devices_device pix n', pixs.length);\n  if (pixs.length <= 0) return;\n  let layer = device.layer;\n  let nstep = pixs.length;\n  let stepPx = floor(my.vheight / nstep);\n  let innerPx = floor(stepPx * (1 - my.margin));\n  more = 1;\n  let vyi = 0;\n  let vxi = 0;\n  while (more) {\n    let pix = pixs[vyi];\n    if (!pix) {\n      console.log('render_pix_devices_device no vyi', vyi);\n      vyi = 0;\n      break;\n    }\n    // console.log('render_pix_devices_device pix', pix);\n    if (pix.s) {\n      stepPx = pix.s;\n      innerPx = floor(stepPx * (1 - my.margin));\n    }\n    let item = pix.row[vxi];\n    if (!item) {\n      console.log('no vxi', vxi, 'vyi', vyi);\n      break;\n    }\n    // console.log('item', item);\n    let colr = item.c;\n    if (!colr) {\n      console.log('render_pix_devices_device no colr vxi', vxi, 'vyi', vyi);\n      break;\n    }\n    // console.log('render_pix_devices_device colr', colr, typeof colr);\n    let x = vxi * stepPx;\n    let y = vyi * stepPx;\n    // console.log('render_pix_devices_device x', x, y);\n\n    render_pix_devices_shape(layer, x, y, colr, innerPx);\n    vxi += 1;\n    if (vxi >= pix.row.length) {\n      vxi = 0;\n      vyi += 1;\n      if (vyi >= pixs.length) {\n        // If we have reached the end of the pixel grid for our device\n        // advance to next nstep\n        // if (device.uid == my.uid) {\n        //   console.log('render_pix_devices_device vyi', vyi);\n        //   nstepIndex_update();\n        // }\n        more = 0;\n        vyi = 0;\n      }\n    }\n  }\n}\n\nfunction render_pix_devices_cross(device, uid) {\n  let crossLayer = device.crossLayer;\n  crossLayer.clear();\n  if (!dbase_site_isActive(device)) {\n    return;\n  }\n  // Draw the chip on layer that persists\n  let chip = device.pixchips;\n  // let chip = device.dbase.chip;\n  if (!chip) {\n    return;\n  }\n\n  let stepPx = chip.s;\n  let colr = chip.c;\n  let x = chip.x * stepPx;\n  let y = chip.y * stepPx;\n  let innerPx = floor(stepPx * (1 - my.margin));\n  render_pix_devices_shape(device.layer, x, y, colr, innerPx);\n\n  // Draw the cross hairs on cleared crossLayer\n  x = floor(x + innerPx * 0.5);\n  y = floor(y + innerPx * 0.5);\n\n  let crossWt = stepPx - innerPx;\n  crossLayer.strokeWeight(crossWt);\n  crossLayer.stroke(colr);\n  crossLayer.line(x, 0, x, my.vheight);\n  crossLayer.line(0, y, my.vwidth, y);\n}\n\nfunction render_pix_devices_shape(layer, x, y, colr, innerPx) {\n  layer.fill(colr);\n  layer.noStroke();\n  // console.log('render_pix_devices_shape x', x, y);\n  let ww = innerPx;\n  let hh = innerPx;\n  let ns = my.shapeIndex % 4;\n  if (ns == 0) {\n    layer.rect(x, y, ww, hh);\n  } else if (ns == 1) {\n    layer.ellipse(x + ww / 2, y + hh / 2, ww, hh);\n  } else if (ns == 2) {\n    // triangle(x1, y1, x2, y2, x3, y3)\n    let x1 = x + ww / 2;\n    let y1 = y;\n    let x2 = x;\n    let y2 = y + hh;\n    let x3 = x + ww;\n    let y3 = y2;\n    layer.triangle(x1, y1, x2, y2, x3, y3);\n  } else {\n    let x1 = x + ww / 2;\n    let y1 = y + hh;\n    let x2 = x;\n    let y2 = y;\n    let x3 = x + ww;\n    let y3 = y2;\n    layer.triangle(x1, y1, x2, y2, x3, y3);\n  }\n}\n",
        "children": [],
        "fileType": "file",
        "_id": "6631b959faa2929586cd173c",
        "isSelectedFile": false,
        "createdAt": "2024-05-01T03:47:42.546Z",
        "updatedAt": "2024-05-01T03:47:42.546Z",
        "id": "6631b959faa2929586cd173c"
      },
      {
        "name": "ui_init.js",
        "content": "//\n// my.canvas is created before ui_init call\n//\nfunction ui_init() {\n  //\n  ui_begin();\n\n  ui_init_row_1();\n\n  my.container_div = ui_div('container', '');\n  ui_set_hidden(my.container_div, my.settingsFlag);\n\n  my.ui_container = my.container_div;\n\n  ui_init_row_2();\n\n  ui_init_row_3();\n\n  ui_logSummary_div();\n\n  ui_init_update();\n\n  // Move the canvas below all the ui elements\n  let body_elt = document.querySelector('body');\n  let main_elt = document.querySelector('main');\n  body_elt.insertBefore(main_elt, null);\n\n  // https://developer.mozilla.org/en-US/docs/Web/API/Node/insertBefore\n  // insertBefore(newNode, referenceNode)\n  // referenceNode: if null, then newNode is inserted at the end of node's child nodes.\n}\n\nfunction ui_init_row_1() {\n  //\n  my.versionBtn = ui_createButton('v' + my.version.substring(2));\n  my.versionBtn.mousePressed(versionBtn_action);\n\n  my.settingsChk = ui_checkbox('Settings', my.settingsFlag);\n  my.settingsChk.changed(function () {\n    settingsFlag_changed(this.checked());\n  });\n\n  ui_span('ndevice', ' ndevice:' + my.ndevice);\n\n  ui_break();\n}\n\nfunction ui_init_row_2() {\n  //\n  my.logSummaryChk = ui_checkbox('LogSummary', my.logSummaryFlag);\n  my.logSummaryChk.changed(function () {\n    ui_logSummaryFlag_changed(this.checked());\n  });\n\n  my.logDetailChk = ui_checkbox('LogDetail', my.logDetailFlag);\n  my.logDetailChk.changed(function () {\n    ui_logDetailFlag_changed(this.checked());\n  });\n\n  my.scrollFlagChk = ui_checkbox('Scroll', my.scrollFlag);\n  my.scrollFlagChk.changed(function () {\n    scrollFlag_changed(this.checked());\n  });\n\n  if (my.isRemote) {\n    ui_break();\n  }\n\n  my.faceChk = ui_checkbox('Face', my.faceFlag);\n  my.faceChk.changed(function () {\n    faceFlag_changed(this.checked());\n  });\n\n  my.videoChk = ui_checkbox('Video', my.videoFlag);\n  my.videoChk.changed(function () {\n    videoFlag_changed(this.checked());\n  });\n\n  my.scanFlagChk = ui_checkbox('Scan', my.scanFlag);\n  my.scanFlagChk.changed(function () {\n    scanFlag_changed(this.checked());\n  });\n\n  my.storeFlagChk = ui_checkbox('Store', my.storeFlag);\n  my.storeFlagChk.changed(function () {\n    storeFlag_changed(this.checked());\n  });\n\n  ui_break();\n}\n\nfunction ui_init_row_3() {\n  //\n  my.roomName_input = ui_input('id_roomName_input', '' + my.roomName);\n  my.roomName_input.input(function () {\n    roomName_changed(this.value());\n  });\n  my.roomName_input.size(100);\n\n  my.nameDevice_input = ui_input('id_name_input', '' + my.nameDevice);\n  my.nameDevice_input.input(function () {\n    name_changed(this.value());\n  });\n  my.nameDevice_input.size(100);\n\n  ui_nstep_selection();\n\n  if (my.isRemote) {\n    ui_break();\n  }\n\n  my.updateBtn = ui_createButton('Update');\n  my.updateBtn.mousePressed(updateBtn_action);\n\n  my.removeAppBtn = ui_createButton(' Remove App');\n  my.removeAppBtn.mousePressed(removeAppAction);\n\n  ui_break();\n}\n\nfunction ui_nstep_selection() {\n  ui_span('nstep_label', ' nstep:');\n  let aSel = ui_select('nstep_select');\n  let opts = [8, 16, 32, 64, 128, 4, 2, 1];\n  // !!@ mstep set to 8 but 16 sometimes taking effect in db update\n  // let my = { nstep: 8,\n  // let opts = [16, 32, 64, 128, 8, 4, 2, 1];\n  for (let ent of opts) {\n    aSel.option(ent, ent);\n  }\n  aSel.selected(my.nstep);\n  aSel.changed(function () {\n    nstep_changed(this.value());\n  });\n  my.nstep_selection = aSel;\n}\n\nfunction ui_init_update() {\n  ui_begin_update();\n  ui_span('ndevice', ' ndevice:' + my.ndevice);\n  ui_init_update_names();\n  ui_break();\n  ui_init_update_xy();\n  ui_init_update_rgb();\n  my.ui_last = ui_break();\n}\n\nfunction ui_init_update_xy() {\n  let x = my.track_xi * my.stepPx;\n  let y = my.track_yi * my.stepPx;\n  x = (x + '').padStart(3, '0');\n  y = (y + '').padStart(3, '0');\n  let str = ` x: ${x} y: ${y}`;\n  my.report = ui_span('report', str);\n}\n\nfunction ui_init_update_rgb() {\n  let colr = my.videoColor;\n  if (!colr) colr = [0, 0, 0];\n\n  let r = colr[0];\n  let g = colr[1];\n  let b = colr[2];\n\n  if (my.isRemote) {\n    ui_break();\n  }\n\n  let spanrgb = ui_span('rgb', ` &nbsp&nbsp&nbsp&nbsp`);\n  if (!spanrgb) return;\n\n  let spanr = ui_span('r', ` r: ${r} &nbsp`);\n  let spang = ui_span('g', ` g: ${g} &nbsp`);\n  let spanb = ui_span('b', ` b: ${b} &nbsp`);\n\n  spanrgb.elt.style.backgroundColor = `rgb(${r},${g},${b})`;\n  spanr.elt.style.backgroundColor = `rgb(${r},0,0)`;\n  spang.elt.style.backgroundColor = `rgb(0,${g},0)`;\n  spanb.elt.style.backgroundColor = `rgb(0,0,${b})`;\n\n  spanr.elt.style.color = 'white';\n  spang.elt.style.color = 'white';\n  spanb.elt.style.color = 'white';\n}\n\nfunction ui_init_update_names() {\n  // let name = my.nameDevice || '?';\n  // ui_span('name', ' name:' + name);\n  let uid = my.uid || '?';\n  ui_span('uid', ' uid:' + uid);\n}\n\n// --\n\nfunction versionBtn_action() {\n  let fs = fullscreen();\n  fullscreen(!fs);\n}\n\nfunction updateBtn_action() {\n  localStore_set();\n  // location.reload();\n}\n\nfunction removeAppAction() {\n  app_pix_grid_remove();\n  ui_log_clear();\n\n  // dbase_remove_mo_app();\n  dbase_remove_room();\n\n  localStorage.clear();\n  location.reload();\n}\n\n// --\n\nfunction roomName_changed(newValue) {\n  my.roomName = newValue;\n}\n\nfunction name_changed(newValue) {\n  my.nameDevice = newValue;\n}\n\nfunction scanFlag_changed(newValue) {\n  my.scanFlag = newValue;\n  if (my.scanFlag) {\n    my.animLoop.start();\n  }\n}\n\nfunction videoFlag_changed(newValue) {\n  my.videoFlag = newValue;\n}\n\nfunction scrollFlag_changed(newValue) {\n  my.scrollFlag = newValue;\n}\n\nfunction settingsFlag_changed(newValue) {\n  my.settingsFlag = newValue;\n  ui_set_hidden(my.container_div, my.settingsFlag);\n}\n\nfunction nstep_changed(newValue) {\n  my.nstep = parseFloat(newValue);\n  console.log('ui_nstep_selection', my.nstep);\n  nstep_init();\n  my.layer.clear();\n}\n\nfunction storeFlag_changed(newValue) {\n  my.storeFlag = newValue;\n}\n\nfunction faceFlag_changed(newValue) {\n  my.faceFlag = newValue;\n  my.facingMode = my.faceFlag ? 'user' : 'environment';\n  console.log('my.facingMode', my.facingMode);\n  video_create();\n}\n",
        "children": [],
        "fileType": "file",
        "_id": "6631b959faa2929586cd173d",
        "isSelectedFile": false,
        "createdAt": "2024-05-01T03:47:42.546Z",
        "updatedAt": "2024-05-01T03:47:42.546Z",
        "id": "6631b959faa2929586cd173d"
      }
    ],
    "createdAt": "2024-05-01T03:39:05.190Z",
    "id": "xXukebjmI"
  },
  {
    "_id": "TV2Cu5Rua",
    "name": "Rogue albacore copy",
    "files": [
      {
        "name": "root",
        "content": "",
        "children": [
          "664e77b402331f8da4a5f5b1",
          "664e77b402331f8da4a5f5b2",
          "664e77b402331f8da4a5f5b3"
        ],
        "fileType": "folder",
        "_id": "664e77b402331f8da4a5f5b0",
        "createdAt": "2024-05-23T20:21:36.496Z",
        "updatedAt": "2024-05-23T20:21:36.496Z",
        "isSelectedFile": false,
        "id": "664e77b402331f8da4a5f5b0"
      },
      {
        "name": "sketch.js",
        "content": "// https://editor.p5js.org/jht9629-gmail/sketches/TV2Cu5Rua\n// https://editor.p5js.org/AdityaRavi/sketches/dfw7Ymwut\n// Rogue albacore\n\n// const CANVAS_WIDTH = 600\n// const CANVAS_HEIGHT = 600\nlet fibs = [1,1]\nlet scale = 1\nlet minScale\n\nconst colors = ['#9edbff', '#787fff', '#7452ff', '#a1c6ff']\n\nfunction setup () {\n  createCanvas(windowWidth, windowHeight)\n  angleMode(DEGREES)\n  initFibs()\n  setMinScale()\n}\n\nfunction draw () {\n  translate(width/2, height/2)\n\n  for (let i = 0; i < fibs.length; i++) {\n    const scaledFib = fibs[i]*scale\n    const color = colors[i%4]\n    fill(color)\n    rect(0, 0, scaledFib, scaledFib)\n    arc(scaledFib, 0, 2*scaledFib, 2*scaledFib, 90, 180)\n    translate(scaledFib, scaledFib)\n    rotate(-90)\n  }\n\n  if (scale <= minScale) {\n    console.log('fibs.length;', fibs.length)\n    fibs = [1,1]\n    initFibs()\n    scale = 1\n    // noLoop()\n  } else {\n    scale *= 0.995\n  }\n}\n\nfunction addFib () {\n  const fibLen = fibs.length\n\n  fibs.push(fibs[fibLen-1] + fibs[fibLen-2])\n}\n\nfunction initFibs () {\n  for(let i = 0; i < 25; i++) {\n    addFib()\n  }\n}\n\nfunction setMinScale () {\n  const fibLen = fibs.length\n\n  minScale = fibs[fibLen-5]/fibs[fibLen-1]\n}",
        "children": [],
        "fileType": "file",
        "_id": "664e77b402331f8da4a5f5b2",
        "isSelectedFile": true,
        "createdAt": "2024-05-23T20:21:36.496Z",
        "updatedAt": "2024-05-23T20:21:36.496Z",
        "id": "664e77b402331f8da4a5f5b2"
      },
      {
        "name": "index.html",
        "content": "<!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.1.9/p5.js\"></script>\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.1.9/addons/p5.sound.min.js\"></script>\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"style.css\">\n    <meta charset=\"utf-8\" />\n\n  </head>\n  <body>\n    <script src=\"sketch.js\"></script>\n  </body>\n</html>\n",
        "children": [],
        "fileType": "file",
        "_id": "664e77b402331f8da4a5f5b1",
        "createdAt": "2024-05-23T20:21:36.496Z",
        "updatedAt": "2024-05-23T20:21:36.496Z",
        "isSelectedFile": false,
        "id": "664e77b402331f8da4a5f5b1"
      },
      {
        "name": "style.css",
        "content": "html, body {\n  margin: 0;\n  padding: 0;\n}\ncanvas {\n  display: block;\n}\n",
        "children": [],
        "fileType": "file",
        "_id": "664e77b402331f8da4a5f5b3",
        "createdAt": "2024-05-23T20:21:36.496Z",
        "updatedAt": "2024-05-23T20:21:36.496Z",
        "isSelectedFile": false,
        "id": "664e77b402331f8da4a5f5b3"
      }
    ],
    "createdAt": "2024-05-22T22:54:45.288Z",
    "updatedAt": "2024-05-23T20:21:36.496Z",
    "id": "TV2Cu5Rua"
  },
  {
    "_id": "9m7nX-2Bxy",
    "name": "video-radial-perlin",
    "updatedAt": "2024-05-01T03:47:42.366Z",
    "files": [
      {
        "name": "root",
        "content": "",
        "children": [
          "6631b959faa2929586cd173f",
          "6631b959faa2929586cd1740",
          "6631b959faa2929586cd1741"
        ],
        "fileType": "folder",
        "_id": "6631b959faa2929586cd173e",
        "createdAt": "2024-05-01T03:47:42.366Z",
        "updatedAt": "2024-05-01T03:47:42.366Z",
        "isSelectedFile": false,
        "id": "6631b959faa2929586cd173e"
      },
      {
        "name": "index.html",
        "content": "<!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/p5.js\"></script>\n    <!-- <script src=\"https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/addons/p5.sound.min.js\"></script> -->\n\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"https://molab-itp.github.io/p5moRelease/lib/66/style.css\"/>\n    <!-- <link rel=\"stylesheet\" type=\"text/css\" href=\"../../../p5moLibrary/src/lib/style.css?v=81\" /> -->\n\n    <style></style>\n  </head>\n  <body>\n    <main></main>\n\n<!--     <script type=\"module\" src=\"https://molab-itp.github.io/p5moRelease/lib/70/a_lib.js\"></script> -->\n    <!-- <script type=\"module\" src=\"../../p5moLibrary/src/lib/a_lib.js\"></script> -->\n\n    <script src=\"sketch.js\"></script>\n  </body>\n</html>\n",
        "children": [],
        "fileType": "file",
        "_id": "6631b959faa2929586cd173f",
        "isSelectedFile": false,
        "createdAt": "2024-05-01T03:47:42.366Z",
        "updatedAt": "2024-05-01T03:47:42.366Z",
        "id": "6631b959faa2929586cd173f"
      },
      {
        "name": "sketch.js",
        "content": "// https://editor.p5js.org/jht9629-gmail/sketches/9m7nX-2Bxy\n// video-radial-perlin\n\n// https://editor.p5js.org/xxxx\n// https://editor.p5js.org/jht9629-gmail/sketches/Aap84EcU_\n// video radial perlin pix\n\nlet npix = 64;\nlet nwidth = 480;\nlet nheight = 640;\nlet xgap = nwidth / 4;\nlet ygap = nheight / 4;\nlet x0;\nlet y0;\nlet capture;\nlet ang = 0;\nlet astep = 0.3;\nlet astart = 0; //180;\nlet aend = 360;\nlet rscale = 2;\nlet routterScale = 1;\n\nlet phase = 0;\nlet zoff = 0;\nlet noiseMax = 5;\n\nlet img2;\n\nfunction setup() {\n  createCanvas(nwidth, nheight);\n  capture = createCapture(VIDEO);\n  capture.size(width, height);\n  capture.hide();\n  x0 = int(nwidth / 2);\n  y0 = int(nheight / 2);\n}\n\nfunction draw() {\n  // colorMode(HSB);\n  strokeWeight(1);\n  // background(0);\n\n  // image(img, dx, dy, dWidth, dHeight, sx, sy, [sWidth], [sHeight],\n  let img = capture.get();\n  img2 = img.get();\n  img2.resize(npix, 0);\n  image(img2, 0, 0, nwidth, nheight);\n\n  draw_rad(img);\n  // draw_noise()\n}\n\nfunction draw_rad(img) {\n  for (let ang = astart; ang < aend; ang += astep) {\n    let r1 = xgap / 2;\n    let rang = radians(ang);\n    // let x1 = r1 * cos(rang);\n    // let y1 = r1 * sin(rang);\n\n    let xoff = map(cos(rang + phase), -1, 1, 0, noiseMax);\n    let yoff = map(sin(rang + phase), -1, 1, 0, noiseMax);\n    let r2 = map(noise(xoff, yoff, zoff), 0, 1, r1, r1 * rscale);\n    let x1 = r2 * cos(rang);\n    let y1 = r2 * sin(rang);\n\n    let c1 = img.get(x0 + x1, y0 + y1);\n    stroke(c1);\n    fill(x1);\n    fill(0);\n    circle(x0 + x1, y0 + y1, 5);\n\n    let r3 = nwidth * routterScale + random(-5, 5);\n    let x2 = r3 * cos(rang);\n    let y2 = r3 * sin(rang);\n    line(x0 + x1, y0 + y1, x0 + x2, y0 + y2);\n  }\n  phase += 0.003;\n  zoff += 0.01;\n}\n\nfunction draw_noise() {\n  // background(0);\n  translate(width / 2, height / 2);\n  stroke(255);\n  strokeWeight(2);\n  noFill();\n  beginShape();\n  // let noiseMax = slider.value();\n  for (let a = 0; a < TWO_PI; a += radians(5)) {\n    let xoff = map(cos(a + phase), -1, 1, 0, noiseMax);\n    let yoff = map(sin(a + phase), -1, 1, 0, noiseMax);\n    let r = map(noise(xoff, yoff, zoff), 0, 1, 100, height / 2);\n    let x = r * cos(a);\n    let y = r * sin(a);\n    vertex(x, y);\n  }\n  endShape(CLOSE);\n  phase += 0.003;\n  zoff += 0.01;\n}\n\n// https://editor.p5js.org/jht1900/sketches/TWxfoAfA6\n// video radial perlin\n\n// https://editor.p5js.org/codingtrain/sketches/sy1p1vnQn\n// Polar Perlin Noise Loop\n\n// https://editor.p5js.org/jht1900/sketches/ydWiCsI2z\n// video radial\n\n// https://editor.p5js.org/jht1900/sketches/-Ypn6ODK_\n// video scan radial\n\n// https://editor.p5js.org/jht1493/sketches/mEXETIijv\n// video scan gap center\n\n// https://editor.p5js.org/jht1493/sketches/oHVI5tU4BP\n// video scan gap\n\n// https://editor.p5js.org/jht1493/sketches/Q9jdcICpW\n// video scan mouseY\n\n// https://editor.p5js.org/jht1493/sketches/gnx2IQn1N\n// video scan\n\n// https://github.com/processing/p5.js/wiki/Beyond-the-canvas#capture-live-video\n\n// https://editor.p5js.org/jht1900/sketches/PLn3zH1Gd\n// video radial perlin pix\n\n// https://editor.p5js.org/jht9629-nyu/sketches/J2p8pZTNH\n// video radial perlin pix\n",
        "children": [],
        "fileType": "file",
        "_id": "6631b959faa2929586cd1740",
        "isSelectedFile": true,
        "createdAt": "2024-05-01T03:47:42.366Z",
        "updatedAt": "2024-05-01T03:47:42.366Z",
        "id": "6631b959faa2929586cd1740"
      },
      {
        "name": "style.css",
        "content": "html, body {\n  margin: 0;\n  padding: 0;\n}\ncanvas {\n  display: block;\n}\n",
        "children": [],
        "fileType": "file",
        "_id": "6631b959faa2929586cd1741",
        "isSelectedFile": false,
        "createdAt": "2024-05-01T03:47:42.366Z",
        "updatedAt": "2024-05-01T03:47:42.366Z",
        "id": "6631b959faa2929586cd1741"
      }
    ],
    "createdAt": "2024-05-01T03:39:05.385Z",
    "id": "9m7nX-2Bxy"
  },
  {
    "_id": "2hB-Joyqdk",
    "name": "video-radial-scan",
    "updatedAt": "2024-05-01T03:47:42.186Z",
    "files": [
      {
        "name": "root",
        "content": "",
        "children": [
          "6631b959faa2929586cd1743",
          "6631b959faa2929586cd1744",
          "6631b959faa2929586cd1745"
        ],
        "fileType": "folder",
        "_id": "6631b959faa2929586cd1742",
        "createdAt": "2024-05-01T03:47:42.186Z",
        "updatedAt": "2024-05-01T03:47:42.186Z",
        "isSelectedFile": false,
        "id": "6631b959faa2929586cd1742"
      },
      {
        "name": "index.html",
        "content": "<!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/p5.min.js\"></script>\n    <!-- <script src=\"https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/addons/p5.sound.min.js\"></script> -->\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"style.css\" />\n    <meta charset=\"utf-8\" />\n  </head>\n  <body>\n    <main></main>\n    <script src=\"sketch.js\"></script>\n  </body>\n</html>\n",
        "children": [],
        "fileType": "file",
        "_id": "6631b959faa2929586cd1743",
        "isSelectedFile": false,
        "createdAt": "2024-05-01T03:47:42.186Z",
        "updatedAt": "2024-05-01T03:47:42.186Z",
        "id": "6631b959faa2929586cd1743"
      },
      {
        "name": "sketch.js",
        "content": "// https://editor.p5js.org/jht9629-gmail/sketches/2hB-Joyqdk\n// video-radial-scan\n\n// https://editor.p5js.org/jht9629-nyu/sketches/hmPJyOAk1\n// video scan radial bounce\n\nlet my = {};\n\nfunction setup() {\n  my_setup();\n  my_resize();\n\n  createCanvas(my.width, my.height);\n\n  my.capture = createCapture(VIDEO);\n  my.capture.size(width, height);\n  my.capture.hide();\n}\n\nfunction draw() {\n  strokeWeight(my.strokeWeight);\n  my.img = my.capture.get();\n  let more = 1;\n  while (more) {\n    more = draw_out();\n    if (!my.faster) more = 0;\n  }\n}\n\nfunction my_setup() {\n  my.faster = 1;\n\n  my.strokeWeight = 10;\n  my.rim = 5;\n  my.angle = 0;\n  my.angleStep = 1;\n\n  my.xstep = 1;\n  my.xstepDir = 1;\n  my.xstepDownFactor = 4;\n  my.xposStart = 0;\n  my.xpos = my.xposStart;\n\n  my.secsPerUpdate = 0.1;\n  // my.secsPerUpdate = 0.01;\n  my.secsDelta = 0;\n\n  // my.x0;\n  // my.y0;\n  // my.capture;\n  // my.img;\n}\n\nfunction my_resize() {\n  my.width = windowWidth;\n  my.height = windowHeight;\n  my.x0 = int(my.width / 2);\n  my.y0 = int(my.height / 2);\n  my.xposEnd = my.height;\n}\n\nfunction draw_out() {\n  // colorMode(HSB);\n\n  let r = my.xpos / 2;\n  let rang = radians(my.angle);\n  let x1 = r * cos(rang);\n  let y1 = r * sin(rang);\n\n  let c1 = my.img.get(my.x0 + x1, my.y0 + y1);\n  stroke(c1);\n  fill(c1);\n  circle(my.x0 + x1, my.y0 + y1, my.rim);\n\n  let r2 = my.width;\n  let x2 = r2 * cos(rang);\n  let y2 = r2 * sin(rang);\n  line(my.x0 + x1, my.y0 + y1, my.x0 + x2, my.y0 + y2);\n\n  my.angle = my.angle + my.angleStep;\n  if (my.angle > 360) {\n    my.angle = 0;\n    next_step();\n    return 0;\n  }\n  return 1;\n}\n\nfunction next_step() {\n  my.secsDelta += deltaTime / 1000;\n  if (my.secsDelta < my.secsPerUpdate) {\n    return;\n  }\n  my.secsDelta = 0;\n  my.xpos += my.xstep;\n  if (my.xstep > 0 && my.xpos > my.xposEnd) {\n    my.xstepDir *= -1;\n    my.xstep = my.xstepDir * my.xstepDownFactor;\n    my.xpos += my.xstep;\n  } else if (my.xstep < 0 && my.xpos < my.xposStart) {\n    my.xstepDir *= -1;\n    my.xstep = my.xstepDir;\n    my.xpos += my.xstep;\n  }\n}\n\nfunction windowResized() {\n  resizeCanvas(windowWidth, windowHeight);\n  my_resize();\n}\n\n// https://editor.p5js.org/jht9629-nyu/sketches/OReZ4wOR5\n// video scan radial v5\n\n// https://editor.p5js.org/jht9629-nyu/sketches/7vllrM5d5\n// video scan radial v4\n\n// https://editor.p5js.org/jht9629-nyu/sketches/WdNVtxQzf\n// video scan radial v3\n\n// https://editor.p5js.org/jht9629-nyu/sketches/cKzXO8eUG\n// video scan radial v2\n\n// https://editor.p5js.org/jht1900/sketches/-Ypn6ODK_\n// video scan radial\n\n// https://editor.p5js.org/jht1493/sketches/mEXETIijv\n// video scan gap center\n\n// https://editor.p5js.org/jht1493/sketches/oHVI5tU4BP\n// video scan gap\n\n// https://editor.p5js.org/jht1493/sketches/Q9jdcICpW\n// video scan mouseY\n\n// https://editor.p5js.org/jht1493/sketches/gnx2IQn1N\n// video scan\n\n// https://github.com/processing/p5.js/wiki/Beyond-the-canvas#capture-live-video\n\n// https://editor.p5js.org/jht9629-nyu/sketches/nkw-sZXwN\n// video scan radial v6\n",
        "children": [],
        "fileType": "file",
        "_id": "6631b959faa2929586cd1744",
        "isSelectedFile": true,
        "createdAt": "2024-05-01T03:47:42.186Z",
        "updatedAt": "2024-05-01T03:47:42.186Z",
        "id": "6631b959faa2929586cd1744"
      },
      {
        "name": "style.css",
        "content": "html, body {\n  margin: 0;\n  padding: 0;\n}\ncanvas {\n  display: block;\n}\n",
        "children": [],
        "fileType": "file",
        "_id": "6631b959faa2929586cd1745",
        "isSelectedFile": false,
        "createdAt": "2024-05-01T03:47:42.186Z",
        "updatedAt": "2024-05-01T03:47:42.186Z",
        "id": "6631b959faa2929586cd1745"
      }
    ],
    "createdAt": "2024-05-01T03:39:05.572Z",
    "id": "2hB-Joyqdk"
  },
  {
    "_id": "d5kyMUVSNA",
    "name": "videoKit",
    "updatedAt": "2024-05-01T03:47:41.990Z",
    "files": [
      {
        "name": "root",
        "content": "",
        "children": [
          "6631b959faa2929586cd1747",
          "6631b959faa2929586cd1748",
          "6631b959faa2929586cd1749",
          "6631b959faa2929586cd174a",
          "6631b959faa2929586cd174b",
          "6631b959faa2929586cd174c",
          "6631b959faa2929586cd174d",
          "6631b959faa2929586cd174e"
        ],
        "fileType": "folder",
        "_id": "6631b959faa2929586cd1746",
        "createdAt": "2024-05-01T03:47:41.990Z",
        "updatedAt": "2024-05-01T03:47:41.990Z",
        "isSelectedFile": false,
        "id": "6631b959faa2929586cd1746"
      },
      {
        "name": "a_sketch.js",
        "content": "// https://editor.p5js.org/jht9629-gmail/sketches/d5kyMUVSNA\n// videoKit\n\n// https://editor.p5js.org/jht9629-gmail/sketches/u_Blv5bOK\n// p5moExamples video 370a\n\nlet videoKit; // home for library routines\n\nfunction setup() {\n  // Report startup time for debugging\n  let lapse = window.performance.now() - a_start_now;\n  console.log('setup lapse', lapse);\n\n  // Lowest pixel density for performance\n  pixelDensity(1);\n\n  // Need some starting dimensions for canvas.\n  // will get adjusted by videoKit later in startup\n  createCanvas(100, 100);\n  //\n  // must call createCanvas before new p5videoKit\n\n  videoKit = new p5videoKit(a_config);\n}\n\nfunction draw() {\n  videoKit.draw();\n}\n\nlet a_config = {\n  // hide_ui: 1,\n  // effects for import, will appear at top of the effect menu\n  // an EFFECT can have many PROPERTIES specific to the effect\n  // for example canvas size, color, cell size,\n  // to see this, choose \"circle\" in Effect1 and Effect2,\n  // then choose different properties like number of circles per frame\n  // or the video source\n  // the \"effects\" array creates a pull-down menu\n  // which offers a first selection of effects added to the VideoKit library,\n  // you could add some more !!!!\n  effects: [\n    { label: 'a_live_tile_host', factory: eff_a_live_tile_host },\n    { label: 'a_slit_scan', factory: eff_a_slit_scan },\n    { label: 'a_ncell', factory: eff_a_ncell },\n    { label: 'a_radial', factory: eff_a_radial },\n  ],\n  // settings for import, will appear in the settings menu\n  // SETTINGS will load a save .json file with predefined values\n  // for all the settings associated with the effect\n  // \"settings\" is an array of\n  // settings: [\n  // { label: 'videoKit', import_path: 'settings/videoKit.json' },\n  // ],\n};\n\n// track startup time for debugging\nlet a_start_now = window.performance.now();\n\n// disables FES to improve performance\np5.disableFriendlyErrors = true;\n\n// https://github.com/molab-itp/p5moExamples.git\n\n// https://molab-itp.github.io/p5moExamples/examples/video/?a=%7B%22setting%22%3A%22%22%2C%22comment%22%3A%22bright%20%7C%20diff%22%2C%22back_color%22%3A200%2C%22room_name%22%3A%22VideoKit-Room-1%22%2C%22patch_layout%22%3A%22Single%22%2C%22canvas_size%22%3A%22960x540%22%2C%22capture_size%22%3A%22default%22%2C%22render_size%22%3A%22Canvas%22%2C%22chat_name%22%3A%22jht%22%2C%22chat_chk%22%3A0%2C%22live_index%22%3A0%2C%22live_chk%22%3A0%2C%22urects_lock%22%3A0%2C%22urects_count%22%3A2%2C%22canvas_resize_ref%22%3A%22%22%2C%22canvas_data_chk%22%3A0%2C%22mediaDiv_states%22%3A%5Bnull%2C%7B%22vis%22%3A0%2C%22mute%22%3A1%7D%5D%2C%22patches%22%3A%5B%7B%22eff_spec%22%3A%7B%22ipatch%22%3A0%2C%22imedia%22%3A1%2C%22eff_label%22%3A%22bright%22%2C%22urect%22%3A%7B%22width%22%3A960%2C%22height%22%3A540%2C%22x0%22%3A0%2C%22y0%22%3A0%7D%7D%2C%22eff_props%22%3A%7B%22ncell%22%3A16%2C%22back_color%22%3A0%2C%22src_color%22%3A255%2C%22fill%22%3A1%2C%22invert%22%3A1%2C%22shape%22%3A%22rect%22%7D%7D%2C%7B%22eff_spec%22%3A%7B%22ipatch%22%3A1%2C%22imedia%22%3A1%2C%22eff_label%22%3A%22diff%22%2C%22urect%22%3A%7B%22width%22%3A960%2C%22height%22%3A540%2C%22x0%22%3A0%2C%22y0%22%3A0%7D%7D%2C%22eff_props%22%3A%7B%22threshold%22%3A16%2C%22period%22%3A0%2C%22back_color%22%3A%22clear%22%2C%22smooth%22%3A0%2C%22hold%22%3A0%7D%7D%5D%7D\n// bright | diff\n\n// https://editor.p5js.org/shawn/sketches/jZQ64AMJc\n// p5LiveMedia Test Video\n// https://github.com/vanevery/p5LiveMedia\n",
        "children": [],
        "fileType": "file",
        "_id": "6631b959faa2929586cd1747",
        "isSelectedFile": true,
        "createdAt": "2024-05-01T03:47:41.990Z",
        "updatedAt": "2024-05-01T03:47:41.990Z",
        "id": "6631b959faa2929586cd1747"
      },
      {
        "name": "assets",
        "content": "",
        "children": [],
        "fileType": "folder",
        "_id": "6631b959faa2929586cd1748",
        "createdAt": "2024-05-01T03:47:41.990Z",
        "updatedAt": "2024-05-01T03:47:41.990Z",
        "isSelectedFile": false,
        "id": "6631b959faa2929586cd1748"
      },
      {
        "name": "eff_a_live_tile_host.js",
        "content": "//\n// Show live media in grid with qr code\n//\nclass eff_a_live_tile_host {\n  static meta_props = [\n    { prop: 'ncell', selection: [3, 2, 3, 4, 5, 6, 7] },\n    { prop: 'width_div', selection: [1, 2] },\n    // { prop: 'qr_image_index', selection: [-1, 8, 4, 15, 17] },\n    // { prop: 'aspect_ratio', selection: ['9x16', '16x9'] },\n    { prop: 'period', selection: [5, -1, 0, 0.5, 1, 2, 3, 4, 5, 6, 10, 20, 30, 60] },\n    { prop: 'shift', selection: [1, 0] },\n    { prop: 'fit', selection: ['width', 'height'], br: 1 },\n    { prop: 'showQRCode', selection: [1, 0] },\n    { prop: 'autoHideQRCode', selection: [0, 1] },\n    {\n      prop: 'show now',\n      button: (inst, aPatch) => {\n        inst.showQRCode = 1;\n      },\n    },\n    {\n      prop: 'hide how',\n      button: (inst, aPatch) => {\n        inst.showQRCode = 0;\n        // QR is hidden, force overwrite of area with next video stream\n        inst.show_index = inst.qr_image_index;\n      },\n      br: 1,\n    },\n    { prop: 'image_url', textInput: './assets/qrcode0.png', style: 'width:40%' },\n  ];\n  constructor(props) {\n    console.log('eff_live_tile_host constructor');\n    Object.assign(this, props);\n    this.init();\n  }\n  prepareOutput() {\n    let videoKit = this.videoKit;\n    let n = videoKit.mediaDivCount();\n    let nshow = this.urects.length;\n    let layer = this.output;\n    let sindex = this.show_index;\n    for (let imedia = this.ifirst; imedia < n; imedia++) {\n      let urect = this.urects[sindex].urect;\n      let fitWidth = this.fitWidth;\n      videoKit.layerCopyInput(layer, { imedia, urect, fitWidth });\n      sindex = (sindex + 1) % nshow;\n    }\n    if (this.showQRCode && this.eff_qr) {\n      videoKit.layerCopyEffect(layer, this.eff_qr);\n    }\n    if (this.period_timer.check()) {\n      let nstep = n - this.ifirst;\n      let prior = this.show_index;\n      this.show_index = (this.show_index + nstep) % nshow;\n      if (prior > this.show_index && this.shift) {\n        this.show_index += 1;\n      }\n      if (this.autoHideQRCode && this.show_index == this.qr_image_index) {\n        this.showQRCode = 0;\n      }\n    }\n  }\n  deinit() {\n    this.output.remove();\n    this.videoKit.deinitEffect(this.eff_qr);\n  }\n  init() {\n    this.fitWidth = this.fit == 'width';\n    this.qr_image_index = -1;\n    let urmain = this.eff_spec.urect;\n    console.log('urmain', urmain);\n    this.output = createGraphics(urmain.width, urmain.height);\n    let videoKit = this.videoKit;\n    this.period_timer = new videoKit.PeriodTimer(this.period);\n    this.ifirst = videoKit.mediaDivLiveIndex();\n    this.imedia = this.ifirst;\n    this.effs_all = [];\n    this.urects = [];\n    this.show_index = 0;\n    let imedia = -1;\n    let x0 = urmain.x0;\n    let y0 = urmain.y0;\n    let width_div = this.width_div;\n    let wedge = x0 + urmain.width;\n    let hedge = y0 + urmain.height;\n    let xstep = wedge / this.ncell / width_div;\n    let ystep = hedge / this.ncell;\n    let n = this.ncell * this.ncell * width_div;\n    let qrIndex = this.qr_image_index;\n    if (qrIndex < 0) {\n      qrIndex = n - 1;\n      this.qr_image_index = qrIndex;\n    }\n    for (let index = 0; index < n; index++) {\n      let urect = { x0, y0, width: xstep, height: ystep };\n      let props = {};\n      if (index == qrIndex) {\n        let eff_label = 'image_url';\n        props = { image_url: this.image_url };\n        this.eff_qr = videoKit.createEffect({ eff_label, imedia, urect, props });\n      }\n      this.urects.push({ urect });\n      x0 += xstep;\n      if (x0 + xstep > wedge) {\n        x0 = urmain.x0;\n        y0 += ystep;\n        if (y0 + ystep > hedge) {\n          y0 = urmain.y0;\n        }\n      }\n    }\n  }\n}\n\n// p5videoKit.prototype.createEffect = function ({eff_label, imedia, urect, props}) {\n",
        "children": [],
        "fileType": "file",
        "_id": "6631b959faa2929586cd1749",
        "isSelectedFile": false,
        "createdAt": "2024-05-01T03:47:41.990Z",
        "updatedAt": "2024-05-01T03:47:41.990Z",
        "id": "6631b959faa2929586cd1749"
      },
      {
        "name": "eff_a_ncell.js",
        "content": "//\n// Show a ncell by ncell grid of effects\n// eff_labels is array of effects to cycle between\n//\nclass eff_a_ncell {\n  static meta_props = [\n    { prop: 'ncell', selection: [2, 3, 4] },\n    { prop: 'effect_labels', textInput: 'circle,maze,bright,grid', style: 'width:40%;font-size:24px' },\n  ];\n  constructor(props) {\n    console.log('eff_ncell');\n    Object.assign(this, props);\n    this.init();\n  }\n  prepareOutput() {\n    let videoKit = this.videoKit;\n    for (let eff of this.effs) {\n      videoKit.prepareOutput(eff);\n    }\n    for (let eff of this.effs) {\n      videoKit.ouputToCanvas(eff);\n    }\n  }\n  deinit() {\n    for (let eff of this.effs) {\n      videoKit.deinitEffect(eff);\n    }\n  }\n  init() {\n    this.effs = [];\n    // let eff_labels = ['circle', 'maze', 'bright', 'grid'];\n    let eff_labels = this.effect_labels.split(',');\n    // let eff_labels = ['circle'];\n    let videoKit = this.videoKit;\n    let imedia = 1;\n    let uout = this.eff_spec.urect;\n    let x0 = uout.x0;\n    let y0 = uout.y0;\n    let uw = x0 + uout.width;\n    let uh = y0 + uout.height;\n    let xstep = uw / this.ncell;\n    let ystep = uh / this.ncell;\n    let n = this.ncell * this.ncell;\n    for (let index = 0; index < n; index++) {\n      let urect = { x0, y0, width: xstep, height: ystep };\n      let eff_label = eff_labels[index % eff_labels.length];\n      let props = {};\n      let eff = videoKit.createEffect({ eff_label, imedia, urect, props });\n      // console.log('eff_ncell index', index, 'eff', eff);\n      this.effs.push(eff);\n      x0 += xstep;\n      if (x0 >= uw) {\n        x0 = uout.x0;\n        y0 += ystep;\n        if (y0 >= uh) {\n          y0 = uout.y0;\n        }\n      }\n    }\n  }\n}\n\n// p5videoKit.prototype.createEffect = function ({eff_label, imedia, urect, props}) {\n",
        "children": [],
        "fileType": "file",
        "_id": "6631b959faa2929586cd174a",
        "isSelectedFile": false,
        "createdAt": "2024-05-01T03:47:41.990Z",
        "updatedAt": "2024-05-01T03:47:41.990Z",
        "id": "6631b959faa2929586cd174a"
      },
      {
        "name": "eff_a_radial.js",
        "content": "//\n// lines radiating out from center\n\nclass eff_a_radial {\n  static meta_props = [\n    // { prop: 'num_prop', label: 'prop1', selection: [0, 1] },\n    { prop: 'rim', selection: [5, 0, 1, 10] },\n    { prop: 'period', selection: [0.01, 0.5, 1, 0.001, 0] },\n    { prop: 'strokeWeight', selection: [10, 5, 4, 1, 20] },\n  ];\n\n  constructor(props) {\n    let my = this;\n    Object.assign(my, props);\n    console.log('eff_a_radia_bounce props', props);\n    my.width = my.input.width;\n    my.height = my.input.height;\n    my.output = createGraphics(my.width, my.height);\n    my.setup();\n    my.resize();\n  }\n\n  prepareOutput() {\n    let my = this;\n    my.output.strokeWeight(my.strokeWeight);\n    my.img = my.input.get();\n    let more = 1;\n    while (more) {\n      more = my.draw_out();\n      if (!my.faster) more = 0;\n    }\n  }\n\n  setup() {\n    let my = this;\n    my.faster = 1;\n    // my.strokeWeight = 10;\n    // my.rim = 5;\n    my.angle = 0;\n    my.angleStep = 1;\n    my.xstep = 1;\n    my.xstepDir = 1;\n    my.xstepDownFactor = 4;\n    my.xposStart = 0;\n    my.xpos = my.xposStart;\n    // my.period = 0.1;\n    my.secsDelta = 0;\n    // my.x0;\n    // my.y0;\n    // my.img;\n  }\n\n  resize() {\n    let my = this;\n    my.x0 = int(my.width / 2);\n    my.y0 = int(my.height / 2);\n    my.xposEnd = my.height;\n  }\n\n  draw_out() {\n    let my = this;\n    let layer = my.output;\n    let r = my.xpos / 2;\n    let rang = radians(my.angle);\n    let x1 = r * cos(rang);\n    let y1 = r * sin(rang);\n\n    let c1 = my.img.get(my.x0 + x1, my.y0 + y1);\n    layer.stroke(c1);\n    layer.fill(c1);\n    layer.circle(my.x0 + x1, my.y0 + y1, my.rim);\n\n    let r2 = my.width;\n    let x2 = r2 * cos(rang);\n    let y2 = r2 * sin(rang);\n    layer.line(my.x0 + x1, my.y0 + y1, my.x0 + x2, my.y0 + y2);\n\n    my.angle = my.angle + my.angleStep;\n    if (my.angle > 360) {\n      my.angle = 0;\n      my.next_step();\n      return 0;\n    }\n    return 1;\n  }\n\n  next_step() {\n    let my = this;\n    my.secsDelta += deltaTime / 1000;\n    if (my.secsDelta < my.period) {\n      return;\n    }\n    my.secsDelta = 0;\n    my.xpos += my.xstep;\n    if (my.xstep > 0 && my.xpos > my.xposEnd) {\n      my.xstepDir *= -1;\n      my.xstep = my.xstepDir * my.xstepDownFactor;\n      my.xpos += my.xstep;\n    } else if (my.xstep < 0 && my.xpos < my.xposStart) {\n      my.xstepDir *= -1;\n      my.xstep = my.xstepDir;\n      my.xpos += my.xstep;\n    }\n  }\n}\n\n// https://editor.p5js.org/jht9629-nyu/sketches/OReZ4wOR5\n// video scan radial v5\n\n// https://editor.p5js.org/jht9629-nyu/sketches/7vllrM5d5\n// video scan radial v4\n\n// https://editor.p5js.org/jht9629-nyu/sketches/WdNVtxQzf\n// video scan radial v3\n\n// https://editor.p5js.org/jht9629-nyu/sketches/cKzXO8eUG\n// video scan radial v2\n\n// https://editor.p5js.org/jht1900/sketches/-Ypn6ODK_\n// video scan radial\n\n// https://editor.p5js.org/jht1493/sketches/mEXETIijv\n// video scan gap center\n\n// https://editor.p5js.org/jht1493/sketches/oHVI5tU4BP\n// video scan gap\n\n// https://editor.p5js.org/jht1493/sketches/Q9jdcICpW\n// video scan mouseY\n\n// https://editor.p5js.org/jht1493/sketches/gnx2IQn1N\n// video scan\n\n// https://github.com/processing/p5.js/wiki/Beyond-the-canvas#capture-live-video\n\n// https://editor.p5js.org/jht9629-nyu/sketches/nkw-sZXwN\n// video scan radial v6\n\n// https://editor.p5js.org/jht9629-nyu/sketches/hmPJyOAk1\n// video scan radial bounce\n",
        "children": [],
        "fileType": "file",
        "_id": "6631b959faa2929586cd174b",
        "isSelectedFile": false,
        "createdAt": "2024-05-01T03:47:41.990Z",
        "updatedAt": "2024-05-01T03:47:41.990Z",
        "id": "6631b959faa2929586cd174b"
      },
      {
        "name": "eff_a_slit_scan.js",
        "content": "//\n// converting video slit scan to a effect pluging example\n//\n// effects have to be declared as a class\n// convention is that properties in UI\n// appear in meta_props array as drop-downs\n// goal: you don't have to write the code\n// you just have to select the drop-downs\n// save a json with your selections\n\nclass eff_a_slit_scan {\n  static meta_props = [\n    // { prop: 'num_prop', label: 'prop1', selection: [0, 1] },\n    { prop: 'expand', selection: [1, 2, 3] },\n    { prop: 'step', selection: [1, 0.1, 0.2, 2, 4] },\n    { prop: 'period', selection: [-1, 0, 1, 2, 3] },\n  ];\n\n  constructor(props) {\n    let my = this;\n    //\n    Object.assign(my, props);\n    console.log('eff_a_slit_scan props.expand', props.expand);\n    // console.log('eff_a_slit_scan constructor width, height', width, height);\n\n    my.vw = my.input.width;\n    my.vh = my.input.height;\n    console.log('eff_a_slit_scan constructor input vw vh', my.vw, my.vh);\n\n    my.output = createGraphics(my.vw * my.expand, my.vh);\n    // my.output.background(255);\n\n    my.x = 0;\n\n    my.period_timer = new my.videoKit.PeriodTimer(my.period);\n  }\n  prepareOutput() {\n    let my = this;\n    my.input.loadPixels();\n    my.output.copy(my.input, my.vw / 2, 0, 1, my.vh, my.x, 0, 1, my.vh);\n    my.x = my.x + my.step;\n    if (my.x > my.output.width) {\n      my.x = 0;\n    }\n    if (my.period_timer.check()) {\n      my.output.clear();\n    }\n  }\n}\n\n// https://editor.p5js.org/jht9629-nyu/sketches/hw8qkUuAw\n// https://editor.p5js.org/codingtrain/sketches/B1L5j8uk4\n// Slit Scan\n// this is original code that would work in p5js editor\n// and is adapted to the VideoKit plug-in model\n// the sketches in the effects directory plug-in\n// to the video kit\n// certain requirements in order to plug-in:\n// 1. meta_pro array\n// 2. constructor for the class\n// analogous to setup only called once\n// 3. prepareOutput() analogous to draw\n// repeatedly called for every frame\n// This approach allows you to explore and compare\n// the same effect with different settings\n// side by side\n// The dropdown menus make each effect modular\n// allowing you to define your own settings\n// and create you own version of the effect\n\n// let video;\n// let x = 0;\n\n// function setup() {\n//   createCanvas(400, 240);\n//   pixelDensity(1);\n//   video = createCapture(VIDEO);\n//   video.size(320, 240);\n//   background(51);\n// }\n\n// function draw() {\n//   // ?? is this needed\n//   // video.loadPixels();\n//   let w = video.width;\n//   let h = video.height;\n//   copy(video, w/2, 0, 1, h, x, 0, 1, h);\n//   x = x + 1;\n//   if (x > width) {\n//     x = 0;\n//   }\n// }\n",
        "children": [],
        "fileType": "file",
        "_id": "6631b959faa2929586cd174c",
        "isSelectedFile": false,
        "createdAt": "2024-05-01T03:47:41.990Z",
        "updatedAt": "2024-05-01T03:47:41.990Z",
        "id": "6631b959faa2929586cd174c"
      },
      {
        "name": "index.html",
        "content": "<!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.2/p5.js\"></script>\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.2/addons/p5.sound.min.js\"></script>\n\n    <script src=\"https://p5livemedia.itp.io/simplepeer.min.js\"></script>\n    <script src=\"https://p5livemedia.itp.io/socket.io.js\"></script>\n    <script src=\"https://p5livemedia.itp.io/p5livemedia.js\"></script>\n    <!-- <script src=\"https://unpkg.com/ml5@latest/dist/ml5.min.js\"></script> -->\n    <!-- Need to make ml5 explicit to avoid fetch failure in p5js editor -->\n    <script src=\"https://unpkg.com/ml5@0.12.2/dist/ml5.min.js\"></script>\n\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"https://molab-itp.github.io/p5moRelease/lib/47/style.css\" />\n    <!-- <link rel=\"stylesheet\" type=\"text/css\" href=\"../../../p5moLibrary/src/lib/style.css\" /> -->\n  </head>\n\n  <body>\n    <!-- @@[prod][dev] -->\n    <script type=\"module\" src=\"https://molab-itp.github.io/p5moRelease/videoKit/370/a_lib.js\"></script>\n    <!-- <script type=\"module\" src=\"../../p5videoKit/src/videoKit/a_lib.js?v=81\"></script> -->\n\n    <script src=\"eff_a_live_tile_host.js?v=81\"></script>\n    <script src=\"eff_a_ncell.js?v=81\"></script>\n    <script src=\"eff_a_slit_scan.js?v=81\"></script>\n    <script src=\"eff_a_radial.js?v=81\"></script>\n    <script src=\"a_sketch.js?v=81\"></script>\n    <!-- must remove ?v=81 in p5js editor to get correct version of script -->\n  </body>\n</html>\n",
        "children": [],
        "fileType": "file",
        "_id": "6631b959faa2929586cd174d",
        "isSelectedFile": false,
        "createdAt": "2024-05-01T03:47:41.990Z",
        "updatedAt": "2024-05-01T03:47:41.990Z",
        "id": "6631b959faa2929586cd174d"
      },
      {
        "name": "z-index-1.html",
        "content": "<!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    <!-- v1.7.0 -->\n    <!-- <script src=\"https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.7.0/p5.js\"></script> -->\n    <!-- <script src=\"https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.7.0/addons/p5.sound.min.js\"></script> -->\n\n    <!-- v1.8.0 -->\n    <!-- <script src=\"https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.8.0/p5.js\"></script> -->\n    <!-- <script src=\"https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.8.0/addons/p5.sound.min.js\"></script> -->\n\n    <!-- v1.9.0 -->\n    <!-- v1.9.1 -->\n    <!-- v1.9.2 -->\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.2/p5.js\"></script>\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.2/addons/p5.sound.min.js\"></script>\n\n    <script src=\"https://p5livemedia.itp.io/simplepeer.min.js\"></script>\n    <script src=\"https://p5livemedia.itp.io/socket.io.js\"></script>\n    <script src=\"https://p5livemedia.itp.io/p5livemedia.js\"></script>\n    <!-- <script src=\"https://unpkg.com/ml5@latest/dist/ml5.min.js\"></script> -->\n    <!-- Need to make ml5 explicit to avoid fetch failure in p5js editor -->\n    <script src=\"https://unpkg.com/ml5@0.12.2/dist/ml5.min.js\"></script>\n\n    <!--   \n    <script src=\"./external/lib/p5.min.js\"></script>\n    <script src=\"./external/lib/p5.sound.min.js\"></script>\n    <script src=\"./external/lib/simplepeer.min.js?v={{vers}}\"></script>\n    <script src=\"./external/lib/socket.io.js\"></script>\n    <script src=\"./external/lib/p5livemedia.js\"></script>\n    <script src=\"./external/lib/ml5.min.js\"></script>\n    -->\n\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n\n    <script>\n      // track startup time for debugging\n      let a_start_now = window.performance.now();\n    </script>\n\n    <!-- <link rel=\"stylesheet\" type=\"text/css\" href=\"style.css\" />  -->\n    <style>\n      @media only screen and (max-width: 600px) {\n        body,\n        button,\n        select,\n        input {\n          font-size: 4vw;\n        }\n      }\n      html,\n      body {\n        margin: 0;\n        padding: 0;\n      }\n      canvas {\n        display: block;\n      }\n    </style>\n    <meta charset=\"utf-8\" />\n  </head>\n\n  <body>\n    <!-- @@[prod][dev] -->\n    <script type=\"module\" src=\"https://molab-itp.github.io/p5moRelease/videoKit/368/a_lib.js\"></script>\n    <!-- <script type=\"module\" src=\"../../p5videoKit/src/videoKit/a_lib.js?v=81\"></script> -->\n\n    <script src=\"eff_a_slit_scan.js?v=81\"></script>\n    <script src=\"sketch.js?v=81\"></script>\n    <!-- must remove ?v=81 in p5js editor to get correct version of script -->\n  </body>\n</html>\n",
        "children": [],
        "fileType": "file",
        "_id": "6631b959faa2929586cd174e",
        "isSelectedFile": false,
        "createdAt": "2024-05-01T03:47:41.990Z",
        "updatedAt": "2024-05-01T03:47:41.990Z",
        "id": "6631b959faa2929586cd174e"
      }
    ],
    "createdAt": "2024-05-01T03:39:05.816Z",
    "id": "d5kyMUVSNA"
  },
  {
    "_id": "IOjRuqP4xL",
    "name": "vote",
    "updatedAt": "2024-05-01T03:47:41.789Z",
    "files": [
      {
        "name": "root",
        "content": "",
        "children": [
          "6631b959faa2929586cd1751",
          "6631b959faa2929586cd1752"
        ],
        "fileType": "folder",
        "_id": "6631b959faa2929586cd1750",
        "createdAt": "2024-05-01T03:47:41.789Z",
        "updatedAt": "2024-05-01T03:47:41.789Z",
        "isSelectedFile": false,
        "id": "6631b959faa2929586cd1750"
      },
      {
        "name": "index.html",
        "content": "<!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/p5.js\"></script>\n    <!-- <script src=\"https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/addons/p5.sound.min.js\"></script> -->\n\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"https://molab-itp.github.io/p5moRelease/lib/47/style.css\" />\n    <!-- <link rel=\"stylesheet\" type=\"text/css\" href=\"../../../p5moLibrary/src/lib/style.css\" /> -->\n\n    <style></style>\n  </head>\n  <body>\n    <main></main>\n\n    <script type=\"module\" src=\"https://molab-itp.github.io/p5moRelease/lib/47/a_lib.js\"></script>\n    <!-- <script type=\"module\" src=\"../../p5moLibrary/src/lib/a_lib.js\"></script> -->\n\n    <script src=\"sketch.js?v=81\"></script>\n    <!-- <script src=\"sketch.js\"></script> -->\n  </body>\n</html>\n",
        "children": [],
        "fileType": "file",
        "_id": "6631b959faa2929586cd1751",
        "isSelectedFile": false,
        "createdAt": "2024-05-01T03:47:41.789Z",
        "updatedAt": "2024-05-01T03:47:41.789Z",
        "id": "6631b959faa2929586cd1751"
      },
      {
        "name": "sketch.js",
        "content": "// https://editor.p5js.org/jht9629-gmail/sketches/IOjRuqP4xL\n// vote\n\n// https://editor.p5js.org/jht9629-nyu/sketches/EEafnQwr1\n// p5moExamples vote 47\n\n// all the functions start with \"dbase_\" are from p5moLibrary repo\n\n// participants can cast a numeric vote up or down\n\nlet my = {};\n\n// mo-vote/device/{uid}/vote\n//    individual vote\n\nfunction my_setup() {\n  let lowerMargin = 80; // Room for buttons\n  my.width = windowWidth;\n  my.height = windowHeight - lowerMargin;\n\n  // change to your firebase app\n  my.fireb_config = 'jht9629';\n  // my.fireb_config = 'jht1493';\n  // my.fireb_config = 'jhtitp';\n\n  my.dbase_rootPath = 'm0-@r-@w-';\n\n  // change to add a room in firebase real-time database\n  my.roomName = 'room1';\n\n  my.mo_app = 'mo-vote';\n  my.nameDevice = '';\n  //\n  my.vote_count = 0;\n  my.vote_total_count = 0;\n  my.device_values = {};\n\n  my.x = 0;\n  my.y = my.height / 2;\n  my.xstep = 1;\n  my.len = my.width * 0.8;\n\n  my.colorGold = [187, 165, 61];\n  my.colors = [[255, 0, 0], [0, 255, 0], my.colorGold];\n}\n\nfunction setup() {\n  my_setup(); // setup firebase configuration\n\n  my.canvas = createCanvas(my.width, my.height);\n  // noCanvas();\n\n  dbase_app_init({ completed: startup_completed }); // callback function when app init\n\n  create_ui();\n}\n\nfunction draw() {\n  background(0);\n  fill(my.colors[abs(my.vote_count) % my.colors.length]);\n  circle(my.x, my.y, my.len);\n  my.x = (my.x + my.xstep + width) % width;\n\n  calc_votes();\n\n  my.vote_count_span.html(my.vote_count);\n  my.vote_total_count_span.html(my.vote_total_count);\n\n  if (dbase_actions_issued(my.uid, { switch_action: 1 })) {\n    switchDirection();\n  }\n  dbase_poll();\n}\n\nfunction create_ui() {\n  createButton('Vote Up').mousePressed(voteUpAction);\n\n  createButton('Down').mousePressed(voteDownAction);\n\n  my.vote_count_span = createSpan('' + my.vote_count);\n\n  createElement('br');\n\n  createSpan('Total Votes ');\n  my.vote_total_count_span = createSpan('' + my.vote_total_count);\n\n  createElement('br');\n\n  createButton('Direction').mousePressed(switchDirectionAction);\n\n  createElement('br');\n\n  createButton('Remove App').mousePressed(removeAppAction);\n\n  // // Move the canvas below all the ui elements\n  // let body_elt = document.querySelector('body');\n  // let main_elt = document.querySelector('main');\n  // body_elt.insertBefore(main_elt, null);\n}\n\n// check device exists in db\nfunction startup_completed() {\n  console.log('startup_completed');\n  //\n  dbase_devices_observe({ observed_key, observed_item, all: 1 });\n\n  function observed_key(key, device) {\n    // console.log('observed_a_device key', key, 'uid', my.uid, 'device', device);\n    console.log('observed_key key', key, 'device.vote_count', device && device.vote_count);\n  }\n\n  function observed_item(device) {\n    console.log('observed_item device.vote_count', device.vote_count);\n    if (device.vote_count != undefined) {\n      my.vote_count = device.vote_count;\n    }\n  }\n}\n\nfunction voteUpAction() {\n  console.log('Vote Up');\n  dbase_update_props({ vote_count: dbase_increment(1) });\n}\n\nfunction voteDownAction() {\n  console.log('Vote Down');\n  dbase_update_props({ vote_count: dbase_increment(-1) });\n}\n\nfunction switchDirectionAction() {\n  dbase_issue_actions({ switch_action: 1 }, { all: 1 });\n}\n\nfunction removeAppAction() {\n  dbase_remove_mo_app();\n}\n\nfunction switchDirection() {\n  my.xstep = my.xstep * -1;\n}\n\nfunction calc_votes() {\n  my.vote_total_count = 0;\n  let a_devices = dbase_a_devices();\n  for (let device of a_devices) {\n    if (device.vote_count != undefined) {\n      my.vote_total_count += device.vote_count;\n    }\n  }\n}\n\n// F5 to select chrome\n// VS Code menu: Run > Start Debugging\n\n// .vscode/launch.json\n//    \"url\": \"http://localhost:5500/examples/vote/\",\n\n// https://stackoverflow.com/questions/46945784/how-to-debug-javascript-in-visual-studio-code-with-live-server-running\n",
        "children": [],
        "fileType": "file",
        "_id": "6631b959faa2929586cd1752",
        "isSelectedFile": true,
        "createdAt": "2024-05-01T03:47:41.789Z",
        "updatedAt": "2024-05-01T03:47:41.789Z",
        "id": "6631b959faa2929586cd1752"
      }
    ],
    "createdAt": "2024-05-01T03:39:06.017Z",
    "id": "IOjRuqP4xL"
  },
  {
    "_id": "R49RqlWYn",
    "name": "vote_DOMjs",
    "updatedAt": "2024-05-01T03:47:41.600Z",
    "files": [
      {
        "name": "root",
        "content": "",
        "children": [
          "6631b95afaa2929586cd1754",
          "6631b95afaa2929586cd1755",
          "6631b95afaa2929586cd1756",
          "6631b95afaa2929586cd1757"
        ],
        "fileType": "folder",
        "_id": "6631b95afaa2929586cd1753",
        "createdAt": "2024-05-01T03:47:41.600Z",
        "updatedAt": "2024-05-01T03:47:41.600Z",
        "isSelectedFile": false,
        "id": "6631b95afaa2929586cd1753"
      },
      {
        "name": "a_sketch.js",
        "content": "// https://editor.p5js.org/jht9629-gmail/sketches/R49RqlWYn\n// vote_DOMjs\n\n// https://editor.p5js.org/jht9629-nyu/sketches/CAgivET8K\n// p5moExamples vote_DOMjs 47\n\n// participants can cast a numeric vote up or down\n// buttons to flip and coup: reset the database\n\n// display list of participants using DOMjs id_ul.innerHTML\n// Using DOM.js for ui\n//  https://github.com/lenincompres/DOM.js\n\nlet my = {};\n\n// mo-vote/device/{uid}/vote\n//    individual vote\n\nfunction setup() {\n  my_setup(); // setup firebase configuration\n\n  my.canvas = createCanvas(my.width, my.height);\n\n  dbase_app_init({ completed: startup_completed }); // callback function when app init\n\n  create_ui();\n}\n\nfunction draw() {\n  background(0);\n  fill(my.colors[abs(my.vote_count) % my.colors.length]);\n  circle(my.x, my.y, my.len);\n  my.x = (my.x + my.xstep + width) % width;\n\n  calc_votes();\n\n  id_vote_count_span.innerHTML = my.vote_count;\n  id_vote_total_count_span.innerHTML = my.vote_total_count;\n\n  if (dbase_actions_issued(my.uid, { switch_action: 1 })) {\n    switchDirection();\n  }\n  dbase_poll();\n}\n\n// check device exists in db\nfunction startup_completed() {\n  console.log('startup_completed');\n  //\n  dbase_devices_observe({ observed_key, observed_item, all: 1 });\n\n  function observed_key(key, device) {\n    // console.log('observed_a_device key', key, 'uid', my.uid, 'device', device);\n    console.log('observed_a_device key', key, 'device.vote_count', device && device.vote_count);\n  }\n\n  function observed_item(device) {\n    console.log('observed_item device.vote_count', device.vote_count);\n    if (device.vote_count != undefined) {\n      my.vote_count = device.vote_count;\n    }\n  }\n}\n\nfunction voteUpAction() {\n  console.log('Vote Up');\n  dbase_update_props({ vote_count: dbase_increment(1) });\n}\n\nfunction voteDownAction() {\n  console.log('Vote Down');\n  dbase_update_props({ vote_count: dbase_increment(-1) });\n}\n\nfunction switchDirectionAction() {\n  dbase_issue_actions({ switch_action: 1 }, { all: 1 });\n}\n\nfunction removeAppAction() {\n  dbase_remove_mo_app();\n}\n\nfunction switchDirection() {\n  my.xstep = my.xstep * -1;\n}\n\nfunction calc_votes() {\n  my.vote_total_count = 0;\n  // Make a copy of device list\n  let a_devices = [...dbase_a_devices()];\n  // Sort by uid so order is consistent\n  a_devices = a_devices.sort(sort_by_uid);\n  let items = [];\n  for (let device of a_devices) {\n    // console.log('device', device);\n    let { uid, vote_count } = device;\n    if (vote_count == undefined) {\n      continue;\n    }\n    my.vote_total_count += vote_count;\n    let item = `uid ${uid} vote_count ${vote_count}`;\n    if (my.uid == uid) {\n      item = `<b>${item}</b>`;\n    }\n    items.push(item);\n  }\n  //\n  // !!@ how to attach at li\n  id_ul.innerHTML = items.join('<br>');\n\n  // li: {\n  //   id: \"listedThings\",\n  //   style: \"font-weight:bold\",\n  //   height: \"20px \",\n  //   content: [\"first item\", \"second item\", \"a third for good meassure\"],\n  // },\n}\n\n// (item1, item2) => item1.uid.localeCompare(item2.uid)\nfunction sort_by_uid(item1, item2) {\n  return item1.uid.localeCompare(item2.uid);\n}\n// https://github.com/lenincompres/DOM.js\n\n// F5 to select chrome\n// VS Code menu: Run > Start Debugging\n\n// .vscode/launch.json\n//    \"url\": \"http://localhost:5500/examples/vote/\",\n\n// https://stackoverflow.com/questions/46945784/how-to-debug-javascript-in-visual-studio-code-with-live-server-running\n",
        "children": [],
        "fileType": "file",
        "_id": "6631b95afaa2929586cd1754",
        "isSelectedFile": true,
        "createdAt": "2024-05-01T03:47:41.600Z",
        "updatedAt": "2024-05-01T03:47:41.600Z",
        "id": "6631b95afaa2929586cd1754"
      },
      {
        "name": "create_ui.js",
        "content": "//\n// Using DOM.js for ui\n//  https://github.com/lenincompres/DOM.js\n\nfunction create_ui() {\n  DOM.set([\n    { tag: 'button', text: 'Vote Up', onclick: voteUpAction },\n    { tag: 'button', text: 'Down', onclick: voteDownAction },\n    { tag: 'span', id: 'id_vote_count_span', text: my.voteCount },\n    { tag: 'br' },\n    { tag: 'span', text: 'Total Votes ' },\n    { tag: 'span', id: 'id_vote_total_count_span', text: my.vote_total_count },\n    { tag: 'br' },\n    { tag: 'button', text: 'Flip', onclick: switchDirectionAction },\n    { tag: 'button', text: 'Coup', onclick: removeAppAction },\n    { tag: 'ul', id: 'id_ul' },\n  ]);\n\n  // createButton('Vote Up').mousePressed(voteUpAction);\n  // createButton('Down').mousePressed(voteDownAction);\n  // my.vote_count_span = createSpan('' + my.vote_count);\n  // createElement('br');\n  // createSpan('Total Votes ');\n  // my.vote_total_count_span = createSpan('' + my.vote_total_count);\n  // createElement('br');\n  // createButton('Direction').mousePressed(switchDirectionAction);\n  // createElement('br');\n  // createButton('Remove App').mousePressed(removeAppAction);\n}\n\n// function calc_votes() {\n//    let item = `uid ${uid} vote_count ${vote_count}`;\n//    id_ul.innerHTML = items.join('<br>');\n\n// id_vote_count_span.innerHTML = my.vote_count;\n// id_vote_total_count_span.innerHTML = my.vote_total_count;\n\n// my.vote_count_span.html(my.vote_count);\n// my.vote_total_count_span.html(my.vote_total_count);\n\n// https://editor.p5js.org/jht9629-nyu/sketches/mLU67cNL0\n// test drive DOM.js v8\n\n// https://github.com/lenincompres/DOM.js?tab=readme-ov-file#the-domset-method\n\n// https://developer.mozilla.org/en-US/docs/Web/API/Document_Object_Model/Introduction\n\n// https://editor.p5js.org/jht9629-nyu/sketches/Bv2yPxl9Y\n// test drive DOM.js v1\n// someElement undefined\n// needed to add id_main\n",
        "children": [],
        "fileType": "file",
        "_id": "6631b95afaa2929586cd1755",
        "isSelectedFile": false,
        "createdAt": "2024-05-01T03:47:41.600Z",
        "updatedAt": "2024-05-01T03:47:41.600Z",
        "id": "6631b95afaa2929586cd1755"
      },
      {
        "name": "index.html",
        "content": "<!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/p5.js\"></script>\n    <!-- <script src=\"https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/addons/p5.sound.min.js\"></script> -->\n\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"https://molab-itp.github.io/p5moRelease/lib/47/style.css\" />\n    <!-- <link rel=\"stylesheet\" type=\"text/css\" href=\"../../../p5moLibrary/src/lib/style.css\" /> -->\n\n    <script src=\"https://cdn.jsdelivr.net/gh/lenincompres/DOM.js@latest/DOM.js\"></script>\n\n    <style></style>\n  </head>\n  <body>\n    <main></main>\n\n    <script type=\"module\" src=\"https://molab-itp.github.io/p5moRelease/lib/47/a_lib.js\"></script>\n    <!-- <script type=\"module\" src=\"../../p5moLibrary/src/lib/a_lib.js\"></script> -->\n\n    <script src=\"my_setup.js?v=81\"></script>\n    <script src=\"create_ui.js?v=81\"></script>\n    <script src=\"a_sketch.js?v=81\"></script>\n    <!-- <script src=\"sketch.js\"></script> -->\n  </body>\n</html>\n",
        "children": [],
        "fileType": "file",
        "_id": "6631b95afaa2929586cd1756",
        "isSelectedFile": false,
        "createdAt": "2024-05-01T03:47:41.600Z",
        "updatedAt": "2024-05-01T03:47:41.600Z",
        "id": "6631b95afaa2929586cd1756"
      },
      {
        "name": "my_setup.js",
        "content": "function my_setup() {\n  let lowerMargin = 80; // Room for buttons\n  my.width = windowWidth;\n  my.height = windowHeight - lowerMargin;\n\n  // change to your firebase app\n  my.fireb_config = 'jht9629';\n  // my.fireb_config = 'jht1493';\n  // my.fireb_config = 'jhtitp';\n\n  my.dbase_rootPath = 'm0-@r-@w-';\n\n  // change to add a room in firebase real-time database\n  my.roomName = 'room1';\n\n  my.mo_app = 'mo-vote';\n  my.nameDevice = '';\n  //\n  my.vote_count = 0;\n  my.vote_total_count = 0;\n  my.device_values = {};\n\n  my.x = 0;\n  my.y = my.height / 2;\n  my.xstep = 1;\n  my.len = my.width * 0.8;\n\n  my.colorGold = [187, 165, 61];\n  my.colors = [[255, 0, 0], [0, 255, 0], my.colorGold];\n}\n",
        "children": [],
        "fileType": "file",
        "_id": "6631b95afaa2929586cd1757",
        "isSelectedFile": false,
        "createdAt": "2024-05-01T03:47:41.600Z",
        "updatedAt": "2024-05-01T03:47:41.600Z",
        "id": "6631b95afaa2929586cd1757"
      }
    ],
    "createdAt": "2024-05-01T03:39:06.249Z",
    "id": "R49RqlWYn"
  },
  {
    "_id": "8DOD1d1dQ",
    "name": "words",
    "updatedAt": "2024-05-01T03:47:41.417Z",
    "files": [
      {
        "name": "root",
        "content": "",
        "children": [
          "6631b95afaa2929586cd1759",
          "6631b95afaa2929586cd175a",
          "6631b95afaa2929586cd175b"
        ],
        "fileType": "folder",
        "_id": "6631b95afaa2929586cd1758",
        "createdAt": "2024-05-01T03:47:41.417Z",
        "updatedAt": "2024-05-01T03:47:41.417Z",
        "isSelectedFile": false,
        "id": "6631b95afaa2929586cd1758"
      },
      {
        "name": "index.html",
        "content": "<!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/p5.js\"></script>\n    <!-- <script src=\"https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/addons/p5.sound.min.js\"></script> -->\n\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"https://molab-itp.github.io/p5moRelease/lib/47/style.css\" />\n    <!-- <link rel=\"stylesheet\" type=\"text/css\" href=\"../../../p5moLibrary/src/lib/style.css\" /> -->\n\n    <style></style>\n  </head>\n  <body>\n    <main></main>\n\n    <script type=\"module\" src=\"https://molab-itp.github.io/p5moRelease/lib/47/a_lib.js\"></script>\n    <!-- <script type=\"module\" src=\"../../p5moLibrary/src/lib/a_lib.js\"></script> -->\n\n    <script src=\"sketch.js?v=81\"></script>\n    <!-- <script src=\"sketch.js\"></script> -->\n\n    <!-- <iframe src=\"https://www.merriam-webster.com/word-of-the-day/2023-01-01\" title=\"Words\"></iframe> -->\n  </body>\n</html>\n",
        "children": [],
        "fileType": "file",
        "_id": "6631b95afaa2929586cd1759",
        "isSelectedFile": false,
        "createdAt": "2024-05-01T03:47:41.417Z",
        "updatedAt": "2024-05-01T03:47:41.417Z",
        "id": "6631b95afaa2929586cd1759"
      },
      {
        "name": "sketch.js",
        "content": "// https://editor.p5js.org/jht9629-gmail/sketches/8DOD1d1dQ\n// words\n\n// https://editor.p5js.org/jht9629-nyu/sketches/23h3z1G82\n// p5moExamples words 47\n\n// overlay qrcode on a website\n// [] convert to vanilla js\n// [] action example\n\nlet my = {};\n\n// mo-words/device/{uid}/word\n//    individual word\n\nfunction my_setup() {\n  my.width = windowWidth;\n  my.height = windowHeight;\n  my.fireb_config = 'jht9629';\n  // my.fireb_config = 'jht1493';\n  // my.fireb_config = 'jhtitp';\n  my.dbase_rootPath = 'm0-@r-@w-';\n  my.roomName = 'room1';\n  my.mo_app = 'mo-words';\n  my.nameDevice = '';\n\n  my.iframe_src = 'https://www.merriam-webster.com/word-of-the-day/';\n  my.word_date = new Date();\n}\n\nfunction setup() {\n  my_setup();\n\n  create_my_iframe();\n\n  // my.canvas = createCanvas(my.width, my.height);\n  noCanvas();\n\n  dbase_app_init({ completed: startup_completed });\n\n  createButton('Word Up').mousePressed(wordUp_action);\n  createButton('Word Down').mousePressed(wordDown_action);\n  createButton('To Day').mousePressed(toDay_action);\n  // my.word_count_span = createSpan('' + my.word_count);\n  // createElement('br');\n  createSpan(' Date ');\n  my.word_date_span = createSpan(formatDate(my.word_date));\n\n  // Move the iframe below all the ui elements\n  let body_elt = document.querySelector('body');\n  let other_elt = my.iframe_element.elt;\n  body_elt.insertBefore(other_elt, null);\n}\n\nfunction create_my_iframe() {\n  my.iframe_element = createElement('iframe');\n  my.iframe_element.elt.src = my.iframe_src + '2023-01-01';\n  my.iframe_element.elt.width = windowWidth;\n  my.iframe_element.elt.height = windowHeight;\n}\n\nfunction draw() {\n  background(200);\n  //\n  my.word_date_span.html(my.word_date.toDateString());\n}\n\nfunction startup_completed() {\n  console.log('startup_completed');\n\n  dbase_devices_observe({ observed_item, all: 1 });\n\n  function observed_item(device) {\n    console.log('observed_item device', device);\n    if (device.word_date != undefined) {\n      my.word_date = new Date(device.word_date);\n      let fdate = formatDate(my.word_date);\n      my.iframe_element.elt.src = my.iframe_src + fdate;\n    }\n  }\n}\n\nfunction toDay_action() {\n  my.word_date = new Date();\n  dbase_update_props({ word_date: adjust_word_date(0) });\n}\n\nfunction wordUp_action() {\n  console.log('Word Up');\n  // dbase_update_props({ word_count: dbase_increment(1) });\n  dbase_update_props({ word_date: adjust_word_date(1) });\n}\n\nfunction wordDown_action() {\n  console.log('Word Down');\n  // dbase_update_props({ word_count: dbase_increment(-1) });\n  dbase_update_props({ word_date: adjust_word_date(-1) });\n}\n\nfunction adjust_word_date(delta) {\n  my.word_date = adjustDate(my.word_date, delta);\n  // return formatDate(my.word_date);\n  return my.word_date.toDateString();\n}\n\nfunction adjustDate(date, delta) {\n  const nextDay = new Date(date);\n  nextDay.setDate(nextDay.getDate() + delta);\n  console.log('adjustDate date', date.getDate(), 'getDate', nextDay.getDate());\n  return nextDay;\n}\n\nfunction formatDate(date) {\n  // Extract year, month, and day from the date object\n  const year = date.getFullYear();\n  const month = String(date.getMonth() + 1).padStart(2, '0'); // Month is zero-indexed\n  const day = String(date.getDate()).padStart(2, '0');\n\n  // Construct the formatted date string\n  const formattedDate = `${year}-${month}-${day}`;\n\n  return formattedDate;\n}\n\n/*\n\nhttps://www.merriam-webster.com/word-of-the-day/2023-01-01\nAnnus mirabilis means “a remarkable or notable year.”\n\nhttps://www.merriam-webster.com/word-of-the-day/2024-01-01\nIncipient is used to describe things which are \nbeginning to come into being \nor which are to become apparent.\n\nhttps://www.w3schools.com/tags/tag_iframe.ASP\n\n\nmy.iframe_element.elt.src = 'https://www.merriam-webster.com/word-of-the-day/2023-01-01'\n\n*/\n\n// Issue: lots of debug noise for iframe web site\n",
        "children": [],
        "fileType": "file",
        "_id": "6631b95afaa2929586cd175a",
        "isSelectedFile": true,
        "createdAt": "2024-05-01T03:47:41.417Z",
        "updatedAt": "2024-05-01T03:47:41.417Z",
        "id": "6631b95afaa2929586cd175a"
      },
      {
        "name": "z-research.js",
        "content": "/*\n\nword-header-txt\n<h2 class=\"word-header-txt\">annus mirabilis</h2>\n\nchat-G: in html javascript query an element by class\n\nvar element = document.querySelector('.example-class');\n\n\nhttps://www.merriam-webster.com/word-of-the-day/2023-01-01\n\nword-header-txt\n\n*/\n\n{\n  let elt = document.querySelector('.word-header-txt');\n\n  elt.innerHTML;\n  // 'annus mirabilis'\n}\n\n// !!@ Does not appear to be possible to read iframe document properties\n\n// let elt = my.iframe_element.elt.document.querySelector('.word-header-txt');\n{\n  let iframe = my.iframe_element.elt;\n  let iframeDocument = iframe.contentDocument || iframe.contentWindow.document;\n  console.log('iframeDocument', iframeDocument);\n}\n\n/*\n\nUncaught DOMException: Failed to read a named property 'document' from 'Window': Blocked a frame with origin \"http://127.0.0.1:5500\" from accessing a cross-origin frame.\n    at <anonymous>:2:71\n(anonymous) @ VM15786:2\n\n\n\n\n\n\n*/\n\n// --\n\n// https://chat.openai.com/share/688a2050-26d6-465f-ab2b-2d3f2bcd7243\n// javascript to format date as YYYY-MM-DD\n\n// Example usage:\nconst date = new Date(); // This will get the current date and time\nconst formattedDate = formatDate(date);\nconsole.log('formattedDate', formattedDate); // Output: \"2024-03-03\" (if today is March 3rd, 2024)\n\n// https://chat.openai.com/share/688a2050-26d6-465f-ab2b-2d3f2bcd7243\n// javascript to advance date to next day\n\nfunction advanceToNextDay(date, delta) {\n  // Clone the date object to avoid mutating the original date\n  const nextDay = new Date(date);\n  nextDay.setDate(nextDay.getDate() + delta);\n  return nextDay;\n}\n\n// Example usage:\nconst currentDate = new Date(); // This will get the current date and time\nconst nextDay = advanceToNextDay(currentDate, -1);\n// console.log('nextDay', nextDay.toDateString()); // Output: The date string representing the next day\nconsole.log('nextDay', formatDate(nextDay)); // Output: The date string representing the next day\n",
        "children": [],
        "fileType": "file",
        "_id": "6631b95afaa2929586cd175b",
        "isSelectedFile": false,
        "createdAt": "2024-05-01T03:47:41.417Z",
        "updatedAt": "2024-05-01T03:47:41.417Z",
        "id": "6631b95afaa2929586cd175b"
      }
    ],
    "createdAt": "2024-05-01T03:39:06.439Z",
    "id": "8DOD1d1dQ"
  },
  {
    "_id": "fQAn0VQyB",
    "name": "Worley-Noise-Port",
    "files": [
      {
        "name": "root",
        "content": "",
        "children": [
          "67d5f30b7f5cb6072fce304e",
          "67d5f30b7f5cb6072fce304f",
          "67d5f30b7f5cb6072fce3050"
        ],
        "fileType": "folder",
        "_id": "67d5f30b7f5cb6072fce304d",
        "createdAt": "2025-03-15T21:37:15.927Z",
        "updatedAt": "2025-03-15T21:37:15.927Z",
        "id": "67d5f30b7f5cb6072fce304d"
      },
      {
        "name": "index.html",
        "content": "<!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    <title>?=v6 ims_noise_inst</title>\n    <meta charset=\"utf-8\" />\n\n    <meta http-equiv=\"Cache-Control\" content=\"no-cache, no-store, must-revalidate\" />\n    <meta http-equiv=\"Pragma\" content=\"no-cache\" />\n    <meta http-equiv=\"Expires\" content=\"0\" />\n\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.10.2/p5.js\"></script>\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.10.2/addons/p5.sound.min.js\"></script>\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"style.css\" />\n  </head>\n  <body>\n    <script src=\"sketch.js\"></script>\n  </body>\n</html>\n",
        "children": [],
        "fileType": "file",
        "isSelectedFile": false,
        "_id": "67d5f30b7f5cb6072fce304e",
        "createdAt": "2025-03-15T21:37:15.927Z",
        "updatedAt": "2025-03-15T21:37:15.927Z",
        "id": "67d5f30b7f5cb6072fce304e"
      },
      {
        "name": "sketch.js",
        "content": "// https://editor.p5js.org/jht9629-nyu/sketches/O91vtOED4\n// Worley Noise frameIndex bounce\n\n// adapted to use createGraphics\n\nlet points = [];\nlet layer;\nlet frameIndex = 0;\nlet frameDelta = 1;\nlet my = {};\n\nfunction setup() {\n  createCanvas(windowWidth, windowHeight - 55);\n  // createCanvas(100, 100);\n  pixelDensity(1);\n  initPoints();\n  initGraphics();\n  setup_fullScreenBtn();\n}\n\nfunction initGraphics() {\n  layer = createGraphics(100, 100);\n}\n// https://p5js.org/reference/p5/createGraphics/\n\nfunction initPoints() {\n  let w = 100;\n  let h = 100;\n  for (let i = 0; i < 20; i++) {\n    let x = random(w);\n    let y = random(h);\n    let z = random(w);\n    points[i] = { x, y, z };\n    // points[i] = createVector(random(width), random(height), random(width));\n  }\n}\n\nfunction draw() {\n  updateLayer();\n  let w = layer.width;\n  let h = layer.height;\n  image(layer, 0, 0, width, height, 0, 0, w, h);\n  // image(layer, 0, 0);\n}\n// https://p5js.org/reference/p5/image/\n// image(img, x, y, [width], [height])\n// image(img, dx, dy, dWidth, dHeight, sx, sy, [sWidth], [sHeight], [fit], [xAlign], [yAlign])\n\nfunction updateLayer() {\n  layer.loadPixels();\n  let w = layer.width;\n  let h = layer.height;\n  let ww = w * 1;\n  frameIndex += frameDelta;\n  if (frameIndex >= w || frameIndex < 0) {\n    frameDelta = frameDelta * -1;\n    frameIndex += frameDelta;\n  }\n  for (let x = 0; x < w; x++) {\n    for (let y = 0; y < h; y++) {\n      let distances = [];\n      for (let i = 0; i < points.length; i++) {\n        let v = points[i];\n        let z = frameIndex;\n        // let z = frameCount % w;\n        let d = dist(x, y, z, v.x, v.y, v.z);\n        distances[i] = d;\n      }\n      let sorted = sort(distances);\n\n      // let r = map(sorted[0], 0, 150, 0, 255);\n      // let g = map(sorted[1], 0, 50, 255, 0);\n      // let b = map(sorted[2], 0, 200, 255, 0);\n\n      // bright heart\n      let r = map(sorted[0], 0, 50, 0, 255);\n      let g = map(sorted[1], 0, 50, 0, 255);\n      let b = map(sorted[2], 0, 50, 0, 255);\n\n      let index = (x + y * w) * 4;\n      layer.pixels[index + 0] = r;\n      layer.pixels[index + 1] = g;\n      layer.pixels[index + 2] = b;\n      layer.pixels[index + 3] = 255;\n    }\n  }\n  layer.updatePixels();\n}\n\nfunction windowResized() {\n  resizeCanvas(windowWidth, windowHeight);\n}\n\nfunction setup_fullScreenBtn() {\n  my.fullScreenBtn = createButton('?=v6 Full Screen');\n  my.fullScreenBtn.mousePressed(full_screen_action);\n  my.fullScreenBtn.style('font-size:42px');\n}\n\nfunction full_screen_action() {\n  my.fullScreenBtn.remove();\n  fullscreen(1);\n  let delay = 3000;\n  setTimeout(ui_present_window, delay);\n}\n\nfunction ui_present_window() {\n  resizeCanvas(windowWidth, windowHeight);\n  // init_dim();\n}\n\n// https://editor.p5js.org/codingtrain/sketches/QsiCWVczZ\n// Worley Noise\n// Coding in the Cabana\n// The Coding Train / Daniel Shiffman\n// https://thecodingtrain.com/CodingInTheCabana/004-worley-noise.html\n// https://youtu.be/4066MndcyCk\n// p5 port: https://editor.p5js.org/codingtrain/sketches/QsiCWVczZ\n\n// https://editor.p5js.org/jht9629-nyu/sketches/1fcRQkDrn\n// Cabana! - Worley Noise Port copy\n\n// https://editor.p5js.org/jht9629-nyu/sketches/CRYzNz14L\n// Worley Noise createGraphics\n",
        "children": [],
        "fileType": "file",
        "isSelectedFile": true,
        "_id": "67d5f30b7f5cb6072fce304f",
        "createdAt": "2025-03-15T21:37:15.927Z",
        "updatedAt": "2025-03-15T21:37:15.927Z",
        "id": "67d5f30b7f5cb6072fce304f"
      },
      {
        "name": "style.css",
        "content": "html, body {\n  margin: 0;\n  padding: 0;\n}\ncanvas {\n  display: block;\n}\n",
        "children": [],
        "fileType": "file",
        "isSelectedFile": false,
        "_id": "67d5f30b7f5cb6072fce3050",
        "createdAt": "2025-03-15T21:37:15.927Z",
        "updatedAt": "2025-03-15T21:37:15.927Z",
        "id": "67d5f30b7f5cb6072fce3050"
      }
    ],
    "createdAt": "2025-03-15T19:33:41.636Z",
    "updatedAt": "2025-03-15T21:37:15.927Z",
    "id": "fQAn0VQyB"
  }
]
